
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Cameron Presley">
      
      
      
        <link rel="prev" href="../../../2025/">
      
      
        <link rel="next" href="../../../2023/">
      
      
        
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16+insiders-4.53.16">
    
    
      
        <title>2024 - The Software Mentor</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.1caf78d2.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../stylesheets/page.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-ZE0MGVG7RJ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-ZE0MGVG7RJ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-ZE0MGVG7RJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2024" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="The Software Mentor" class="md-header__button md-logo" aria-label="The Software Mentor" data-md-component="logo">
      
  <img src="../../../../../assets/images/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Software Mentor
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2024
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        
  
  
    
  
  About Me

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../" class="md-tabs__link">
          
  
  
  Articles

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../courses/" class="md-tabs__link">
        
  
  
    
  
  Training Course

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../level-up/" class="md-tabs__link">
        
  
  
    
  
  Level Up Resources

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../presentations/" class="md-tabs__link">
        
  
  
    
  
  Presentations

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../speaking-schedule/" class="md-tabs__link">
        
  
  
    
  
  Speaking Schedule

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../story/" class="md-tabs__link">
        
  
  
    
  
  Story

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../resume/" class="md-tabs__link">
        
  
  
    
  
  Resume

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="The Software Mentor" class="md-nav__button md-logo" aria-label="The Software Mentor" data-md-component="logo">
      
  <img src="../../../../../assets/images/favicon.png" alt="logo">

    </a>
    The Software Mentor
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    About Me
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Articles
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Articles
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Archive
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Archive
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2025
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="../../" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    2024
  

    
  </span>
  
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2023
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2020/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2020
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2018/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2018
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2015/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2015
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2014/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2014
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2013/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2013
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/net/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    .NET
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/c/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C#
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/career/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Career
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/coaching-corner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coaching Corner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/functional-programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Functional Programming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/interviewing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interviewing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/leadership/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Leadership
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/learning-through-example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning Through Example
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/solid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SOLID
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/today-i-learned/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Today I Learned
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/tooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tooling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/typescript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeScript
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../courses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training Course
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../level-up/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level Up Resources
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../presentations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Presentations
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../speaking-schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Speaking Schedule
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Story
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../resume/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resume
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="2024">2024</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-06-03 00:00:00+00:00">Jun 3, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/coaching-corner/" class="md-meta__link">Coaching Corner</a>, 
              <a href="../../../../category/career/" class="md-meta__link">Career</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="coaching-corner-volume-5"><a class="toclink" href="../../../../2024/06/03/coaching-corner-volume-5/">Coaching Corner Volume 5</a></h2>
<p>Welcome to Cameron's Coaching Corner, where we answer questions from readers about leadership, career, and software engineering.</p>
<p>In this post, we'll look at a question from <em>TheRefsAlwaysWin</em> about how to get a new engineer on their team to open up and get comfortable asking for help.</p>
<div class="admonition quote">
<p>I've got a newish member to the team and they're still early in their career. They've got a good head on their shoulders, however, they tend to go down rabbit holes when problem solving and they don't speak up or ask for help.</p>
<p>They've asked me a few times about "how did I know ....", and a lot of the times, it's experience (I've been doing this for a few decades now).</p>
<p>How do I help them open up and ask more questions to the team and group?</p>
</div>

    
      <nav class="md-post__action">
        <a href="../../../../2024/06/03/coaching-corner-volume-5/">
          Continue reading
        </a>
      </nav>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-30 00:00:00+00:00">May 30, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/functional-programming/" class="md-meta__link">Functional Programming</a>, 
              <a href="../../../../category/typescript/" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              6 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="functional-foundations-functions"><a class="toclink" href="../../../../2024/05/30/functional-foundations---functions/">Functional Foundations - Functions</a></h2>
<p>When leveraging functional programming, you're not going to go far without functions. It's literally in the name.</p>
<p>In this post, let's take a deeper look at what functions are and some of the benefits we gain.</p>
<h3 id="what-is-a-function"><a class="toclink" href="../../../../2024/05/30/functional-foundations---functions/#what-is-a-function">What is a Function?</a></h3>
<p>When we talk about <em>functions</em>, we're not talking about a programming construct (like the <code>function</code> keyword), but instead we're talking about functions from mathematics.</p>
<blockquote>
<p>As such, a <em>function</em> is a mapping from two sets such that for every element of the first set, it maps to a single element in the second set.</p>
</blockquote>
<p>Words are cool, but pictures are better. So let's look at the mapping for the <code>square</code> function.</p>
<p><img alt="Mapping for the Square Function" src="https://softwarementorblog.blob.core.windows.net/images/functional-functions/squaredFunction.png" width="800px" /></p>
<p>In this example, we have an arrow coming from an element on the left where it <em>maps</em> to an element on the right. To read this image, we have a mapping called <em>Square</em> that maps all possible numbers to the set of positive numbers. So -3 maps to 9 (-3<em>-3), 2 maps to 4 (2</em>2), so on and so forth.</p>
<p>To check if our mapping is a function, we need to check that every element on the left is mapped to a single element on the right. If so, then we've got a function!</p>
<p>Sounds easy, right? Let's take a look at a mapping that isn't a function.</p>
<h3 id="love-in-the-air"><a class="toclink" href="../../../../2024/05/30/functional-foundations---functions/#love-in-the-air">Love in the Air?</a></h3>
<p>When working with dates, it's common to figure out how many days are in the month. Not only does this help with billable days, but it also makes sure that we don't try to send invoices on May 32nd.</p>
<p>So let's take a look at a mapping from month to the number of days it has.</p>
<p><img alt="Broken Mapping for the Days In Month Function" src="https://softwarementorblog.blob.core.windows.net/images/functional-functions/daysInMonthBusted.png" width="800px" /></p>
<p>Looking at the mapping, we can tell that January, March, May map to 31, April and June both map to 30. But take a look at February. It's got <em>two</em> arrows coming out of it, one to 28 and the other to 29. Because there are two arrows coming out, this mapping isn't a function. Let's try to implement this mapping in TypeScript.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span>
<span class="normal"><a href="#__codelineno-12-18">18</a></span>
<span class="normal"><a href="#__codelineno-12-19">19</a></span>
<span class="normal"><a href="#__codelineno-12-20">20</a></span>
<span class="normal"><a href="#__codelineno-12-21">21</a></span>
<span class="normal"><a href="#__codelineno-12-22">22</a></span>
<span class="normal"><a href="#__codelineno-12-23">23</a></span>
<span class="normal"><a href="#__codelineno-12-24">24</a></span>
<span class="normal"><a href="#__codelineno-12-25">25</a></span>
<span class="normal"><a href="#__codelineno-12-26">26</a></span>
<span class="normal"><a href="#__codelineno-12-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Month</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Jan&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Feb&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Mar&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Apr&quot;</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;May&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Jun&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Jul&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Aug&quot;</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">           </span><span class="o">|</span><span class="s2">&quot;Sept&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Oct&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Nov&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Dec&quot;</span><span class="p">;</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="kr">type</span><span class="w"> </span><span class="nx">DaysInMonth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">28</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">29</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">30</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">31</span><span class="p">;</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getDaysInMonth</span><span class="p">(</span><span class="nx">month</span><span class="o">:</span><span class="w"> </span><span class="kt">Month</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">DaysInMonth</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">month</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Jan&quot;</span><span class="o">:</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Mar&quot;</span><span class="o">:</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;May&quot;</span><span class="o">:</span>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Jul&quot;</span><span class="o">:</span>
<a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Oct&quot;</span><span class="o">:</span>
<a id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Dec&quot;</span><span class="o">:</span>
<a id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="mf">31</span><span class="p">;</span>
<a id="__codelineno-12-16" name="__codelineno-12-16"></a>
<a id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Feb&quot;</span><span class="o">:</span>
<a id="__codelineno-12-18" name="__codelineno-12-18"></a><span class="w">      </span><span class="c1">// what should this be?</span>
<a id="__codelineno-12-19" name="__codelineno-12-19"></a>
<a id="__codelineno-12-20" name="__codelineno-12-20"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Apr&quot;</span><span class="o">:</span>
<a id="__codelineno-12-21" name="__codelineno-12-21"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Jun&quot;</span><span class="o">:</span>
<a id="__codelineno-12-22" name="__codelineno-12-22"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Aug&quot;</span><span class="o">:</span>
<a id="__codelineno-12-23" name="__codelineno-12-23"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Sept&quot;</span><span class="o">:</span>
<a id="__codelineno-12-24" name="__codelineno-12-24"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Nov&quot;</span><span class="o">:</span>
<a id="__codelineno-12-25" name="__codelineno-12-25"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="mf">30</span><span class="p">;</span>
<a id="__codelineno-12-26" name="__codelineno-12-26"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-12-27" name="__codelineno-12-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>We can't return 28 all the time (we'd be wrong 25% of the time) and we can't return 29 all the time (as we'd be wrong 75% of the time). So how do we know? We need to know something about the year. One approach would be to check if the current year is a leap year (<a href="https://learn.microsoft.com/en-us/office/troubleshoot/excel/determine-a-leap-year">algorithm</a>).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">isLeapYear</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">().</span><span class="nx">getFullYear</span><span class="p">();</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">year</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">400</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">year</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">100</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">year</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="p">}</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="c1">// Updated switch</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="k">case</span><span class="w"> </span><span class="s1">&#39;Feb&#39;</span><span class="o">:</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">isLeapYear</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">29</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">28</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>The problem with this approach is that the determination of what to return isn't from the function's inputs, but outside state (in this case, time). So while this "works", you can get bit when you have tests that start failing when the calendar flips over because it assumed that February always had 28 days.</p>
<p>If we look at the type signature of <code>isLeapYear</code>, we can see that it takes in no inputs, but returns a boolean. How can that be possible except if it always returned a constant value? This is a clue that <code>isLeapYear</code> is not a function.</p>
<p>The better approach is to change our mapping to instead of taking just a month name, it takes two arguments, a <code>monthName</code> and <code>year</code>.</p>
<p><img alt="Fixed Mapping For Days In Month" src="https://softwarementorblog.blob.core.windows.net/images/functional-functions/daysInMonthFixed.png" width="800px" /></p>
<p>With this new mapping, our implementation would look like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span>
<span class="normal"><a href="#__codelineno-14-12">12</a></span>
<span class="normal"><a href="#__codelineno-14-13">13</a></span>
<span class="normal"><a href="#__codelineno-14-14">14</a></span>
<span class="normal"><a href="#__codelineno-14-15">15</a></span>
<span class="normal"><a href="#__codelineno-14-16">16</a></span>
<span class="normal"><a href="#__codelineno-14-17">17</a></span>
<span class="normal"><a href="#__codelineno-14-18">18</a></span>
<span class="normal"><a href="#__codelineno-14-19">19</a></span>
<span class="normal"><a href="#__codelineno-14-20">20</a></span>
<span class="normal"><a href="#__codelineno-14-21">21</a></span>
<span class="normal"><a href="#__codelineno-14-22">22</a></span>
<span class="normal"><a href="#__codelineno-14-23">23</a></span>
<span class="normal"><a href="#__codelineno-14-24">24</a></span>
<span class="normal"><a href="#__codelineno-14-25">25</a></span>
<span class="normal"><a href="#__codelineno-14-26">26</a></span>
<span class="normal"><a href="#__codelineno-14-27">27</a></span>
<span class="normal"><a href="#__codelineno-14-28">28</a></span>
<span class="normal"><a href="#__codelineno-14-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">isLeapYear</span><span class="p">(</span><span class="nx">year</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">year</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">400</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">year</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">100</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">year</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="p">}</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="kd">function</span><span class="w"> </span><span class="nx">getDaysInMonth</span><span class="p">(</span><span class="nx">month</span><span class="o">:</span><span class="w"> </span><span class="kt">Month</span><span class="p">,</span><span class="w"> </span><span class="nx">year</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">DaysInMonth</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">isLeap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">isLeapYear</span><span class="p">(</span><span class="nx">year</span><span class="p">);</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">month</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Jan&quot;</span><span class="o">:</span>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Mar&quot;</span><span class="o">:</span>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;May&quot;</span><span class="o">:</span>
<a id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Jul&quot;</span><span class="o">:</span>
<a id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Oct&quot;</span><span class="o">:</span>
<a id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Dec&quot;</span><span class="o">:</span>
<a id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="mf">31</span><span class="p">;</span>
<a id="__codelineno-14-18" name="__codelineno-14-18"></a>
<a id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Feb&quot;</span><span class="o">:</span>
<a id="__codelineno-14-20" name="__codelineno-14-20"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">isLeap</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">29</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">28</span>
<a id="__codelineno-14-21" name="__codelineno-14-21"></a>
<a id="__codelineno-14-22" name="__codelineno-14-22"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Apr&quot;</span><span class="o">:</span>
<a id="__codelineno-14-23" name="__codelineno-14-23"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Jun&quot;</span><span class="o">:</span>
<a id="__codelineno-14-24" name="__codelineno-14-24"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Aug&quot;</span><span class="o">:</span>
<a id="__codelineno-14-25" name="__codelineno-14-25"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Sept&quot;</span><span class="o">:</span>
<a id="__codelineno-14-26" name="__codelineno-14-26"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;Nov&quot;</span><span class="o">:</span>
<a id="__codelineno-14-27" name="__codelineno-14-27"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="mf">30</span><span class="p">;</span>
<a id="__codelineno-14-28" name="__codelineno-14-28"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-14-29" name="__codelineno-14-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="benefits-of-functions"><a class="toclink" href="../../../../2024/05/30/functional-foundations---functions/#benefits-of-functions">Benefits of Functions</a></h3>
<p>Now that we've covered what functions are and aren't, let's cover some of the reasons why we prefer functions for our logic.</p>
<p>First, mappings help us make sure that we've covered all our bases. We saw in the <code>getDaysInMonth</code> function we found a bug for when the month was February. Mappings can also be great conversation tools with non-engineers as they're intuitive to understand and to explain.</p>
<p>Second, functions are simple to test. Since the result is based solely on inputs, they are great candidates for unit testing and require little to no mocking to write them. I don't know about you, but I like simple test cases that help us build confidence that our application is working as intended.</p>
<p>Third, we can combine functions to make bigger functions using <em>composition</em>. At a high level, composition says that if we have two functions <code>f</code> and <code>g</code>, we can write a new function, <code>h</code> which takes the output of <code>f</code> and feeds it as the input for <code>g</code>.</p>
<p>Sounds theoretical, but let's take a look at a real example.</p>
<p>In the <a href="../../../../2020/05/20/learning-through-example--mars-rover-kata/">Mars Rover kata</a>, we end up building a basic console application that takes the input from the user (a string) and will need to convert it to the action that the rover takes.</p>
<p>In code, the logic looks like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">rover</span><span class="o">:</span><span class="kt">Rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="kt">0</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">0</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="o">:</span><span class="s1">&#39;North&#39;</span><span class="p">};</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">convertStringToCommand</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">convertCommandToAction</span><span class="p">);</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="nx">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">action</span><span class="p">(</span><span class="nx">rover</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>The annoying part is that we're iterating the list twice (once for each <code>map</code> call), and it'd be nice to get it down to a single iteration. This is where composition helps.</p>
<p>When we're running the <code>map</code>s back-to-back, we're accomplish the following workflow</p>
<p><img alt="Input to Command to Action Mapping" src="https://softwarementorblog.blob.core.windows.net/images/functional-functions/commandToActionMapping.png" width="1000px" /></p>
<p>Because each mapping is a function, we can compose the two into a new function, <code>stringToActionConverter</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span>
<span class="normal"><a href="#__codelineno-16-5">5</a></span>
<span class="normal"><a href="#__codelineno-16-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="c1">// using our f and g naming from earlier, convertString is f, convertCommand is g</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">stringToActionConverter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="o">:</span><span class="kt">string</span><span class="p">)=&gt;</span><span class="nx">convertCommandToAction</span><span class="p">(</span><span class="nx">convertStringToCommand</span><span class="p">(</span><span class="nx">s</span><span class="p">));</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="kd">let</span><span class="w"> </span><span class="nx">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">x</span><span class="o">:</span><span class="kt">0</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">0</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="o">:</span><span class="s1">&#39;North&#39;</span><span class="p">}</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="kd">const</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">stringToActionConverter</span><span class="p">);</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="nx">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">action</span><span class="p">(</span><span class="nx">rover</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<h3 id="why-not-function-all-the-things"><a class="toclink" href="../../../../2024/05/30/functional-foundations---functions/#why-not-function-all-the-things">Why Not Function All the Things?</a></h3>
<p>Functions can greatly simplify our mental model as we don't have to keep track of state or other side effects. However, our applications typically deal with side affects (getting input from users, reading from files, interacting with databases) in order to do something useful. Because of this limitation, we strive to put all of our business rules into functions and keep the parts that interact with state as dumb as possible (that way we don't have to troubleshoot as much).</p>
<p>What I've found is that when working with applications, you end up with a <em>workflow</em> where you have input come in, gets processed, and then the result gets outputted.</p>
<p>Here's what an example workflow would look like</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="c1">// Logic to determine the &#39;FizzBuzziness&#39; of a number</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="kd">function</span><span class="w"> </span><span class="nx">determineFizzBuzz</span><span class="p">(</span><span class="nx">input</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">input</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">15</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;FizzBuzz&#39;</span><span class="p">;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">input</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;Fizz&#39;</span><span class="p">;</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">input</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;Buzz&#39;</span><span class="p">;</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">input</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="p">}</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="kd">function</span><span class="w"> </span><span class="nx">workflow</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="ow">void</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">  </span><span class="c1">// Input Boundary</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">prompt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;prompt-sync&#39;</span><span class="p">)();</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">prompt</span><span class="p">();</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="w">  </span><span class="c1">// Business Rules</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">+</span><span class="nx">input</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">input</span><span class="si">}</span><span class="sb"> FizzBuzz value is </span><span class="si">${</span><span class="nx">determineFizzBuzz</span><span class="p">(</span><span class="o">+</span><span class="nx">input</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="sb">`Invalid input`</span><span class="p">;</span>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a>
<a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="w">  </span><span class="c1">// Output boundary</span>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="w">  </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="whats-next"><a class="toclink" href="../../../../2024/05/30/functional-foundations---functions/#whats-next">What's Next?</a></h3>
<p>Now that we have a rough understanding of functions, we can start exploring what happens when things go wrong. For example, could there have been a cleaner way of implementing the business rules of our workflow?</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-26 00:00:00+00:00">May 26, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/today-i-learned/" class="md-meta__link">Today I Learned</a>, 
              <a href="../../../../category/c/" class="md-meta__link">C#</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-primary-constructors"><a class="toclink" href="../../../../2024/05/26/today-i-learned---primary-constructors/">Today I Learned - Primary Constructors</a></h2>
<p>I've recently found myself picking up C# again for a project and even though much of my knowledge applies, I recently found the following and it took me a minute to figure out what's up.</p>
<p>Let's say that we're working on the <a href="../../../../2020/05/20/learning-through-example--mars-rover-kata/">Mars Rover kata</a> and we've decided to model the <em>Rover</em> type as a class with three fields: <em>x, y, and direction</em>.</p>
<p>My normal approach to this problem would have been the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span>
<span class="normal"><a href="#__codelineno-8-19">19</a></span>
<span class="normal"><a href="#__codelineno-8-20">20</a></span>
<span class="normal"><a href="#__codelineno-8-21">21</a></span>
<span class="normal"><a href="#__codelineno-8-22">22</a></span>
<span class="normal"><a href="#__codelineno-8-23">23</a></span>
<span class="normal"><a href="#__codelineno-8-24">24</a></span>
<span class="normal"><a href="#__codelineno-8-25">25</a></span>
<span class="normal"><a href="#__codelineno-8-26">26</a></span>
<span class="normal"><a href="#__codelineno-8-27">27</a></span>
<span class="normal"><a href="#__codelineno-8-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="k">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">Direction</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">  </span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">South</span><span class="p">,</span><span class="w"> </span><span class="n">East</span><span class="p">,</span><span class="w"> </span><span class="n">West</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="p">}</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="p">{</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">_x</span><span class="p">;</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">_y</span><span class="p">;</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">_direction</span><span class="p">;</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Rover</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">direction</span><span class="p">)</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">    </span><span class="n">_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">    </span><span class="n">_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">    </span><span class="n">_direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">;</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Print</span><span class="p">()</span>
<a id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;Rover is at ({_x}, {_y}) facing {_direction}&quot;</span><span class="p">);</span>
<a id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-8-23" name="__codelineno-8-23"></a><span class="p">}</span>
<a id="__codelineno-8-24" name="__codelineno-8-24"></a>
<a id="__codelineno-8-25" name="__codelineno-8-25"></a><span class="c1">// Example usage</span>
<a id="__codelineno-8-26" name="__codelineno-8-26"></a>
<a id="__codelineno-8-27" name="__codelineno-8-27"></a><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">);</span>
<a id="__codelineno-8-28" name="__codelineno-8-28"></a><span class="n">rover</span><span class="p">.</span><span class="n">Print</span><span class="p">();</span><span class="w"> </span><span class="c1">// Rover is at (10, 20) facing North</span>
</code></pre></div></td></tr></table></div>
<p>However, in the code I was working with, I saw the <code>Rover</code> definition as this</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="c1">// note the params at the class line here</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nf">Rover</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">direction</span><span class="p">)</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="p">{</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Print</span><span class="p">()</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;Rover is at ({x}, {y}) facing {direction}&quot;</span><span class="p">);</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="p">}</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="c1">// Example Usage</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">);</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="n">rover</span><span class="p">.</span><span class="n">Print</span><span class="p">();</span><span class="w"> </span><span class="c1">// Rover is at (10, 20) facing North</span>
</code></pre></div></td></tr></table></div>
<p>At first, I thought this was similar to the <a href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/record">record</a> syntax for holding onto data</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">public</span><span class="w"> </span><span class="k">record</span><span class="w"> </span><span class="nf">Rover</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Y</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">Direction</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>And it turns out, that it is! This feature is known as a <a href="https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/instance-constructors#primary-constructors">primary constructor</a> and when used with classes, it gives you some flexibility on how you want to access those inputs.</p>
<p>For example, in our second implementation of Rover, we're directly using <code>x</code>, <code>y</code>, and <code>direction</code> in  the <code>Print</code> method.</p>
<p>However, let's say that we didn't want to use those properties directly (or if we need to set some state based on those inputs), then we could do the following.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nf">Rover</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">direction</span><span class="p">)</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="p">{</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">_isFacingRightDirection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direction</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Print</span><span class="p">()</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_isFacingRightDirection</span><span class="p">)</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Rover is facing the correct direction!&quot;</span><span class="p">);</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;Rover is at ({x}, {y}) facing {direction}&quot;</span><span class="p">);</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After playing around this for a bit, I can see how this feature would be beneficial for classes that only store their constructor arguments for later usage.</p>
<p>Even though Records accomplish that better, you can't attach functionality to Records, but you can with classes, so it does provide better organization from that front.</p>
<p>That being said, I'm not 100% sure why we needed to add the primary constructor feature to the language as this now opens up multiple ways of setting up constructors. I'm all for giving developers choices, but this seems ripe for <a href="https://en.wiktionary.org/wiki/bikeshedding">bike shedding</a> where teams have to decide which approach to stick with.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-10 00:00:00+00:00">May 10, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/typescript/" class="md-meta__link">TypeScript</a>, 
              <a href="../../../../category/today-i-learned/" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-destructure-objects-in-function-signatures"><a class="toclink" href="../../../../2024/05/10/today-i-learned-destructure-objects-in-function-signatures/">Today I Learned: Destructure Objects in Function Signatures</a></h2>
<p>When modeling types, one thing to keep in mind is to not leverage <a href="https://refactoring.guru/smells/primitive-obsession">primitive types</a> for your domain. This comes up when we use a primitive type (like a string) to represent core domain concepts (like a Social Security Number or a Phone Number).</p>
<p>Here's an example where it can become problematic:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1">// Definition for Customer</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Customer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">  </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">  </span><span class="nx">phoneNumber</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="p">}</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="c1">// Function to send an email to customer about a new sale</span>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">sendEmailToCustomer</span><span class="p">(</span><span class="nx">c</span><span class="o">:</span><span class="kt">Customer</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Look at these deals!&quot;</span><span class="p">;</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">  </span><span class="c1">// Uh oh, we&#39;re trying to send an email to a phone number...</span>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">  </span><span class="k">await</span><span class="w"> </span><span class="nx">sendEmail</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">phoneNumber</span><span class="p">,</span><span class="w"> </span><span class="nx">content</span><span class="p">);</span>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="p">}</span>
<a id="__codelineno-6-16" name="__codelineno-6-16"></a>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">sendEmail</span><span class="p">(</span><span class="nx">email</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">content</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">  </span><span class="c1">// logic to send email</span>
<a id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>There's a bug in this code, where we're trying to send an email to a phone number. Unfortunately, this code type checks and compiles, so we have to lean on other techniques (automated testing or code reviews) to discover the bug.</p>
<p>Since it's better to find issues earlier in the process, we can make this a compilation error by introducing a new type for <code>Email</code> since not all strings should be treated equally.</p>
<p>One approach we can do is to create a <a href="https://stackoverflow.com/questions/61646400/difference-union-types-and-discriminated-unions-typescript-f/61649726#61649726">tagged union</a> like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="s2">&quot;Email&quot;</span><span class="p">,</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">  </span><span class="nx">value</span><span class="o">:</span><span class="kt">string</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this in place, we can change our <code>sendEmail</code> function to leverage the new <code>Email</code> type.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">sendEmail</span><span class="p">(</span><span class="nx">email</span><span class="o">:</span><span class="kt">Email</span><span class="p">,</span><span class="w"> </span><span class="nx">content</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">  </span><span class="c1">// logic to send email</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now, when we get a compilation error when we try passing in a phoneNumber.</p>
<p><img alt="Compilation error that we can't pass a string to an email" src="https://softwarementorblog.blob.core.windows.net/images/til-destructure-error.png" /></p>
<p>One downside to this approach is that if you want to get the value from the <code>Email</code> type, you need to access it's <code>value</code> property. This can be a bit hard to read and keep track of.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">sendEmail</span><span class="p">(</span><span class="nx">email</span><span class="o">:</span><span class="kt">Email</span><span class="p">,</span><span class="w"> </span><span class="nx">content</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">email</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">  </span><span class="c1">// logic to send email</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="leveraging-object-destructuring-in-functions"><a class="toclink" href="../../../../2024/05/10/today-i-learned-destructure-objects-in-function-signatures/#leveraging-object-destructuring-in-functions">Leveraging Object Destructuring in Functions</a></h3>
<p>One technique to avoid this is to use destructuring to get the individual properties. This allows us to "throw away" some properties and hold onto the ones we care about. For example, let's say that we wanted only the <code>phoneNumber</code> from a <code>Customer</code>. We could get that with an assignment like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span>
<span class="normal"><a href="#__codelineno-10-6">6</a></span>
<span class="normal"><a href="#__codelineno-10-7">7</a></span>
<span class="normal"><a href="#__codelineno-10-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">customer</span><span class="o">:</span><span class="w"> </span><span class="kt">Customer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span><span class="nx">firstName</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Cameron&quot;</span><span class="p">,</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span><span class="nx">lastName</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Presley&quot;</span><span class="p">,</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">  </span><span class="nx">phoneNumber</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;555-5555&quot;</span><span class="p">,</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">  </span><span class="nx">email</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">label</span><span class="o">:</span><span class="s2">&quot;Email&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="s2">&quot;Cameron@domain.com&quot;</span><span class="p">}</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="p">}</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">phoneNumber</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">customer</span><span class="p">;</span><span class="w"> </span><span class="c1">// phoneNumber will be &quot;555-555&quot;</span>
</code></pre></div></td></tr></table></div>
<p>This works fine for assignments, but it'd be nice to have this at a function level. Thankfully, we can do that like so:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="c1">// value is the property from Email, we don&#39;t have the label to deal with</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="kd">function</span><span class="w"> </span><span class="nx">sendEmail</span><span class="p">({</span><span class="nx">value</span><span class="p">}</span><span class="o">:</span><span class="nx">Email</span><span class="p">,</span><span class="w"> </span><span class="nx">content</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">value</span><span class="p">;</span><span class="w"> </span><span class="c1">// note that we don&#39;t have to do .value here</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">  </span><span class="c1">// logic to send email</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>If you find yourself using domain types like this, then this is a handy tool to have in your toolbox.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-06 00:00:00+00:00">May 6, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/today-i-learned/" class="md-meta__link">Today I Learned</a>, 
              <a href="../../../../category/tooling/" class="md-meta__link">Tooling</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-effective-pairing-with-mobsh"><a class="toclink" href="../../../../2024/05/06/today-i-learned---effective-pairing-with-mobsh/">Today I Learned - Effective Pairing with Mob.sh</a></h2>
<p>As someone who enjoys leveraging technology and teaching, I'm always interested in ways to simplify the teaching process.</p>
<p>For example, when I'm teaching someone a new skill, I follow the "show one, do one, lead one" approach and my tool of choice for the longest time was <a href="https://visualstudio.microsoft.com/services/live-share/">LiveShare</a> by Microsoft.</p>
<h3 id="using-vs-liveshare"><a class="toclink" href="../../../../2024/05/06/today-i-learned---effective-pairing-with-mobsh/#using-vs-liveshare">Using VS LiveShare</a></h3>
<p>I think this extension is pretty slick as it allows you to have multiple collaborators, the latency is quite low, and it's built into both Visual Studio Code (VS Code) and Visual Studio.</p>
<h3 id="drawbacks-to-liveshare"><a class="toclink" href="../../../../2024/05/06/today-i-learned---effective-pairing-with-mobsh/#drawbacks-to-liveshare">Drawbacks to LiveShare</a></h3>
<h4 id="editor-lock-in"><a class="toclink" href="../../../../2024/05/06/today-i-learned---effective-pairing-with-mobsh/#editor-lock-in">Editor Lock-In</a></h4>
<p>First, participants have to be using Visual Studio or VS Code. Since there's support for VS Code, this isn't quite a blocker as it could be. However, let's say that I'm wanting to work with a team on a Java application. They're more likely to be using IntelliJ or Eclipse as their editor and I don't want someone to have to change their editor just to collaborate.</p>
<h4 id="security-concerns"><a class="toclink" href="../../../../2024/05/06/today-i-learned---effective-pairing-with-mobsh/#security-concerns">Security Concerns</a></h4>
<p>Second, there are some security considerations to be aware of.</p>
<p>Given the nature of LiveShare, collaborators either connect to your machine (peer-to-peer) or they go through a relay in Azure. Companies that are sensitive to where traffic is routed to won't allow the Azure relay option and given the issues with the URL creation (see next section), the peer-to-peer connection isn't much better.</p>
<p>To start a session, LiveShare generates a URL that the owner would share with their collaborators. As of today, there's no way to limit <em>who</em> can access that link. The owner has some moderator tools to block people, but there's not a way to stop anyone from joining who doesn't have the right kind of email address for example.</p>
<h3 id="introducing-mobsh"><a class="toclink" href="../../../../2024/05/06/today-i-learned---effective-pairing-with-mobsh/#introducing-mobsh">Introducing Mob.sh</a></h3>
<p>While pairing with a <a href="https://www.linkedin.com/in/jefflangr/">colleague</a>, he introduced me to an alternative tool, <a href="https://mob.sh/">mob.sh</a></p>
<p>At first, I was a bit skeptical of this tooling as I enjoyed the ease of use that I got with LiveShare. However, after a few sessions, I find that this tool solves the problems that I was using LiveShare for just as good, if not better.</p>
<h4 id="how-it-works"><a class="toclink" href="../../../../2024/05/06/today-i-learned---effective-pairing-with-mobsh/#how-it-works">How It Works</a></h4>
<p>At a high level, <em>mob.sh</em> is a command line tool that is a wrapper around basic <code>git</code> commands.</p>
<p>Because of this design choice, it doesn't matter what editor that a participant has, as long as the code under question is under <code>git</code> source control, the tooling works.</p>
<p>Let's explore how a pair, Adam and Brittany, would use this tool for work.</p>
<h4 id="adam-and-brittany-start-pairing"><a class="toclink" href="../../../../2024/05/06/today-i-learned---effective-pairing-with-mobsh/#adam-and-brittany-start-pairing">Adam and Brittany Start Pairing</a></h4>
<p>Adam is looking to solve a logic issue in an AWS lambda could use Brittany's guidance since he's new to that domain.</p>
<p>Adam creates a new feature branch, <code>fixing-logic-issue</code> and starts a new mobbing session.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a>git<span class="w"> </span>switch<span class="w"> </span>-c<span class="w"> </span>fixing-logic-issue
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>mob<span class="w"> </span>start<span class="w"> </span>--create
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="c1"># --create is needed because fixing-logic issue is not on the server yet</span>
</code></pre></div></td></tr></table></div>
<p>Under the hood, <code>mob.sh</code> has created a new branch off of <code>fixing-logic-issue</code> called <code>mob/fixing-logic-issue</code>. While Adam is making changes, they're going to occur on the <code>mob/fixing-logic-issue</code>.</p>
<p>Because the pair is working remotely, Adam shares his screen so that they're on the same page.</p>
<p>While on this branch, Adam writes a failing unit test that exposes the logic issue that he's running into. From here he signals that Brittany is up by running <code>mob next</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>mob<span class="w"> </span>next
</code></pre></div></td></tr></table></div>
<p>By running this command, <code>mob.sh</code> adds and commits all the changes made on this branch and pushes them up to the server. Once this command completes, it's Brittany's turn to lead.</p>
<p>Once Brittany see's the <code>mob next</code> command complete, she checks out the <code>fixing-logic-issue</code> branch and picks up the next portion of the work by running <code>mob start</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>git<span class="w"> </span>pull<span class="w"> </span><span class="c1"># To get fixing-logic-issue branch</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>git<span class="w"> </span>switch<span class="w"> </span>fixing-logic-issue
<a id="__codelineno-10-3" name="__codelineno-10-3"></a>mob<span class="w"> </span>start
</code></pre></div></td></tr></table></div>
<p>Because she was on the <code>fixing-logic-issue</code> branch, <code>mob.sh</code> was able to see that there was a <code>mob/fixing-logic-issue</code> branch already, so that branch is checked out.</p>
<p>Based on the test, Brittany shows Adam where the failure is occurring and they write up a fix that passes the failing test.</p>
<p>Though there are more changes to be done, Brittany has a meeting to attend, so she ends the session by running <code>mob done</code>, committing, and then pushing the changes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>mob<span class="w"> </span><span class="k">done</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Fixed first logic bug&quot;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a>git<span class="w"> </span>push
</code></pre></div></td></tr></table></div>
<p>By running <code>mob done</code> command, all the changes that were on the <code>mob/fixing-logic-issue</code> are applied to the <code>fixing-logic-issue</code> branch. From here, Brittany can commit the changes and push them back to the server.</p>
<h3 id="wrapping-up"><a class="toclink" href="../../../../2024/05/06/today-i-learned---effective-pairing-with-mobsh/#wrapping-up">Wrapping Up</a></h3>
<p>If you're looking to expand your pairing/mobbing toolkit, I recommend giving <code>mob.sh</code> a try. Not only is the initial investment small, but I find the tooling natural to pick up after a few tries and since it's a wrapper around Git, it reduces the amount of learning needed before getting started.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-30 00:00:00+00:00">Apr 30, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/process/" class="md-meta__link">Process</a>, 
              <a href="../../../../category/leadership/" class="md-meta__link">Leadership</a></li>
        
        
          
          <li class="md-meta__item">
            
              7 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="running-effective-experiments-with-the-team"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/">Running Effective Experiments With the Team</a></h2>
<p>As a leader, you're always on the look out for new tools and approaches to help the team be more effective.</p>
<p>But what happens when you have an idea? How do you introduce it to the team and get buy-in? How do you encourage others to propose ideas as well (remember, you're job isn't to have all the ideas, but to encourage and choose the best ones).</p>
<p>Let's say that the idea works, what happens next? What if it failed, what do you do next? How do you share your lessons with others?</p>
<p>In this post, I'll walk you through my approach for running experiments with the team and how to answer these questions. Like any other advice, I've found success using this process, but you might find that you'll need to tweak or adjust for your team.</p>
<h3 id="working-in-the-open"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/#working-in-the-open">Working In the Open</a></h3>
<p>When it comes to the team, I'm a big proponent of working in the open. Not only does this reduce the amount of questions from my leader about what we're doing, it also empowers others to chime in when they see something off or the team going down the wrong path.</p>
<p>With this philosophy in mind, I document our experiments in the team wiki. Now, I know that we should <a href="http://agilemanifesto.org/">favor people over processes</a>, however, I have found immense value in taking the 10 minutes to document as this helps get everyone on the same page and when we look at these experiments later, we have the context behind the experiment.</p>
<p>To me, this no different than a scientist writing down their experiments for later reference.</p>
<h3 id="defining-an-experiment"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/#defining-an-experiment">Defining an Experiment</a></h3>
<p>As you might have guessed, I'm a big fan of using the <a href="https://en.wikipedia.org/wiki/Scientific_method">scientific method</a> for engineering work and especially so when it comes to experiments. As such, I capture the following info:</p>
<figure>
<img src="https://images.unsplash.com/photo-1532187863486-abf9dbad1b69?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Purple liquid being injected into one of many test tubes" style="width:500px">
<figcaption>
Seriously, if we're not taking notes, what kind of scientists are we?
</figcaption>
<figcaption>
Photo by <a href="https://unsplash.com/@_louisreed?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Louis Reed</a> on <a href="https://unsplash.com/photos/refill-of-liquid-on-tubes-pwcKF7L4-no?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>
  </figcaption>
</figure>

<ul>
<li>Context - Why are we doing this? What inspired the experiment or what problem are we trying to solve?</li>
<li>Hypothesis - What change are we proposing and what outcome are we looking for?</li>
<li>Implementation - How are we going to run this experiment?</li>
<li>Duration - How long are we going to run this experiment for?</li>
<li>(Optional) Immediate Failure Criteria - Is there anything that could happen during this experiment that would cause to immediately stop?</li>
</ul>
<p><em>For those looking for a template, you can find a markdown version <a href="https://github.com/cameronpresley/leadership-toolkit">in my Leadership Toolkit on GitHub</a></em></p>
<h3 id="scheduling-the-retrospective"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/#scheduling-the-retrospective">Scheduling the Retrospective</a></h3>
<p>With the experiment documented, I send a meeting request the day after the experiment is scheduled to end. The goal of this meeting is to reflect on the experiment and to decide whether we should adopt the changes or to stop.</p>
<h3 id="leading-the-team"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/#leading-the-team">Leading the Team</a></h3>
<p>After sending this meeting, my job is to help the team implement the experiment and coach/encourage as needed. Since it's a process change, it might take a bit for the team to adjust, so showing some patience and understanding is critical here.</p>
<p>While we are going the through the experiment, I'm going to note any changes that I'm noticing. For example, if we're running an experiment to have asynchronous stand-ups, I'm going to take notes on how I'm feeling about the team getting updates and how they're communicating with each other.</p>
<p>Depending on what comes up in our <a href="../../../../2023/05/14/building-relationships-through-one-on-ones/#bonus-seeding-a-conversation">one-on-ones</a>, I might even use this as a starter question.</p>
<h3 id="retrospective"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/#retrospective">Retrospective</a></h3>
<p>Once the experiment has ran its course, it's time to reflect on the experiment and decide as a team on whether to adopt the changes or reject them.</p>
<p>To prepare, I'd recommend <a href="../../../../2024/03/11/five-tips-to-have-more-effective-meetings/#step-3-do-you-have-the-right-people">getting the right people in the room</a> and <a href="../../../../2024/03/11/five-tips-to-have-more-effective-meetings/#step-2-how-do-we-even-know-if-were-successful">setting the context</a>.</p>
<p>During the retro, the team should be doing the majority of the talking. Your role is to seed the conversation and make sure everyone gets their opinions out. I like to capture these notes on a board so that the team has clear visibility on what worked and didn't work.</p>
<p>Once the notes have been added to the board, it's time for the team to decide to adopt the changes or not. During this step, I remind the team that this process isn't set in stone and if we want to tweak it in a future experiment, that's normal and encouraged.</p>
<p>At this point, I update the experiment write-up that <a href="../../../../2024/04/30/running-effective-experiments-with-the-team/#defining-an-experiment">we did earlier</a> with the team decision and the logic behind the decision. This provides an easy way of sharing our lessons with others.</p>
<h3 id="sharing-outcomes-with-others"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/#sharing-outcomes-with-others">Sharing Outcomes With Others</a></h3>
<p>One cool thing about leading teams is that no two teams are the same. Between the personalities, skills, company culture, and motivations, what works for one team won't work for another team (and the other way around).</p>
<p>Because of this, it's critical to share your results with your leader and your peers. This way, they could see what we did, what worked, what didn't work, and hopefully get inspired to run their own experiments with teams.</p>
<p>If the team paid a learning tax for an experiment, why wouldn't we share those results with others so that they can learn from our experiences? They might be able to make suggestions to turn a failure into a success or to ask questions about how we dealt with an issue.</p>
<p>The group being successful is your success, do don't hoard knowledge, share it with others!</p>
<p>With the write-up completed, you can start simply by sending a link to the group. A better approach would be to have a standing agenda item for your team lead meeting where leaders can talk about experiments that have been ran recently and their outcomes.</p>
<h3 id="common-mistakes"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/#common-mistakes">Common Mistakes</a></h3>
<p>When I've worked with leaders to introduce experiments, it can be a lot to take in because this is a different way of thinking. This is especially true if leaders are not in a psychologically safe environment or if they have prior experiences that weren't successful.</p>
<p>I can't guarantee that you'll run experiments flawlessly, however, if you avoid these common mistakes, your odds of success will be higher.</p>
<h4 id="not-time-boxing-the-experiment"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/#not-time-boxing-the-experiment">Not Time Boxing the Experiment</a></h4>
<p>One of the key features of the experiment is that it's only going to run for a set period of time, so that if you find that it's not working, you've not permanently impacted the team.</p>
<p>If you have an experiment that's going to run into perpetuity, that's not an experiment anymore, that's a process change and that shouldn't go through this workflow because experiments can be abandoned, but process changes typically can't.</p>
<h4 id="treating-experiments-as-foregone-conclusions"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/#treating-experiments-as-foregone-conclusions">Treating Experiments as Foregone Conclusions</a></h4>
<p>At some point, you're going to get a directive from your leader that you don't agree with, but you need to commit to the idea anyway. You know the idea isn't going to go over with the team, so you think framing it as an experiment can soften the blow.</p>
<p>DON'T DO THIS!</p>
<figure>
<p><img alt="Jimmy Fallon saying It's Totally Not Worth It" src="https://softwarementorblog.blob.core.windows.net/images/dont-do-it.png" width="500px" /></p>
<figcaption>
Really, don't do this!
</figcaption>
</figure>
<p>Experiments are just that, experiments. They are not a vehicle for you to make unpopular changes. If you use experiments for slipping in these types of changes, then the team will learn that experiments is code for "not great idea" and they'll stop using the process.</p>
<p>Remember, experiments are ideas that you and the team come up with to make things better, not directives from the top coming down.</p>
<p>Now, you <em>could</em> use an experiment to figure out a way to carry out the directive. A good leader tells you where we have to go, but not necessarily how to get there. The experiment could be to figure out how to get there, but not what the destination should be.</p>
<h4 id="running-multiple-experiments"><a class="toclink" href="../../../../2024/04/30/running-effective-experiments-with-the-team/#running-multiple-experiments">Running Multiple Experiments</a></h4>
<p>When getting a new team or after identifying multiple areas that a team could improve in, it's going to be tempting to want to implement multiple changes at once.</p>
<p>Resist the urge.</p>
<p>Remember, an experiment, by definition, is a process change. So the more experiments you run, the more process changes happening, which in turn puts more stress on the team to remember all the changes.</p>
<p>In addition to all the process changes, you might find that one experiment futzes with another experiment and you may not get clear results.</p>
<p>Let's say that we had two experiments going on at the same, asynchronous stand-ups and spending Tuesday afternoons in independent learning. During your one-on-ones, you get some feedback that it's a bit odd to not know what other team members are working on.</p>
<p>What's driving that? Is it the async stand-ups? Or is it the dedicated learning time? Could it be both? You can't be sure.</p>
<p>Another way to think about this is to think about debugging a program. If something's not working, do you change 5 things at once? No, you're going to change one thing, re-run, and see what happens.</p>
<p>Same thing for experiments.</p>
<blockquote>
But Cameron! This team is a hot mess and could stand to improve in so many areas, what should I do then?
</blockquote>

<p>Instead of running all the experiments, instead, the team should decide which experiment would have the biggest payoff and then pursue that one. Remember, you're not playing the short game, but you're in for the long haul, so you'll have the time to make those changes.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-25 00:00:00+00:00">Apr 25, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/process/" class="md-meta__link">Process</a>, 
              <a href="../../../../category/aws/" class="md-meta__link">AWS</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="troubleshooting-a-dynamodb-connection-issue"><a class="toclink" href="../../../../2024/04/25/troubleshooting-a-dynamodb-connection-issue/">Troubleshooting a DynamoDB Connection Issue</a></h2>
<p>Most of my blog posts cover process improvements, leadership advice, and new (to me) technologies. In this post, I wanted to shift a bit and cover some of the fun troubleshooting problems that I run into from time to time.</p>
<p>Enjoy!</p>
<h3 id="the-setup-how-did-we-get-here"><a class="toclink" href="../../../../2024/04/25/troubleshooting-a-dynamodb-connection-issue/#the-setup-how-did-we-get-here">The Setup - How Did We Get Here?</a></h3>
<p>At a high level, the team had a need to process messages coming from a message queue, parse the data, and then insert into a DynamoDB table. At a high level, here's what the architecture looked like:</p>
<pre class="mermaid"><code>graph LR
Queue[Message Queue] --&gt; Lambda[Lambda]
Lambda --&gt; Process[Process?]
Process --&gt; |Failed| DLQ[Dead Letter Queue]
Process --&gt; |Success| DB[DynamoDB Table]</code></pre>
<p>The business workflow is that a batch job was running overnight that would send messages to various queues (including this one). The team knew that we would receive about 100K messages, but had plenty of time to process them as this data was not needed for real-time.</p>
<h3 id="what-went-wrong"><a class="toclink" href="../../../../2024/04/25/troubleshooting-a-dynamodb-connection-issue/#what-went-wrong">What Went Wrong?</a></h3>
<p>For the first night, everything worked as intended. However, for the second night, the team saw that only <em>some</em> of the messages made it to their DynamoDB table. A non-trivial number of them errored out with a message of <code>Error: connect EMFIL &lt;IP ADDRESS&gt;</code>.</p>
<p>I don't know about you, but I had never seen <code>EMFIL</code> as an error before and the logs weren't very helpful on what was going on.</p>
<p>Doing some digging, we found <a href="https://github.com/aws/aws-sdk-js-v3/issues/5010">this GitHub Issue</a> where someone has ran into a similar problem.</p>
<p>Digging through the comment chain, we found <a href="https://github.com/aws/aws-sdk-js-v3/issues/5010#issuecomment-1670967226">this comment</a>, stating that you could run into this problem if you were exhausting the connection pool to DynamoDB.</p>
<p>Ah, now that's an idea! Even though I hadn't seen that error before, I know that if an application isn't cleaning up their connections properly, then the server can't accept new ones and that would fail the application. With almost 100K messages coming through and the large amount of failures, I could absolutely see how that might be the issue.</p>
<h3 id="inspecting-the-code"><a class="toclink" href="../../../../2024/04/25/troubleshooting-a-dynamodb-connection-issue/#inspecting-the-code">Inspecting the Code</a></h3>
<p>With this in mind, I started to take a look at the lambda in question and found the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span>
<span class="normal"><a href="#__codelineno-9-6">6</a></span>
<span class="normal"><a href="#__codelineno-9-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="c1">// logic to parse event</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">dbClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DynamoDbDocumentClient</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">DynamoDBClient</span><span class="p">());</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">  </span><span class="c1">// logic to insert event</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Aha! This code implies that for <em>every</em> execution of the lambda, it would attempt to create a new connection.</p>
<blockquote>
But Cameron, hold up. Yes, it will create the connection every time the lambda executes, but once the lambda is done, the connection will get cleaned up, so will it really try to spin up 100K connections?
</blockquote>

<p>You're right, when the lambda goes out of scope, the connection will get cleaned up.</p>
<p>But don't forget, it'll take the target server (DynamoDB) some time to tidy up. The problem is that since we were slamming 100K messages in rapid succession, DynamoDB didn't have enough time to clean up the connection before another connection was requested. And that was the problem.</p>
<h3 id="resolution"><a class="toclink" href="../../../../2024/04/25/troubleshooting-a-dynamodb-connection-issue/#resolution">Resolution</a></h3>
<p>Now that we have an idea on what the problem could be, time to fix it. In this case, the change is straightforward (though the reasoning might not be.)</p>
<p>So instead of having this</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span>
<span class="normal"><a href="#__codelineno-10-6">6</a></span>
<span class="normal"><a href="#__codelineno-10-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span><span class="c1">// logic to parse event</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">dbClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DynamoDbDocumentClient</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">DynamoDBClient</span><span class="p">());</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">  </span><span class="c1">// logic to insert event</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>We moved the client creation to be outside of the <code>handler</code> block altogether.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span>
<span class="normal"><a href="#__codelineno-11-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">dbClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">DynamoDbDocumentClient</span><span class="p">.</span><span class="kr">from</span><span class="p">(</span><span class="ow">new</span><span class="w"> </span><span class="nx">DynamoDBClient</span><span class="p">());</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">  </span><span class="c1">// logic to parse event</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">  </span><span class="c1">// logic to insert event</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<blockquote>
Wait, wait. How does this solve the problem? You're still going to be executing this code for every message, so won't you have the same issue?
</blockquote>

<p>Now that's a great question! Something that the team learned is that when a Lambda gets spun-up, there's a <a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtime-environment.html#runtimes-lifecycle">context</a> that's created that hosts the external dependencies. When a lambda execution finishes, the context is maintained by AWS for a certain amount of time <em>to be reused</em> in case the lambda is invoked again. This saves on the init/start-up times.</p>
<p>Because of the shared context, this allows us to essentially pool the connections and drastically reduce the amount of connections needed.</p>
<p>This same advice is given in <a href="https://docs.aws.amazon.com/lambda/latest/dg/best-practices.html#function-code">the best practices</a> documentation for lambdas.</p>
<h3 id="lessons-learned"><a class="toclink" href="../../../../2024/04/25/troubleshooting-a-dynamodb-connection-issue/#lessons-learned">Lessons Learned</a></h3>
<p>After making the code change and redeploying, we were able to confirm that everything was working again with no issues.</p>
<p>Even though the problem was new to us, this was a great opportunity to learn more about how Lambdas work under the hood, understand more about execution context, and a bit of dive into troubleshooting unknown errors for the team.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-22 00:00:00+00:00">Apr 22, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/typescript/" class="md-meta__link">TypeScript</a>, 
              <a href="../../../../category/today-i-learned/" class="md-meta__link">Today I Learned</a>, 
              <a href="../../../../category/process/" class="md-meta__link">Process</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-libyear"><a class="toclink" href="../../../../2024/04/22/today-i-learned-libyear/">Today I Learned: LibYear</a></h2>
<p>When writing software, it's difficult (if not impossible) to write everything from scratch. We're either using a framework or various third-party libraries to make our code work.</p>
<p>On one hand, this is a major win for the community because we're not all having to solve the same problem over and over again. Could you imagine having to implement your own authentication framework (<a href="https://www.reddit.com/r/learnprogramming/comments/q8ppcs/never_roll_your_own_authenticationauthorization/">on second thought...</a>)</p>
<p>However, this power comes at a cost. These libraries aren't free as in beer, but more like puppies. So if we're going to take in the library, then we need to make sure that our dependencies are up-to-date with the latest and greatest. There are new features, bug fixes, and security patches occurring all the time and the longer we let a library drift, the more painful it can be to upgrade.</p>
<p>If the library is leveraging <a href="https://semver.org/">semantic versioning</a>, then we can take a guess on the likelihood of a breaking change base on which number (Major.Minor.Maintenance) has changed.</p>
<ul>
<li>Major - We've made a breaking change that's not backward compatible. Your code may not work anymore.</li>
<li>Minor - We've added added new features that you might be interested in or made other changes that  are backwards compatible.</li>
<li>Maintenance - We've fixed some bugs, sorry about that!</li>
</ul>
<h3 id="keeping-up-with-dependencies"><a class="toclink" href="../../../../2024/04/22/today-i-learned-libyear/#keeping-up-with-dependencies">Keeping Up With Dependencies</a></h3>
<p>For libraries that have known vulnerabilities, you can leverage tools like GitHub's <a href="https://docs.github.com/en/code-security/getting-started/dependabot-quickstart-guide">Dependabot</a> to auto-create pull requests that will upgrade those dependencies for you. Even though the tool might be "noisy", this is a great way to take an active role in keeping libraries up to date.</p>
<p>However, this approach only works for vulnerabilities, what about libraries that are just out-of-date? There's a cost/benefit of upgrading where the longer you go between the upgrades, the riskier the upgrade will be.</p>
<p>In the JavaScript world, we know that dependencies are listed in the <code>package.json</code> file with minimum versions and the <code>package-lock.json</code> file states the <em>exact</em> versions to use.</p>
<h3 id="using-libyear"><a class="toclink" href="../../../../2024/04/22/today-i-learned-libyear/#using-libyear">Using LibYear</a></h3>
<p>I was working with <a href="https://www.linkedin.com/in/joshuaangolano/">one of my colleagues</a> the other day and he referred me to a library called <a href="https://github.com/jdanil/libyear">LibYear</a> that will check your package.json and lock file to determine how much "drift" that you have between your dependencies.</p>
<p>Under the hood, it's combining the <code>npm outdated</code> and <code>npm view &lt;package&gt;</code> commands to determine the drift.</p>
<p>What I like about this tool is that you can use this as a part of a "software health" report for your codebase.</p>
<p>As engineers, we get pressure to ship features and hit delivery dates, but it's our responsibility to make sure that our codebase is in good shape (however we defined that term). I think this library is a good way for us to capture <em>a</em> data point about software health which then allows the team to make a decision on whether we should update our libraries now (or defer).</p>
<p>The nice thing about the <code>LibYear</code> package is that it lends itself to be ran in a pipeline and then you could take those results and post them somewhere. For example, maybe you could <a href="../../../../2023/06/26/having-coffee-with-deno---inspiration/">write your own automation bot</a> that could post the stats in your Slack or Teams chat.</p>
<p>It looks like <a href="https://github.com/marketplace/actions/node-js-dependency-freshness-via-libyear">there's already a GitHub Action</a> for running this tool today, so you could start there as a basis.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-16 00:00:00+00:00">Apr 16, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/process/" class="md-meta__link">Process</a></li>
        
        
          
          <li class="md-meta__item">
            
              9 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="learning-from-failures-leveraging-postmortems-for-good"><a class="toclink" href="../../../../2024/04/16/learning-from-failures-leveraging-postmortems-for-good/">Learning From Failures: Leveraging Postmortems for Good</a></h2>
<p>As engineers, we love solving problems and digging into the details. I know that I feel a particular sense of joy when shipping a system to production for the first time.</p>
<p>However, once a system goes into production, it's going to fail. That's not a knock on engineering, that's a fact of our industry. We cannot build a system with 100% uptime, no matter how much we plan ahead or think about.</p>
<p>When this happens, our job is to fix the issue and bring the systems back up.</p>
<p>A common mistake that I see teams make is that they'll fix the problem, but never dig into the <em>why</em> it happened. Fast forward three months, and the team will run into the same problem, making the same mistakes. I'm always surprised when teams don't share their knowledge because if you've paid the tax of learning from the first outage, why would you pay the same tax to learn the lesson again?</p>
<p>This is where having a <em>postmortem</em> meeting comes into play. Borrowing from medicine, a <em>postmortem</em> is performed when the team gets together to analyze the outage and what could have been done differently to prevent it from happening. Other industries have similar mechanisms (for example, professional athletes review their games to learn where they made mistakes so that they can train differently).</p>
<p>One of the key concepts of the <em>postmortem</em> is that the goal <strong>isn't to assign blame, but to understand what happened and why</strong>. People aren't perfect and it's not reasonable for them to be. This concept is so fundamental that another term you might here for a postmortem is a <em><a href="https://www.atlassian.com/incident-management/postmortem/blameless">blameless incident report (BIR)</a></em>.</p>
<p>Are you interesting learning how to run your own BIR process? <a href="mailto:CoachingCorner@TheSoftwareMentor.com?subject=Running BIRs">Drop me a line</a> and if there's enough interest, I'll write a follow-up post!</p>
<h3 id="getting-started"><a class="toclink" href="../../../../2024/04/16/learning-from-failures-leveraging-postmortems-for-good/#getting-started">Getting Started</a></h3>
<p>Every company has their own process when they have an outage, but health process should be able to answer these five questions at a minimum.</p>
<ol>
<li>What stopped working?</li>
<li>Why did it stop working?</li>
<li>How did we fix it?</li>
<li>What led to the system breaking?</li>
<li>What are we doing to prevent this issue from happening in the future?</li>
</ol>
<p>Organizations may have additional questions for their process, for example</p>
<ul>
<li>What was the impact? (X customers were impacted for Y minutes)</li>
<li>How was this discovered? (Was it user reported, support found it, our monitoring tools paged on-call)</li>
</ul>
<p>You can always make a process more complicated, but it's hard to simplify a process, so my recommendation is start with the 5 questions and then expand as your team evolves and matures.</p>
<h4 id="what-stopped-working"><a class="toclink" href="../../../../2024/04/16/learning-from-failures-leveraging-postmortems-for-good/#what-stopped-working">What Stopped Working?</a></h4>
<p>For there to be an outage, something had to stop working, right? So what was it? It's okay/normal to be a bit technical here, however, don't forget that this outage caused an impact to our users, so we should strive to explain the outage in those terms.</p>
<p>Another way to think about this is <em>"What stopped working and what impact did it have for our users?"</em></p>
<p>Here's a not-great answer to the question</p>
<blockquote>
  The Data Sync Java container stopped working.
</blockquote>

<p>While this does capture what stopped working, the details are quite vague. For example, did it not start? Did it start crashing? Was it the whole process that failed or only one part?</p>
<p>In addition, there's not a clear delineation of what the user impact was. For example, could users not log into the application at all? Were there certain parts of the application that stopped working?</p>
<p>We can improve this by including a bit more details in what specifically stopped working.</p>
<blockquote>
  The Data Sync process was failing to connect to the UserHistory database.
</blockquote>

<p>Ah, okay, now we know that the sync process wasn't able to connect to a specific database and we can start getting a sense of why that would be a big deal. We're still not including the user impact, so let's add that bit of detail in.</p>
<blockquote>
  The Data Sync process was failing to connect to the UserHistory database. As such, when users logged into their account, they could not see the latest transactions for their account.
</blockquote>

<p>Much better, now I know that our users couldn't see recent transactions and it was something to do with the Data Sync process.</p>
<p>As a side benefit, if I'm a new engineer to this codebase or team, I know know more about the architecture and that this process is involved for when users start transactions.</p>
<h4 id="why-did-it-stop-working"><a class="toclink" href="../../../../2024/04/16/learning-from-failures-leveraging-postmortems-for-good/#why-did-it-stop-working">Why Did It Stop Working?</a></h4>
<p>At some point, the system was working and if it's no longer working, something had to have happened, so what was it? Was there a code deployment to production? Did a feature flag get toggled that had an adverse effect? What about infrastructure changes like DNS entries or firewall?</p>
<p>This is a key critical step because if we don't know why it stopped working, then we don't have a good spot to start when we start diving into the <a href="../../../../2024/04/16/learning-from-failures-leveraging-postmortems-for-good/#what-led-to-the-system-breaking">circumstances behind what led to the outage</a>.</p>
<p>This doesn't have to be a page worth of technical deep dive, a couple of sentences can suffice here. In our outage, the issue was due to a port being blocked by the firewall (where it wasn't before).</p>
<blockquote>
  There was an infrastructure change for the database that blocked port 1433, which is the default port for the database. Because of this change, no application was able to successfully connect to the database.
</blockquote>

<h4 id="how-did-we-fix-it"><a class="toclink" href="../../../../2024/04/16/learning-from-failures-leveraging-postmortems-for-good/#how-did-we-fix-it">How Did We Fix It?</a></h4>
<p>If you've gotten to the point of writing the BIR, then you've fixed the issue and the system is up and running again, right? So what did you do to fix the issue? Did you rollback the deployment? Disable a feature flag? Burn down the application, change your name and get a new job? This is a cool part of the BIR because you're leveling up others that if they run into a similar issue, here's how you were able to get back up and running.</p>
<p>In our example, we were able to unblock the port, so we can answer this question with:</p>
<blockquote>
  Once we realized that port 1433 was being blocked by the firewall, we worked with the Infrastructure team to unblock the port. Once that change was completed, the Data Sync service was able to start syncing data to the UserHistory database.
</blockquote>

<h4 id="what-led-to-the-system-breaking"><a class="toclink" href="../../../../2024/04/16/learning-from-failures-leveraging-postmortems-for-good/#what-led-to-the-system-breaking">What Led To the System Breaking?</a></h4>
<p>This is where the meat of the conversation should take place. In a healthy organization, we assume that people are wanting to do the right thing (if not, you have a much bigger problem that BIRs). So we've got to figure out how did we get here, what were the motivations and why did we do the things that we did?</p>
<p>One common approach is <a href="https://en.wikipedia.org/wiki/Five_whys">5 Whys</a>, made popular by the Toyota Production System. The idea is that we keep digging into why something happened and not stop at symptoms.</p>
<p>An example <em>5 Whys</em> breakdown for this outage could be the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">-</span><span class="w"> </span>Why did the Data Sync service started failing to connect to the UserHistory database?
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="k">-</span><span class="w"> </span>Because the port that the Data Sync service was communicating with got blocked
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">    </span><span class="k">-</span><span class="w"> </span>Why did the port become blocked?
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">        </span><span class="k">-</span><span class="w"> </span>One of our security initiatives is to block default ports to lessen the changes of someone gaining access to our systems
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">        </span><span class="k">-</span><span class="w"> </span>Why is this an initiative?
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">            </span><span class="k">-</span><span class="w"> </span>Our current firewall solution doesn&#39;t support a way to have an <span class="ge">_allowList_</span> of dynamic IP addresses. Since most vulnerability tools scan a network, they&#39;ll typically use default ports to see if there&#39;s a service running there and if so, try to compromise it.
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">            </span><span class="k">-</span><span class="w"> </span>Why doesn&#39;t our current firewall solution have support for dynamic IP addresses?
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="k">-</span><span class="w"> </span>Why did we not see this issue in the lower environments?
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">        </span><span class="k">-</span><span class="w"> </span>The lower environments are not configured the same as our production environment
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">        </span><span class="k">-</span><span class="w"> </span>Why are these environments different?
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">            </span><span class="k">-</span><span class="w"> </span>Given that lowers receive less traffic than production, we have multiple databases installed on the same server, none of which are on the default port. By doing this, we&#39;re saving money on infrastructure costs.
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">        </span><span class="k">-</span><span class="w"> </span>Why did the team not realize that the lowers are configured differently?
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">            </span><span class="k">-</span><span class="w"> </span>The Data Sync process is an older part of our application that most of the team doesn&#39;t have knowledge of.
<a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">    </span><span class="k">-</span><span class="w"> </span>Why did our monitoring tools not catch the issue after deployment?
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">        </span><span class="k">-</span><span class="w"> </span>For the Data Sync process, we currently only have a health check, which only checks to see if the app is up, it doesn&#39;t check that it has line-of-sight to all its dependencies.
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">        </span><span class="k">-</span><span class="w"> </span>Why doesn&#39;t the health check include dependency checking?
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">            </span><span class="k">-</span><span class="w"> </span>Health checks are used to tell our cloud infrastructure to restart a service. Since restarting the service wouldn&#39;t have resolved the problem, that&#39;s why we don&#39;t have it included in the checks
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">        </span><span class="k">-</span><span class="w"> </span>Why don&#39;t we have other checks?
<a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">            </span><span class="k">-</span><span class="w"> </span>The Data Sync process predates our existing monitoring solutions and has been stable, so the work was never prioritized.
</code></pre></div></td></tr></table></div>
<p>As you can see, this approach brings up lots of questions, including the motivation behind the work and why the team was doing it anyway. It is possible</p>
<h4 id="what-are-we-doing-to-prevent-similar-issues-in-the-future"><a class="toclink" href="../../../../2024/04/16/learning-from-failures-leveraging-postmortems-for-good/#what-are-we-doing-to-prevent-similar-issues-in-the-future">What Are We Doing To Prevent Similar Issues in the Future?</a></h4>
<p>The system is going to have an outage, that's not up for debate. However, it would be foolish to have an outage and not do anything to prevent it from happening in the future. If we already paid the learning tax once, let's not pay it again for the same issue.</p>
<p>This should be a concrete list of action items that the team takes ownership of. In some cases, it's work that they can do to prevent the issue going forward. In some cases, it could be working with others to help them fix things in their process.</p>
<p>In our hypothetical outage, we could have the following action items</p>
<ul>
<li>Add Additional Monitoring for the Data Sync process</li>
<li>Work with Security to determine approach for securing our database instance</li>
<li>Create environment diagram for Data Sync process</li>
<li>Create architecture diagram for Data Sync process</li>
</ul>
<h3 id="example-blameless-incident-report"><a class="toclink" href="../../../../2024/04/16/learning-from-failures-leveraging-postmortems-for-good/#example-blameless-incident-report">Example Blameless Incident Report</a></h3>
<p>In this post, we covered the 5 main questions to answer for a BIR and what good responses look like. In this section, I wanted to go over an example BIR for the database issue that we've been exploring. As you'll see, it's not a verbose document, however, it does capture the main points and this is easily consumable for other teams to learn from our mistakes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span>
<span class="normal"><a href="#__codelineno-5-28">28</a></span>
<span class="normal"><a href="#__codelineno-5-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="gh"># Title: Users Unable To See Latest Transactions</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="gu">##  What Stopped Working?</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>The Data Sync process stopped being able to connect to the UserHistory Database. Because of this failure, when users logged into their account to see transactions, they were not able to see any new transactions.
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="gu">## Why Did It Stop Working?</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>A change was made to the database infrastructure to block port 1433. This is the default port for a SQL Server database so when it was blocked, no application was able to communicate with the database.
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="gu">## How Did We Fix It?</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a>The firewall port change was reverted.
<a id="__codelineno-5-13" name="__codelineno-5-13"></a>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="gu">## What Led to the System Breaking?</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a>To improve our security posture, we wanted to block default ports to our systems so that if someone was to gain access, they couldn&#39;t &quot;guess&quot; into the connection for the database.
<a id="__codelineno-5-17" name="__codelineno-5-17"></a>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a>When making these firewall changes, we start in the lower environments so that if there is a problem, we impact dev or staging and not production.
<a id="__codelineno-5-19" name="__codelineno-5-19"></a>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a>Unknown to the team, in the lower environments, we have multiple databases installed on a server, none of which are on port 1433. Because of this, we had false confidence that our changes were safe to deploy forward.
<a id="__codelineno-5-21" name="__codelineno-5-21"></a>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a>In production, each database has their own server, running on port 1433.
<a id="__codelineno-5-23" name="__codelineno-5-23"></a>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="gu">##  What Are We Doing To Prevent Issues In The Future?</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Check the environment differences**</span> - Before making infrastructure changes, we&#39;re going to check what the differences are in our lower environments vs production.
<a id="__codelineno-5-27" name="__codelineno-5-27"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Create architecture diagram**</span> - Since one of the main issues is that the team didn&#39;t understand the architecture of the Data Sync process, we&#39;re going to create an architecture diagram that covers the flow of the service.
<a id="__codelineno-5-28" name="__codelineno-5-28"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Create environment diagram**</span> - To better understand our system, we&#39;re going to create an environment diagram that covers the databases at play and how the Data Sync process communicates.
<a id="__codelineno-5-29" name="__codelineno-5-29"></a><span class="k">-</span><span class="w"> </span><span class="gs">**Work with Security on Approaches for Securing Database**</span> - We&#39;ll work with the Security team to either setup a way to have dynamic IPs work with our firewall technology or to change our Data Sync process to have a static IP.
</code></pre></div></td></tr></table></div>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-04-13 00:00:00+00:00">Apr 13, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/functional-programming/" class="md-meta__link">Functional Programming</a>, 
              <a href="../../../../category/typescript/" class="md-meta__link">TypeScript</a>, 
              <a href="../../../../category/today-i-learned/" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-iterating-through-union-types"><a class="toclink" href="../../../../2024/04/13/today-i-learned---iterating-through-union-types/">Today I Learned - Iterating Through Union Types</a></h2>
<p>In a <a href="../../../../2023/04/30/better-domain-modeling-with-discriminated-unions/">previous post</a>, we cover on how using union types in TypeScript is a great approach for domain modeling because it limits the possible values that a type can have.</p>
<p>For example, let's say that we're modeling a card game with a standard deck of playing cards. We could model the domain as such.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Rank</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Ace&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Two&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Three&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Four&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Five&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Six&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Seven&quot;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">           </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Eight&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Nine&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Ten&quot;</span><span class="w"> </span><span class="o">|</span><span class="s2">&quot;Jack&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Queen&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;King&quot;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Suite</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hearts&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Clubs&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Spades&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Diamonds&quot;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Card</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">rank</span><span class="o">:</span><span class="kt">Rank</span><span class="p">;</span><span class="w"> </span><span class="nx">suite</span><span class="o">:</span><span class="kt">Suit</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this modeling, there's no way to create a <code>Card</code> such that it has an invalid <code>Rank</code> or <code>Suite</code>.</p>
<p>With this definition, let's create a function to build the deck.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createDeck</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">Card</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">ranks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Ace&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Two&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Three&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Four&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Five&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Six&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Seven&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Eight&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Nine&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Ten&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Jack&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Queen&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;King&quot;</span><span class="p">];</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">suites</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Hearts&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Clubs&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Spades&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Diamonds&quot;</span><span class="p">];</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">deck</span><span class="o">:</span><span class="kt">Card</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">rank</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">ranks</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">suite</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">suites</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">      </span><span class="nx">deck</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">rank</span><span class="p">,</span><span class="w"> </span><span class="nx">suite</span><span class="p">});</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">deck</span><span class="p">;</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This code works, however, I don't like the fact that I had to formally list the option for both <code>Rank</code> and <code>Suite</code> as this means that I have two different representtions for <code>Rank</code> and <code>Suite</code>, which implies tthat if we needed to add a new <code>Rank</code> or <code>Suite</code>, then we'd need to add it in two places (a violation of DRY).</p>
<p>Doing some digging, I found <a href="https://stackoverflow.com/questions/43067354/how-to-iterate-a-string-literal-type-in-typescript">this StackOverflow post</a> that gave a different way of defining our <code>Rank</code> and <code>Suite</code> types. Let's try that new definition.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">ranks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Ace&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Two&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Three&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Four&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Five&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Six&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Seven&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Eight&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Nine&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Ten&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Jack&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Queen&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;King&quot;</span><span class="p">]</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kd">const</span><span class="p">;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Rank</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">ranks</span><span class="p">[</span><span class="kt">number</span><span class="p">];</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">suites</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Hearts&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Clubs&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Spades&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Diamonds&quot;</span><span class="p">]</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="kd">const</span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Suite</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">suites</span><span class="p">[</span><span class="kt">number</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>In this above code, we're saying that <code>ranks</code> cannot change (either by assignment or by operations like <code>push</code>). With that definition, we can say that <code>Rank</code> is some entry in the <code>ranks</code> array. Similar approach for our <code>suites</code> array and <code>Suite</code> type.</p>
<p>I prefer this approach much more because we have our ranks and suites defined in one place and our code reads cleaner as this says <em>Here are the possible ranks and Rank can only be one of those choices</em>.</p>
<h3 id="limitations"><a class="toclink" href="../../../../2024/04/13/today-i-learned---iterating-through-union-types/#limitations">Limitations</a></h3>
<p>The main limitation is that it only works for "enum" style unions. Let's change example and say that we want to model a series of shapes with the following.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Circle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">radius</span><span class="o">:</span><span class="kt">number</span><span class="p">};</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Square</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">length</span><span class="o">:</span><span class="kt">number</span><span class="p">};</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Rectangle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">height</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="o">:</span><span class="kt">number</span><span class="p">}</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Circle</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">Square</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">Rectangle</span>
</code></pre></div></td></tr></table></div>
<p>To use the same trick, we would need to have an array of constant values. However, we can't have a constant value for any of the <code>Shape</code>s because there are an infinite number of valid <code>Circle</code>s, <code>Square</code>s, and <code>Rectangle</code>s.</p>
    
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <span class="md-pagination__current">2</span> <a class="md-pagination__link" href="../3/">3</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../../2025/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 2025">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                2025
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../2023/" class="md-footer__link md-footer__link--next" aria-label="Next: 2023">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                2023
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.footer", "content.code.copy"], "search": "../../../../../assets/javascripts/workers/search.ad38c271.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.b66b2b78.min.js"></script>
      
    
  </body>
</html>