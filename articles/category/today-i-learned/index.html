
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Cameron Presley">
      
      
      
        <link rel="prev" href="../solid/">
      
      
        <link rel="next" href="../tooling/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16+insiders-4.53.16">
    
    
      
        <title>Today I Learned - The Software Mentor</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.1caf78d2.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/page.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-ZE0MGVG7RJ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-ZE0MGVG7RJ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-ZE0MGVG7RJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#today-i-learned" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="The Software Mentor" class="md-header__button md-logo" aria-label="The Software Mentor" data-md-component="logo">
      
  <img src="../../../assets/images/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Software Mentor
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Today I Learned
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  About Me

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  Articles

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../courses/" class="md-tabs__link">
        
  
  
    
  
  Training Course

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../level-up/" class="md-tabs__link">
        
  
  
    
  
  Level Up Resources

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../presentations/" class="md-tabs__link">
        
  
  
    
  
  Presentations

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../speaking-schedule/" class="md-tabs__link">
        
  
  
    
  
  Speaking Schedule

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../story/" class="md-tabs__link">
        
  
  
    
  
  Story

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../resume/" class="md-tabs__link">
        
  
  
    
  
  Resume

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The Software Mentor" class="md-nav__button md-logo" aria-label="The Software Mentor" data-md-component="logo">
      
  <img src="../../../assets/images/favicon.png" alt="logo">

    </a>
    The Software Mentor
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    About Me
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Articles
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Articles
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Archive
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Archive
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2025
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2024
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2023
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2020
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2018/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2018
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2015/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2015
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2014/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2014
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2013/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2013
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../net/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    .NET
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../c/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C#
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../career/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Career
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../coaching-corner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coaching Corner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../functional-programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Functional Programming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../interviewing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interviewing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../leadership/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Leadership
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../learning-through-example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning Through Example
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../solid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SOLID
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
      
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Today I Learned
  

    
  </span>
  
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../tooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tooling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../typescript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeScript
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training Course
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../level-up/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level Up Resources
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../presentations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Presentations
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../speaking-schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Speaking Schedule
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Story
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resume/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resume
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="today-i-learned">Today I Learned</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-06-20 00:00:00+00:00">Jun 20, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Today I Learned</a>, 
              <a href="../typescript/" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-leveraging-records-to-eliminate-switch-statements"><a class="toclink" href="../../2025/06/20/today-i-learned---leveraging-records-to-eliminate-switch-statements/">Today I Learned - Leveraging Records to Eliminate Switch Statements</a></h2>
<h3 id="the-problem"><a class="toclink" href="../../2025/06/20/today-i-learned---leveraging-records-to-eliminate-switch-statements/#the-problem">The Problem</a></h3>
<p>A common approach is to have a function for each command (<code>moveForward</code>, <code>moveBackward</code>, <code>turnLeft</code>, and <code>turnRight</code>).</p>
<p>When it comes to implementation though, they all have a similar pattern:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">moveForward</span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Rover</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">  </span><span class="k">switch</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">direction</span><span class="p">){</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;North&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">r.y</span><span class="o">+</span><span class="mf">1</span><span class="p">};</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;South&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">r.y</span><span class="o">-</span><span class="mf">1</span><span class="p">};</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;East&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="o">:</span><span class="kt">r.x</span><span class="o">+</span><span class="mf">1</span><span class="p">};</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;West&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="o">:</span><span class="kt">r.x</span><span class="o">-</span><span class="mf">1</span><span class="p">};</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="p">}</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="kd">function</span><span class="w"> </span><span class="nx">turnLeft</span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Rover</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">  </span><span class="k">switch</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">direction</span><span class="p">){</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;North&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="o">:</span><span class="s1">&#39;West&#39;</span><span class="p">};</span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;West&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="o">:</span><span class="s1">&#39;South&#39;</span><span class="p">};</span>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;South&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="o">:</span><span class="s1">&#39;East&#39;</span><span class="p">};</span>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;East&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="o">:</span><span class="s1">&#39;North&#39;</span><span class="p">};</span>
<a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This works, however, the duplicated switch logic can be annoying to deal with. </p>
<p>During a code review, one of <a href="">our interns</a> proposed an interesting solution using a dictionary for lookups.</p>
<p>Let's take a closer look.</p>
<h3 id="possible-solution"><a class="toclink" href="../../2025/06/20/today-i-learned---leveraging-records-to-eliminate-switch-statements/#possible-solution">Possible solution</a></h3>
<p>Instead of leveraging a <code>switch</code> statement, they thought about creating a dictionary where the key was the direction the rover was facing and the value being how to update the rover.</p>
<p>At a high level, it looked something like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;North&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;South&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;East&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;West&quot;</span><span class="p">;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">Rover</span><span class="p">;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="kr">type</span><span class="w"> </span><span class="nx">ActionLookup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Record</span><span class="o">&lt;</span><span class="nx">Direction</span><span class="p">,</span><span class="w"> </span><span class="nx">Action</span><span class="o">&gt;</span><span class="p">;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">moveForward</span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Rover</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">lookup</span><span class="o">:</span><span class="w"> </span><span class="kt">ActionLookup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">    </span><span class="s2">&quot;North&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="p">)=&gt;({...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">r.y</span><span class="o">+</span><span class="mf">1</span><span class="p">}),</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="s2">&quot;South&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="p">)=&gt;({...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">r.y</span><span class="o">-</span><span class="mf">1</span><span class="p">}),</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="w">    </span><span class="s2">&quot;East&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="p">)=&gt;({...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="o">:</span><span class="kt">r.x</span><span class="o">+</span><span class="mf">1</span><span class="p">}),</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="w">    </span><span class="s2">&quot;West&quot;</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="p">)=&gt;({...</span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="o">:</span><span class="kt">r.x</span><span class="o">-</span><span class="mf">1</span><span class="p">})</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">lookup</span><span class="p">[</span><span class="nx">r</span><span class="p">.</span><span class="nx">direction</span><span class="p">];</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">action</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Even though this looks like a dictionary, I like this approach better for two reasons:</p>
<ol>
<li>Explicit key coverage - By defining Record to have a key of <code>Direction</code>, we're forcing the developer to define options for <em>every</em> direction, not just some of them.</li>
<li>Breaks when type changes - If a new option is added to <code>Direction</code>, this code won't compile anymore as it doesn't cover every option, which allows us to find bugs faster. </li>
</ol>
<h3 id="closing-thoughts"><a class="toclink" href="../../2025/06/20/today-i-learned---leveraging-records-to-eliminate-switch-statements/#closing-thoughts">Closing Thoughts</a></h3>
<p>When working with data that requires different access levels, think about leveraging private fields and then providing access through public properties.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-06-10 00:00:00+00:00">Jun 10, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Today I Learned</a>, 
              <a href="../typescript/" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-javascript-private-fields-and-properties"><a class="toclink" href="../../2025/06/10/today-i-learned---javascript-private-fields-and-properties/">Today I Learned - JavaScript Private Fields and Properties</a></h2>
<p>One of my favorite times of year has started, intern season! I always enjoy getting a new group of people who are excited to learn something new and are naturally curious about everything!</p>
<p>As such, one of the first coding katas we complete is <a href="">Mars Rover</a> as it's a great exercise to introduce union types, records, functions, and some of the basic array operators (map and reduce). It also provides a solid introduction to automated testing practices (Arrange/Act/Assert, naming conventions, test cases). Finally, you can solve it multiple ways and depending on the approach, lends itself to refactoring and cleaning up.</p>
<p>Now my preferred approach to the kata is to leverage functional programming (FP) techniques, however, it wouldn't be correct to only show that approach, so I tackled it using more object-oriented (OO) instead.</p>
<p>One of the things that we run into pretty quickly is that we're going to need a <code>Rover</code> class that will have the different methods for moving and turning. Since the <code>Rover</code> will need to keep track of its <code>X</code>, <code>Y</code>, and <code>Direction</code>, I ended up with the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span>
<span class="normal"><a href="#__codelineno-30-2">2</a></span>
<span class="normal"><a href="#__codelineno-30-3">3</a></span>
<span class="normal"><a href="#__codelineno-30-4">4</a></span>
<span class="normal"><a href="#__codelineno-30-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;North&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;South&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;East&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;West&quot;</span><span class="p">;</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="kd">class</span><span class="w"> </span><span class="nx">Rover</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">(</span><span class="k">private</span><span class="w"> </span><span class="nx">x</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="nx">direction</span><span class="o">:</span><span class="kt">Direction</span><span class="p">){}</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">  </span><span class="c1">// moveForward, moveBackward, turnLeft, and turnRight definitions below...</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This approach works just fine as it allows the caller to give us a starting point, but they can't manipulate <code>X</code>, <code>Y</code>, or <code>Direction</code> directly, they have to use one of the methods (i.e., we have encapsulation).</p>
<h3 id="the-problem"><a class="toclink" href="../../2025/06/10/today-i-learned---javascript-private-fields-and-properties/#the-problem">The Problem</a></h3>
<p>However, we run into a slight problem once we get to the user interface. We would like to be able to display the Rover's location and direction, however, we don't have a way of accessing that data since we marked those as private.</p>
<p>In other words, we can't do the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Rover</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;North&#39;</span><span class="p">);</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Rover is at (</span><span class="si">${</span><span class="nx">r</span><span class="p">.</span><span class="nx">x</span><span class="si">}</span><span class="sb">, </span><span class="si">${</span><span class="nx">r</span><span class="p">.</span><span class="nx">y</span><span class="si">}</span><span class="sb">) facing </span><span class="si">${</span><span class="nx">r</span><span class="p">.</span><span class="nx">direction</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>One way to fix this problem is to remove the <code>private</code> modifier and allow the values to be public, however, this would mean that the state of my object could be manipulated either through it's methods (i.e., <code>moveForward</code>) or through global access <code>rover.X = 100</code>. </p>
<p>What I'd like to do instead is to have a way to get the value to the outside world, but not allow them to modify it.</p>
<p>In languages like C#, we would leverage a public get/private set on properties, which would look something like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span><span class="w"> </span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="p">{</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Rover</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">direction</span><span class="p">)</span>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">    </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">    </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="w">    </span><span class="n">Direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">direction</span><span class="p">;</span>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Let's take a look at how we can build the same idea in TypeScript (and by extension, JavaScript)</p>
<h3 id="introducing-fields"><a class="toclink" href="../../2025/06/10/today-i-learned---javascript-private-fields-and-properties/#introducing-fields">Introducing Fields</a></h3>
<p>Introducing fields are simple enough, we just define them in the class like so:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span>
<span class="normal"><a href="#__codelineno-33-4">4</a></span>
<span class="normal"><a href="#__codelineno-33-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kd">class</span><span class="w"> </span><span class="nx">Rover</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nx">x</span><span class="o">:</span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nx">direction</span><span class="o">:</span><span class="kt">Direction</span><span class="p">;</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>However, if you're working in JavaScript, the <code>private</code> keyword doesn't exist. However, JavaScript still allows you to mark something as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_properties">private by prefixing <code>#</code> to the name.</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="kd">class</span><span class="w"> </span><span class="nx">Rover</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">  </span><span class="n">#x</span><span class="p">;</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="w">  </span><span class="n">#y</span><span class="p">;</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="w">  </span><span class="n">#direction</span><span class="p">;</span>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With these fields in place, we now update our constructor to explicitly set the values.</p>
<p>In TypeScript
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1">1</a></span>
<span class="normal"><a href="#__codelineno-35-2">2</a></span>
<span class="normal"><a href="#__codelineno-35-3">3</a></span>
<span class="normal"><a href="#__codelineno-35-4">4</a></span>
<span class="normal"><a href="#__codelineno-35-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="kr">constructor</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="o">:</span><span class="kt">Direction</span><span class="p">){</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">x</span><span class="p">;</span>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">y</span><span class="p">;</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">direction</span><span class="p">;</span>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p>In JavaScript
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span>
<span class="normal"><a href="#__codelineno-36-3">3</a></span>
<span class="normal"><a href="#__codelineno-36-4">4</a></span>
<span class="normal"><a href="#__codelineno-36-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="kr">constructor</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">direction</span><span class="p">){</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="n">#x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">x</span><span class="p">;</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="n">#y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">y</span><span class="p">;</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="w">  </span><span class="k">this</span><span class="p">.</span><span class="n">#direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">direction</span><span class="p">;</span>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p>At this point, we can update the various methods (<code>moveForward</code>, <code>moveBackward</code>, <code>turnLeft</code>, <code>turnRight</code>) to use the fields.</p>
<h3 id="introducing-properties"><a class="toclink" href="../../2025/06/10/today-i-learned---javascript-private-fields-and-properties/#introducing-properties">Introducing Properties</a></h3>
<p>With out fields in use, we can now expose their values by defining the get (colloquially known as the getter) for the fields.</p>
<p>In TypeScript</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span>
<span class="normal"><a href="#__codelineno-37-5">5</a></span>
<span class="normal"><a href="#__codelineno-37-6">6</a></span>
<span class="normal"><a href="#__codelineno-37-7">7</a></span>
<span class="normal"><a href="#__codelineno-37-8">8</a></span>
<span class="normal"><a href="#__codelineno-37-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="nx">get</span><span class="w"> </span><span class="nx">x</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="p">}</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="nx">get</span><span class="w"> </span><span class="nx">y</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="p">}</span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="nx">get</span><span class="w"> </span><span class="nx">direction</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">Direction</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">direction</span><span class="p">;</span>
<a id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>In JavaScript
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span>
<span class="normal"><a href="#__codelineno-38-4">4</a></span>
<span class="normal"><a href="#__codelineno-38-5">5</a></span>
<span class="normal"><a href="#__codelineno-38-6">6</a></span>
<span class="normal"><a href="#__codelineno-38-7">7</a></span>
<span class="normal"><a href="#__codelineno-38-8">8</a></span>
<span class="normal"><a href="#__codelineno-38-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="nx">get</span><span class="w"> </span><span class="nx">x</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">#x</span><span class="p">;</span>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="p">}</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="nx">get</span><span class="w"> </span><span class="nx">y</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">#y</span><span class="p">;</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="p">}</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="nx">get</span><span class="w"> </span><span class="nx">direction</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">#direction</span><span class="p">;</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div></p>
<p>With our properties in place, the following code will work now</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span>
<span class="normal"><a href="#__codelineno-39-2">2</a></span>
<span class="normal"><a href="#__codelineno-39-3">3</a></span>
<span class="normal"><a href="#__codelineno-39-4">4</a></span>
<span class="normal"><a href="#__codelineno-39-5">5</a></span>
<span class="normal"><a href="#__codelineno-39-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Rover</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;North&#39;</span><span class="p">);</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Rover is at (</span><span class="si">${</span><span class="nx">rover</span><span class="p">.</span><span class="nx">X</span><span class="si">}</span><span class="sb">, </span><span class="si">${</span><span class="nx">rover</span><span class="p">.</span><span class="nx">Y</span><span class="si">}</span><span class="sb">) facing </span><span class="si">${</span><span class="nx">rover</span><span class="p">.</span><span class="nx">Direction</span><span class="si">}</span><span class="sb">)`</span><span class="p">);</span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="c1">// prints &quot;Rover is at (4, 2) facing North</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="c1">// But this doesn&#39;t work</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="nx">rover</span><span class="p">.</span><span class="nx">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span><span class="w"> </span><span class="c1">// can&#39;t access X</span>
</code></pre></div></td></tr></table></div>
<h3 id="closing-thoughts"><a class="toclink" href="../../2025/06/10/today-i-learned---javascript-private-fields-and-properties/#closing-thoughts">Closing Thoughts</a></h3>
<p>When working with data that requires different access levels, think about leveraging private fields and then providing access through public properties.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-05-13 00:00:00+00:00">May 13, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Today I Learned</a>, 
              <a href="../typescript/" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              8 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="leveraging-tuples-in-typescript"><a class="toclink" href="../../2025/05/13/leveraging-tuples-in-typescript/">Leveraging Tuples in TypeScript</a></h2>
<p>In preparation for <a href="https://stirtrek.com/">StirTrek</a>, I'm revisiting my approach for how to implement the game of <a href="https://en.wikipedia.org/wiki/Blackjack">Blackjack</a>. I find card games to be a great introduction to functional concepts as you hit the major concepts quickly and the use cases are intuitive.</p>
<p>Let's take a look at one of the concepts in the game, <code>Points</code>.</p>
<p>Blackjack is played with a standard deck of cards (13 Ranks and 4 Suits) where the goal is to get the closest to 21 points without going over. A card is worth Points based on its Rank. So let's go ahead and model what we know so far.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1">1</a></span>
<span class="normal"><a href="#__codelineno-51-2">2</a></span>
<span class="normal"><a href="#__codelineno-51-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Rank</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Ace&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">8</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">9</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">10</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Jack&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Queen&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;King&quot;</span>
<a id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Suit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hearts&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Clubs&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Spades&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Diamonds&quot;</span>
<a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Card</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="k">readonly</span><span class="w"> </span><span class="nx">rank</span><span class="o">:</span><span class="kt">Rank</span><span class="p">,</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">suit</span><span class="o">:</span><span class="kt">Suit</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>We know that a <code>Card</code> is worth points based on its rank, the rule are:</p>
<ul>
<li>Cards with a Rank of 2 through 10 are worth that many points (i.e., 2's are worth 2 points, 3's are worth 3 points, ..., 10's are worth 10 points)</li>
<li>Cards with a Rank of Jack, Queen, or King are worth 10 points</li>
<li>Cards with a Rank of Ace can be worth either 1 or 11 points (depending on which one is the most advantageous)</li>
</ul>
<p>Let's explore the Ace in more detail.</p>
<p>For example, if we had a hand consisting of an <code>Ace</code> and a <code>King</code>, then it could be worth either 11 (treating the Ace as a 1) or as 21 (treating the Ace as an 11). In this case, we'd want to treat the Ace as an 11 as that gives us 21 exactly (specifically, a <em>Blackjack</em>).</p>
<p>In another example, if we had a hand consisting of an <code>Ace</code>, <code>6</code>, and <code>Jack</code>, then it could either be worth 17 (treating the Ace as a 1) or 27 (treating the Ace as an 11). Since 27 is greater than 21 (which would cause us to <em>bust</em>), we wouldn't want the Ace to be worth 11.</p>
<h4 id="creating-cardtopoints"><a class="toclink" href="../../2025/05/13/leveraging-tuples-in-typescript/#creating-cardtopoints">Creating cardToPoints</a></h4>
<p>Now that we have this detail, let's take a look at trying to write the <code>cardToPoints</code> function.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-52-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-52-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-52-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-52-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-52-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-52-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-52-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-52-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-52-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">cardToPoints</span><span class="p">(</span><span class="nx">c</span><span class="o">:</span><span class="kt">Card</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Note we don&#39;t know what the type of this is yet</span>
<a id="__codelineno-52-2" name="__codelineno-52-2"></a><span class="w">  </span><span class="k">switch</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">rank</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;Ace&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">???</span>
<a id="__codelineno-52-4" name="__codelineno-52-4"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;King&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span>
<a id="__codelineno-52-5" name="__codelineno-52-5"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;Queen&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span>
<a id="__codelineno-52-6" name="__codelineno-52-6"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;Jack&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span>
<a id="__codelineno-52-7" name="__codelineno-52-7"></a><span class="w">    </span><span class="nx">default</span><span class="o">:</span>
<a id="__codelineno-52-8" name="__codelineno-52-8"></a><span class="w">      </span><span class="kt">return</span><span class="w"> </span><span class="nx">c</span><span class="p">.</span><span class="nx">rank</span><span class="p">;</span><span class="w"> </span><span class="c1">// we can do this because TypeScript knows all the remaining options for Rank are numbers</span>
<a id="__codelineno-52-9" name="__codelineno-52-9"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-52-10" name="__codelineno-52-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>At this point, we don't know how to score <code>Ace</code> because we would need to know the other cards to get points for. Since we don't have that context here, why not capture both values?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-53-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-53-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-53-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-53-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-53-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-53-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-53-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-53-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-53-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">cardToPoints</span><span class="p">(</span><span class="nx">c</span><span class="o">:</span><span class="kt">Card</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Note we don&#39;t know what the type of this is yet</span>
<a id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="w">  </span><span class="k">switch</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">rank</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;Ace&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">11</span><span class="p">];</span>
<a id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;King&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span>
<a id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;Queen&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span>
<a id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;Jack&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span>
<a id="__codelineno-53-7" name="__codelineno-53-7"></a><span class="w">    </span><span class="nx">default</span><span class="o">:</span>
<a id="__codelineno-53-8" name="__codelineno-53-8"></a><span class="w">      </span><span class="kt">return</span><span class="w"> </span><span class="nx">c</span><span class="p">.</span><span class="nx">rank</span><span class="p">;</span><span class="w"> </span><span class="c1">// we can do this because TypeScript knows all the remaining options for Rank are numbers</span>
<a id="__codelineno-53-9" name="__codelineno-53-9"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-53-10" name="__codelineno-53-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>In TypeScript, we can denote a tuple by using <code>[]</code>. Going forward, TypeScript knows that it's a two element array and guarantees that we can index using 0 or 1.</p>
<p>This works, however, anything using <code>cardToPoints</code> has to deal with that it could either be a number or a tuple.</p>
<p>When I come across cases like this, I reach for setting up a <a href="../../2023/04/30/better-domain-modeling-with-discriminated-unions/">sum type</a> to model each case.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1">1</a></span>
<span class="normal"><a href="#__codelineno-54-2">2</a></span>
<span class="normal"><a href="#__codelineno-54-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Hard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">tag</span><span class="o">:</span><span class="s1">&#39;hard&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="kt">number</span><span class="p">};</span>
<a id="__codelineno-54-2" name="__codelineno-54-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Soft</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">tag</span><span class="o">:</span><span class="s1">&#39;soft&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="p">[</span><span class="kt">number</span><span class="p">,</span><span class="kt">number</span><span class="p">]};</span><span class="w"> </span><span class="c1">// note that value here is a tuple of number*number</span>
<a id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Hard</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">Soft</span>
</code></pre></div></td></tr></table></div>
<p>Now, when I call <code>cardToPoints</code>, I can use the <code>tag</code> field to know whether I'm working with a number or a tuple.</p>
<h4 id="adding-points-together"><a class="toclink" href="../../2025/05/13/leveraging-tuples-in-typescript/#adding-points-together">Adding Points Together</a></h4>
<p>A common workflow in Blackjack is to figure out how many points someone has. At a high level, we'd want to do the following</p>
<ul>
<li>Convert each Card to Points</li>
<li>Add all the Points together</li>
</ul>
<p>Summing things together is a common enough pattern, so we know our code is going to look something like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1">1</a></span>
<span class="normal"><a href="#__codelineno-55-2">2</a></span>
<span class="normal"><a href="#__codelineno-55-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">handToPoints</span><span class="p">(</span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-55-2" name="__codelineno-55-2"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">cards</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">c</span><span class="p">)=&gt;</span><span class="nx">cardToPoints</span><span class="p">(</span><span class="nx">c</span><span class="p">)).</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">SOME_FUNCTION_HERE</span><span class="p">,</span><span class="w"> </span><span class="nx">SOME_INITIAL_VALUE_HERE</span><span class="p">);</span>
<a id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>We don't have the reducer function defined yet, but we do know that it's a function that'll take two <code>Points</code> and return a <code>Points</code>. So let's stub that out.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-56-1">1</a></span>
<span class="normal"><a href="#__codelineno-56-2">2</a></span>
<span class="normal"><a href="#__codelineno-56-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">addPoints</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">Points</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">Points</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-56-2" name="__codelineno-56-2"></a><span class="w">  </span><span class="c1">// implementation</span>
<a id="__codelineno-56-3" name="__codelineno-56-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Since we modeled <code>Points</code> as a sum type, we can use the <code>tag</code> field to go over the possible cases</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-57-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-57-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-57-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-57-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-57-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-57-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-57-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-57-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-57-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-57-10">10</a></span>
<span class="normal"><a href="#__codelineno-57-11">11</a></span>
<span class="normal"><a href="#__codelineno-57-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">addPoints</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">Points</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">Points</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-2" name="__codelineno-57-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-57-3" name="__codelineno-57-3"></a><span class="w">    </span><span class="c1">// logic</span>
<a id="__codelineno-57-4" name="__codelineno-57-4"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-57-5" name="__codelineno-57-5"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;soft&#39;</span><span class="p">){</span>
<a id="__codelineno-57-6" name="__codelineno-57-6"></a><span class="w">    </span><span class="c1">// logic</span>
<a id="__codelineno-57-7" name="__codelineno-57-7"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-57-8" name="__codelineno-57-8"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;soft&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="p">){</span>
<a id="__codelineno-57-9" name="__codelineno-57-9"></a><span class="w">    </span><span class="c1">// logic</span>
<a id="__codelineno-57-10" name="__codelineno-57-10"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span>
<a id="__codelineno-57-11" name="__codelineno-57-11"></a><span class="w">  </span><span class="c1">// last case is both of them are soft</span>
<a id="__codelineno-57-12" name="__codelineno-57-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this skeleton in place, let's start implementing each of the branches</p>
<h5 id="adding-two-hard-values"><a class="toclink" href="../../2025/05/13/leveraging-tuples-in-typescript/#adding-two-hard-values">Adding Two Hard Values</a></h5>
<p>The first case is the easiest, if we have two hard values, then we add their values together. So a <em>King</em> and <em>7</em> us a <em>17</em> for example. </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1">1</a></span>
<span class="normal"><a href="#__codelineno-58-2">2</a></span>
<span class="normal"><a href="#__codelineno-58-3">3</a></span>
<span class="normal"><a href="#__codelineno-58-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">addHardAndHard</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">Hard</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">Hard</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// note that I&#39;m defining a and b as Hard and not just Points</span>
<a id="__codelineno-58-2" name="__codelineno-58-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<a id="__codelineno-58-3" name="__codelineno-58-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">tag</span><span class="o">:</span><span class="s1">&#39;hard&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">};</span>
<a id="__codelineno-58-4" name="__codelineno-58-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this function defined, we can update <code>addPoints</code> like so</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-59-1">1</a></span>
<span class="normal"><a href="#__codelineno-59-2">2</a></span>
<span class="normal"><a href="#__codelineno-59-3">3</a></span>
<span class="normal"><a href="#__codelineno-59-4">4</a></span>
<span class="normal"><a href="#__codelineno-59-5">5</a></span>
<span class="normal"><a href="#__codelineno-59-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">addPoints</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">Points</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">Points</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-59-2" name="__codelineno-59-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="p">){</span>
<a id="__codelineno-59-3" name="__codelineno-59-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">addHardAndHard</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">);</span>
<a id="__codelineno-59-4" name="__codelineno-59-4"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-59-5" name="__codelineno-59-5"></a><span class="w">  </span><span class="c1">// other branches</span>
<a id="__codelineno-59-6" name="__codelineno-59-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="adding-hard-and-soft"><a class="toclink" href="../../2025/05/13/leveraging-tuples-in-typescript/#adding-hard-and-soft">Adding Hard and Soft</a></h4>
<p>The next two cases are the same, where we're adding a Hard value to a Soft value. For example, we're adding a <em>6</em> to an <em>Ace</em>. We can't assume that the answer is 7 since that might not be what the player wants. We also can't assume that the value is 17 because that might not be to the players advantage, which means that we need to keep track of both options, which implies that the result would be a <code>Soft</code> value. Let's go ahead and write that logic out</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-60-1">1</a></span>
<span class="normal"><a href="#__codelineno-60-2">2</a></span>
<span class="normal"><a href="#__codelineno-60-3">3</a></span>
<span class="normal"><a href="#__codelineno-60-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">addHardAndSoft</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">Hard</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">Soft</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// note that a is typed to be Hard and b is typed as Soft</span>
<a id="__codelineno-60-2" name="__codelineno-60-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">bLow</span><span class="p">,</span><span class="w"> </span><span class="nx">bHigh</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span><span class="w"> </span><span class="c1">// destructuring the tuple into specific pieces</span>
<a id="__codelineno-60-3" name="__codelineno-60-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">tag</span><span class="o">:</span><span class="s1">&#39;soft&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="p">[</span><span class="nx">a</span><span class="p">.</span><span class="nx">value</span><span class="o">+</span><span class="nx">bLow</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">value</span><span class="o">+</span><span class="nx">bHigh</span><span class="p">]};</span>
<a id="__codelineno-60-4" name="__codelineno-60-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this function in place, we can write out the next two branches</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-61-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-61-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-61-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-61-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-61-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-61-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-61-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-61-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-61-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-61-10">10</a></span>
<span class="normal"><a href="#__codelineno-61-11">11</a></span>
<span class="normal"><a href="#__codelineno-61-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">addPoints</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">Points</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">Points</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-61-2" name="__codelineno-61-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="p">){</span>
<a id="__codelineno-61-3" name="__codelineno-61-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">addHardAndHard</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">);</span>
<a id="__codelineno-61-4" name="__codelineno-61-4"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-61-5" name="__codelineno-61-5"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;soft&#39;</span><span class="p">){</span>
<a id="__codelineno-61-6" name="__codelineno-61-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">addHardAndSoft</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">);</span>
<a id="__codelineno-61-7" name="__codelineno-61-7"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-61-8" name="__codelineno-61-8"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;soft&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="p">){</span>
<a id="__codelineno-61-9" name="__codelineno-61-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">addHardAndSoft</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">);</span><span class="w"> </span>
<a id="__codelineno-61-10" name="__codelineno-61-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-61-11" name="__codelineno-61-11"></a><span class="w">  </span><span class="c1">// remaining logic</span>
<a id="__codelineno-61-12" name="__codelineno-61-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="adding-soft-and-soft"><a class="toclink" href="../../2025/05/13/leveraging-tuples-in-typescript/#adding-soft-and-soft">Adding Soft and Soft</a></h4>
<p>The last case we need to handle is when both <code>Points</code> are <code>Soft</code>. If we were to break this down, we have four values (aLow, aHIgh for a, and bLow,bHigh for b) we need to keep track of:</p>
<ol>
<li>aLow + bLow</li>
<li>aHigh + bLow</li>
<li>aLow + bHigh</li>
<li>aHigh + bHigh</li>
</ol>
<p>However, let's play around with this by assuming that <code>Points</code> in question are both Ace. We would get the following:</p>
<ol>
<li>aLow + bLow = 1 + 1 = 2</li>
<li>aHigh + bLow = 11 + 1 = 12</li>
<li>aLow + bHigh = 1 + 11 = 12</li>
<li>aHigh + bHigh = 11 + 11 = 22</li>
</ol>
<p>Right off the bat, we can discard the case 4, (aHigh + bHigh), because there is no situation where the player would want that score as they would bust.</p>
<p>For cases 2 and 3, they yield the same value, so they're essentially the same case.</p>
<p>Which means, that our real cases are</p>
<ol>
<li>aLow + bLow</li>
<li>aHigh + bLow (which is the same as aLow + bHigh)</li>
</ol>
<p>So let's go ahead and write that function</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-62-1">1</a></span>
<span class="normal"><a href="#__codelineno-62-2">2</a></span>
<span class="normal"><a href="#__codelineno-62-3">3</a></span>
<span class="normal"><a href="#__codelineno-62-4">4</a></span>
<span class="normal"><a href="#__codelineno-62-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">addSoftAndSoft</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">Soft</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">Soft</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-2" name="__codelineno-62-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">aLow</span><span class="p">,</span><span class="w"> </span><span class="nx">aHigh</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<a id="__codelineno-62-3" name="__codelineno-62-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">bLow</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span><span class="w"> </span><span class="c1">// note that we&#39;re only grabbing the first element of the tuple here</span>
<a id="__codelineno-62-4" name="__codelineno-62-4"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">tag</span><span class="o">:</span><span class="s1">&#39;soft&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="p">[</span><span class="nx">aLow</span><span class="o">+</span><span class="nx">bLow</span><span class="p">,</span><span class="w"> </span><span class="nx">aHigh</span><span class="o">+</span><span class="nx">bLow</span><span class="p">]};</span>
<a id="__codelineno-62-5" name="__codelineno-62-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Which gives us the following for <code>addPoints</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-63-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-63-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-63-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-63-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-63-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-63-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-63-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-63-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-63-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-63-10">10</a></span>
<span class="normal"><a href="#__codelineno-63-11">11</a></span>
<span class="normal"><a href="#__codelineno-63-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">addPoints</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">Points</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">Points</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-63-2" name="__codelineno-63-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="p">){</span>
<a id="__codelineno-63-3" name="__codelineno-63-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">addHardAndHard</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">);</span>
<a id="__codelineno-63-4" name="__codelineno-63-4"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-63-5" name="__codelineno-63-5"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;soft&#39;</span><span class="p">){</span>
<a id="__codelineno-63-6" name="__codelineno-63-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">addHardAndSoft</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">);</span>
<a id="__codelineno-63-7" name="__codelineno-63-7"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-63-8" name="__codelineno-63-8"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;soft&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="p">){</span>
<a id="__codelineno-63-9" name="__codelineno-63-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">addHardAndSoft</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">);</span>
<a id="__codelineno-63-10" name="__codelineno-63-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-63-11" name="__codelineno-63-11"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">addSoftAndSoft</span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">Soft</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">Soft</span><span class="p">);</span>
<a id="__codelineno-63-12" name="__codelineno-63-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now that we have <code>addPoints</code>, let's revisit <code>handToPoints</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-64-1">1</a></span>
<span class="normal"><a href="#__codelineno-64-2">2</a></span>
<span class="normal"><a href="#__codelineno-64-3">3</a></span>
<span class="normal"><a href="#__codelineno-64-4">4</a></span>
<span class="normal"><a href="#__codelineno-64-5">5</a></span>
<span class="normal"><a href="#__codelineno-64-6">6</a></span>
<span class="normal"><a href="#__codelineno-64-7">7</a></span>
<span class="normal"><a href="#__codelineno-64-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1"></a><span class="c1">// Original Implementation</span>
<a id="__codelineno-64-2" name="__codelineno-64-2"></a><span class="c1">// function handToPoints(cards:Card[]): Points {</span>
<a id="__codelineno-64-3" name="__codelineno-64-3"></a><span class="c1">//   return cards.map((c)=&gt;cardToPoints(c)).reduce(SOME_FUNCTION_HERE, SOME_INITIAL_VALUE_HERE;</span>
<a id="__codelineno-64-4" name="__codelineno-64-4"></a><span class="c1">// }</span>
<a id="__codelineno-64-5" name="__codelineno-64-5"></a>
<a id="__codelineno-64-6" name="__codelineno-64-6"></a><span class="kd">function</span><span class="w"> </span><span class="nx">handToPoints</span><span class="p">(</span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-64-7" name="__codelineno-64-7"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">cards</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">c</span><span class="p">)=&gt;</span><span class="nx">cardToPoints</span><span class="p">(</span><span class="nx">c</span><span class="p">)).</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">addPoints</span><span class="p">,</span><span class="w"> </span><span class="nx">SOME_INITIAL_VALUE_HERE</span><span class="p">);</span>
<a id="__codelineno-64-8" name="__codelineno-64-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now we need to figure out what <em>SOME_INITIAL_VALUE_HERE</em> would be. When working with <code>reduce</code>, a good initial value would be what would we return if we had no cards in the hand? Well, they would have 0 points, right? We can use 0, but we can't just return 0 since our function returns <code>Points</code>, so we need to go from 0 to Points. Easy enough, we can use <code>Hard</code> to accomplish this.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-65-1">1</a></span>
<span class="normal"><a href="#__codelineno-65-2">2</a></span>
<span class="normal"><a href="#__codelineno-65-3">3</a></span>
<span class="normal"><a href="#__codelineno-65-4">4</a></span>
<span class="normal"><a href="#__codelineno-65-5">5</a></span>
<span class="normal"><a href="#__codelineno-65-6">6</a></span>
<span class="normal"><a href="#__codelineno-65-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">handToPoints</span><span class="p">(</span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-65-2" name="__codelineno-65-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">initialValue</span><span class="o">:</span><span class="kt">Points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">tag</span><span class="o">:</span><span class="s1">&#39;hard&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="kt">0</span><span class="p">};</span>
<a id="__codelineno-65-3" name="__codelineno-65-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">cards</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">c</span><span class="p">)=&gt;</span><span class="nx">cardToPoints</span><span class="p">(</span><span class="nx">c</span><span class="p">)).</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">addPoints</span><span class="p">,</span><span class="w"> </span><span class="nx">initialValue</span><span class="p">);</span>
<a id="__codelineno-65-4" name="__codelineno-65-4"></a><span class="p">}</span>
<a id="__codelineno-65-5" name="__codelineno-65-5"></a>
<a id="__codelineno-65-6" name="__codelineno-65-6"></a><span class="kd">const</span><span class="w"> </span><span class="nx">hand</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[{</span><span class="nx">rank</span><span class="o">:</span><span class="s1">&#39;Ace&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">suit</span><span class="o">:</span><span class="s1">&#39;Hearts&#39;</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nx">rank</span><span class="o">:</span><span class="kt">7</span><span class="p">,</span><span class="w"> </span><span class="nx">suit</span><span class="o">:</span><span class="s1">&#39;Clubs&#39;</span><span class="p">}]</span>
<a id="__codelineno-65-7" name="__codelineno-65-7"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">handToPoints</span><span class="p">(</span><span class="nx">hand</span><span class="p">));</span><span class="w"> </span><span class="c1">// {tag:&#39;soft&#39;, value:[8, 18]};</span>
</code></pre></div></td></tr></table></div>
<p>For those who know a bit of <a href="https://en.wikipedia.org/wiki/Category_theory">category theory</a>, you might notice that <code>addPoints</code> is the operation and <code>Hard 0</code> is the identity for a <a href="../../2024/08/27/functional-design-patterns---reduce-and-monoids/">monoid</a> over <code>Points</code>.</p>
<h4 id="one-last-improvement"><a class="toclink" href="../../2025/05/13/leveraging-tuples-in-typescript/#one-last-improvement">One Last Improvement</a></h4>
<p>So this code works and everything is fine, however, we can make one more improvement to <code>addPoints</code>. Let's take a look at what happens when we try to get the <code>Points</code> for the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-66-1">1</a></span>
<span class="normal"><a href="#__codelineno-66-2">2</a></span>
<span class="normal"><a href="#__codelineno-66-3">3</a></span>
<span class="normal"><a href="#__codelineno-66-4">4</a></span>
<span class="normal"><a href="#__codelineno-66-5">5</a></span>
<span class="normal"><a href="#__codelineno-66-6">6</a></span>
<span class="normal"><a href="#__codelineno-66-7">7</a></span>
<span class="normal"><a href="#__codelineno-66-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">hand</span><span class="o">:</span><span class="w"> </span><span class="kt">Card</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-66-2" name="__codelineno-66-2"></a><span class="w">  </span><span class="p">{</span><span class="nx">rank</span><span class="o">:</span><span class="s1">&#39;Ace&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">suit</span><span class="o">:</span><span class="s1">&#39;Diamonds&#39;</span><span class="p">},</span>
<a id="__codelineno-66-3" name="__codelineno-66-3"></a><span class="w">  </span><span class="p">{</span><span class="nx">rank</span><span class="o">:</span><span class="kt">8</span><span class="p">,</span><span class="w"> </span><span class="nx">suit</span><span class="o">:</span><span class="s1">&#39;Hearts&#39;</span><span class="p">},</span>
<a id="__codelineno-66-4" name="__codelineno-66-4"></a><span class="w">  </span><span class="p">{</span><span class="nx">rank</span><span class="o">:</span><span class="kt">4</span><span class="p">,</span><span class="w"> </span><span class="nx">suit</span><span class="o">:</span><span class="s1">&#39;Clubs&#39;</span><span class="p">},</span>
<a id="__codelineno-66-5" name="__codelineno-66-5"></a><span class="w">  </span><span class="p">{</span><span class="nx">rank</span><span class="o">:</span><span class="kt">8</span><span class="p">,</span><span class="w"> </span><span class="nx">suit</span><span class="o">:</span><span class="s1">&#39;Spades&#39;</span><span class="p">}</span>
<a id="__codelineno-66-6" name="__codelineno-66-6"></a><span class="p">]</span>
<a id="__codelineno-66-7" name="__codelineno-66-7"></a>
<a id="__codelineno-66-8" name="__codelineno-66-8"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">handToPoints</span><span class="p">(</span><span class="nx">hand</span><span class="p">));</span><span class="w"> </span><span class="c1">// {tag:&#39;soft&#39;, value:[21, 31]};</span>
</code></pre></div></td></tr></table></div>
<p>Huh, we got the right value, but we know that for <code>Soft</code>, it doesn't make sense to allow the player a choice between 21 and 31 because 31 is always invalid. Even though the answer isn't wrong <em>per se</em>, it does allow the user to do the wrong thing later on, which isn't the greatest.</p>
<p>Let's add one more function, <code>normalize</code> that will check to see if the <code>Points</code> is <code>Soft</code> with a value over 21. If so, we convert to a <code>Hard</code> and throw out the value over 21. Otherwise we return the value (since it's possible for someone to get a <code>Hard</code> score over 21).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-67-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-67-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-67-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-67-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-67-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-67-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-67-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-67-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-67-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-67-10">10</a></span>
<span class="normal"><a href="#__codelineno-67-11">11</a></span>
<span class="normal"><a href="#__codelineno-67-12">12</a></span>
<span class="normal"><a href="#__codelineno-67-13">13</a></span>
<span class="normal"><a href="#__codelineno-67-14">14</a></span>
<span class="normal"><a href="#__codelineno-67-15">15</a></span>
<span class="normal"><a href="#__codelineno-67-16">16</a></span>
<span class="normal"><a href="#__codelineno-67-17">17</a></span>
<span class="normal"><a href="#__codelineno-67-18">18</a></span>
<span class="normal"><a href="#__codelineno-67-19">19</a></span>
<span class="normal"><a href="#__codelineno-67-20">20</a></span>
<span class="normal"><a href="#__codelineno-67-21">21</a></span>
<span class="normal"><a href="#__codelineno-67-22">22</a></span>
<span class="normal"><a href="#__codelineno-67-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">normalize</span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="kt">Points</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-67-2" name="__codelineno-67-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;soft&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">value</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">21</span><span class="p">){</span>
<a id="__codelineno-67-3" name="__codelineno-67-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">tag</span><span class="o">:</span><span class="s1">&#39;hard&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="kt">p.value</span><span class="p">[</span><span class="mf">0</span><span class="p">]}</span>
<a id="__codelineno-67-4" name="__codelineno-67-4"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-67-5" name="__codelineno-67-5"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="p">;</span>
<a id="__codelineno-67-6" name="__codelineno-67-6"></a><span class="p">}</span>
<a id="__codelineno-67-7" name="__codelineno-67-7"></a>
<a id="__codelineno-67-8" name="__codelineno-67-8"></a><span class="c1">// updated addPoints with normalize being used</span>
<a id="__codelineno-67-9" name="__codelineno-67-9"></a><span class="kd">function</span><span class="w"> </span><span class="nx">addPoints</span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">Points</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">Points</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Points</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-67-10" name="__codelineno-67-10"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="p">){</span>
<a id="__codelineno-67-11" name="__codelineno-67-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">normalize</span><span class="p">(</span><span class="nx">addHardAndHard</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">));</span>
<a id="__codelineno-67-12" name="__codelineno-67-12"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-67-13" name="__codelineno-67-13"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;soft&#39;</span><span class="p">){</span>
<a id="__codelineno-67-14" name="__codelineno-67-14"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">normalize</span><span class="p">(</span><span class="nx">addHardAndSoft</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">));</span>
<a id="__codelineno-67-15" name="__codelineno-67-15"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-67-16" name="__codelineno-67-16"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;soft&#39;</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">tag</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;hard&#39;</span><span class="p">){</span>
<a id="__codelineno-67-17" name="__codelineno-67-17"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">normalize</span><span class="p">(</span><span class="nx">addHardAndSoft</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">));</span>
<a id="__codelineno-67-18" name="__codelineno-67-18"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-67-19" name="__codelineno-67-19"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">normalize</span><span class="p">(</span><span class="nx">addSoftAndSoft</span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">Soft</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">Soft</span><span class="p">));</span>
<a id="__codelineno-67-20" name="__codelineno-67-20"></a><span class="p">}</span>
<a id="__codelineno-67-21" name="__codelineno-67-21"></a>
<a id="__codelineno-67-22" name="__codelineno-67-22"></a><span class="c1">// Note: There&#39;s some minor refactoring that we could do here (for example, creating an internal function for handling the add logic and updating `addPoints` to use that function with normalize),</span>
<a id="__codelineno-67-23" name="__codelineno-67-23"></a><span class="c1">// but will leave that as an exercise to the reader :)</span>
</code></pre></div></td></tr></table></div>
<h3 id="wrapping-up"><a class="toclink" href="../../2025/05/13/leveraging-tuples-in-typescript/#wrapping-up">Wrapping Up</a></h3>
<p>In this post, we took a look at using tuples in TypeScript by tackling a portion of the game of Blackjack. Whether it's through using it in types (like we did for <code>Soft</code>) or for destructuring values (like we did in the various <code>addX</code> functions), they can be a handy way of grouping data together for short-term operations.</p>
<h3 id="interested-in-knowing-more"><a class="toclink" href="../../2025/05/13/leveraging-tuples-in-typescript/#interested-in-knowing-more">Interested in knowing more?</a></h3>
<p>If you've enjoyed the above, then you might be interested in my new course (launching Summer 2025) where we build out the game of Blackjack using these concepts in TypeScript. <a href="mailto:cameron@thesoftwarementor.com?subject=Interested%20In%20Udemy%20Course&amp;body=I%27m%20interested%20in%20your%20upcoming%20course%20on%20Blackjack%2C%20let%20me%20know%20when%20it%27s%20ready%21">Click here</a> if you're interested in getting an update for when the course goes live!</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-03-27 00:00:00+00:00">Mar 27, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Today I Learned</a>, 
              <a href="../typescript/" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="tips-and-tricks-with-typescript"><a class="toclink" href="../../2025/03/27/tips-and-tricks-with-typescript/">Tips and Tricks with TypeScript</a></h2>
<p>One of my most recent projects has been tackling how to model the card game, <a href="https://boardgamegeek.com/boardgame/129622/love-letter">Love Letter</a>. For those who've seen me present my <a href="../../../presentations/#how-functional-programming-made-me-a-better-developer">How Functional Programming Made Me a Better Developer</a> talk, you might recall that this was my second project to tackle in F# and that even though I was able to get some of it to work, there were some inconsistency in the rules that I wasn't able to reason about.</p>
<p>While implementing in TypeScript, I came across some cool tricks and thought I'd share some of them here, enjoy!</p>
<h3 id="swapping-two-variables"><a class="toclink" href="../../2025/03/27/tips-and-tricks-with-typescript/#swapping-two-variables">Swapping two variables</a></h3>
<p>A common enough task in programming, we need to swap two values around. When I was learning C++, I had a memory trick to remember the ordering (think like a zigzag pattern)</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span>
<span class="normal"><a href="#__codelineno-6-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="c1">// Note how a starts on the right, then goes left</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="kt">int</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>You can do the same thing in TypeScript, however, you can remove the need for the <code>temp</code> variable by using array destructuring. The idea is that we create an array which contains the two variables to swap. We then assign this array to destructured variables (see below)</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">200</span><span class="p">;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="c1">// using array destructuring</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<h3 id="drawing-a-card"><a class="toclink" href="../../2025/03/27/tips-and-tricks-with-typescript/#drawing-a-card">Drawing a Card</a></h3>
<p>One of the common interactions that happens in the game is that we need to model drawing a card from a deck. As such, we will have a function that looks like the following</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span>
<span class="normal"><a href="#__codelineno-8-7">7</a></span>
<span class="normal"><a href="#__codelineno-8-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Card</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Guard&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Priest&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Baron&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">....</span><span class="w"> </span><span class="c1">// other options omitted for brevity</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Deck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Card</span><span class="p">[]</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="kd">function</span><span class="w"> </span><span class="nx">draw</span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="kt">Deck</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="o">:</span><span class="kt">Card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">Deck</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">card</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="p">};</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This absolutely works, however, we can use the rest operator (...) with array destructuring to simplify this code. </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span>
<span class="normal"><a href="#__codelineno-9-6">6</a></span>
<span class="normal"><a href="#__codelineno-9-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Card</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Guard&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Priest&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Baron&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">....</span><span class="w"> </span><span class="c1">// other options omitted for brevity</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Deck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Card</span><span class="p">[]</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="kd">function</span><span class="w"> </span><span class="nx">draw</span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="kt">Deck</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="o">:</span><span class="kt">Card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">Deck</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">restOfDeck</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">;</span><span class="w"> </span><span class="c1">// note the rest operator before restOfDeck</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="p">};</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This code should be read as <em>assign the first element of the array to a const called <code>card</code> and the rest of the array to a const called <code>restOfDeck</code></em>.</p>
<h3 id="drawing-multiple-cards-with-object-destructuring"><a class="toclink" href="../../2025/03/27/tips-and-tricks-with-typescript/#drawing-multiple-cards-with-object-destructuring">Drawing Multiple Cards with Object Destructuring</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">draw</span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="kt">Deck</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="o">:</span><span class="kt">Card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">Deck</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">restOfDeck</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">;</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="p">};</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="p">}</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="kd">function</span><span class="w"> </span><span class="nx">drawMultipleCads</span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="kt">Deck</span><span class="p">,</span><span class="w"> </span><span class="nx">count</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[],</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">Deck</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">currentDeck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">;</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">count</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">draw</span><span class="p">(</span><span class="nx">currentDeck</span><span class="p">)</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">    </span><span class="nx">cards</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">card</span><span class="p">)</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="w">    </span><span class="nx">currentDeck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">restOfDeck</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">cards</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">currentDeck</span><span class="p">};</span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This works, however, we don't actually care about <code>result</code>, but the specific values <code>card</code> and <code>restOfDeck</code>. Instead of referencing them via property drilling, we can use object destructuring to get their values.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">drawMultipleCads</span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="kt">Deck</span><span class="p">,</span><span class="w"> </span><span class="nx">count</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[],</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">Deck</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">currentDeck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">count</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">draw</span><span class="p">(</span><span class="nx">currentDeck</span><span class="p">)</span><span class="w"> </span><span class="c1">// note using curly braces</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">    </span><span class="nx">cards</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">card</span><span class="p">)</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">    </span><span class="nx">currentDeck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">restOfDeck</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">cards</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">currentDeck</span><span class="p">};</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-03-19 00:00:00+00:00">Mar 19, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-triggering-powerautomate-through-http-request"><a class="toclink" href="../../2025/03/19/today-i-learned-triggering-powerautomate-through-http-request/">Today I Learned: Triggering PowerAutomate Through Http Request</a></h2>
<p>If you're working within the Microsoft ecosystem, you might have ran across a tool called <a href="https://www.microsoft.com/en-us/power-platform/products/power-automate">PowerAutomate</a>, this is Microsoft's low-code solution for building out simple automation (similar to tools like If This Then Than (<a href="https://ifttt.com/">IFTTT</a>)).</p>
<p>A common use I've used with PowerAutomate is integrating with Teams to kick off a workflow when someone posts a message. For example, you could have a trigger listening for when someone posts in your support channel to auto-respond back with a canned message and tagging whoever your support person or support team is.</p>
<p>The problem I've ran into with PowerAutomate is that it has a steep learning curve and isn't very intuitive for engineers to pick up. As such, we typically use PowerAutomate for simpler flows (or if we need to integrate with another Microsoft product like Teams or Planner).</p>
<p>Recently, I was tackling a problem where we had an application that needed to post a message into a Teams channel. Back in the day, I would have use a <a href="https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=newteams%2Cdotnet">webhook</a> and published the message that way, however, Microsoft removed the ability to use Webhooks into Teams in late 2024. The main solution going forward is that you would have had to build a Teams application and install it for your tenant/channel. This can be a bit annoying if all you have is a simple workflow that you need to stand-up.</p>
<p>This got me thinking, I know I can use PowerAutomate to send a message to Teams, but can I trigger the flow programmatically (at this point, I was familiar with timers and when something happened).</p>
<p>Doing some digging, I found that PowerAutomate can trigger a workflow off of a <em>HTTP Request</em>. </p>
<p>Jackpot! </p>
<p>Even better, we can give the PowerAutomate flow a specific payload to expect as part of the request body, even better!</p>
<p>Combining these concepts, I can create a flow like the following:</p>
<p>First, let's set up a trigger that takes in a payload. In this case, the caller will give us the message content and a bit more info on which team and channel to post this message into.</p>
<p><img alt="Setting up the trigger" src="https://softwarementorblog.blob.core.windows.net/images/powerautomate-requrest-trigger/image-1.png" /></p>
<p>After setting up the trigger, we can then add a step for posting a message in Teams. Instead of using the pre-populated options that we get from our connection, we can use the values from the trigger instead.</p>
<p><img alt="Setting up the message step" src="https://softwarementorblog.blob.core.windows.net/images/powerautomate-requrest-trigger/image-2.png" /></p>
<p>After saving, our entire flow looks like the following</p>
<p><img alt="Full flow" src="https://softwarementorblog.blob.core.windows.net/images/powerautomate-requrest-trigger/image-3.png" /></p>
<p>From here, we can then use the URL that was created as part of the trigger and have our application invoke the flow.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-03-12 00:00:00+00:00">Mar 12, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-configuring-git-to-use-a-specific-key-for-a-specific-repo"><a class="toclink" href="../../2025/03/12/today-i-learned-configuring-git-to-use-a-specific-key-for-a-specific-repo/">Today I Learned: Configuring Git to Use A Specific Key for a Specific Repo</a></h2>
<p>When working with a Git repository, there are two ways to authenticate yourself, either by using your name/password or by leveraging an SSH key, proving who you are. I like the SSH key the best since I can create the key for my machine, associate it to my profile, and then I'm good to go.</p>
<p>However, the problem becomes when I have to juggle different SSH keys. For example, I may have two different accounts (personal and a work one) and these accounts can't use the same SSH key (in fact, if you try to add the same SSH key to two different accounts, you'll get an error message).</p>
<p>In these cases, I'd like to be able to specify which SSH key to use for a given repository.</p>
<p>Doing some digging, I found the following configures the sshCommand that git uses</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>git<span class="w"> </span>config<span class="w"> </span>core.sshCommand<span class="w"> </span><span class="s1">&#39;ssh -i C:\\users\\&lt;name&gt;\\.ssh\\&lt;name_of_private_key&gt;&#39;</span>
</code></pre></div></td></tr></table></div>
<p>Because we're not specifying a scope (like <code>--global</code>), this will only apply to the single repository.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-03-05 00:00:00+00:00">Mar 5, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../net/" class="md-meta__link">.NET</a>, 
              <a href="./" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-configuring-httpclient-via-service-registration"><a class="toclink" href="../../2025/03/05/today-i-learned-configuring-httpclient-via-service-registration/">Today I Learned: Configuring HttpClient via Service Registration</a></h2>
<p>When integrating with an external service via an API call, it's common to create a class the encapsulates dealing with the API. For example, if I was interacting with the GitHub API, I might create a C# class that wraps the <code>HttpClient</code>, like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="k">public</span><span class="w"> </span><span class="k">interface</span><span class="w"> </span><span class="n">IGitHubService</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">();</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="p">}</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IGitHubService</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="p">{</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">        </span><span class="c1">// code implementation</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="repetition-of-values"><a class="toclink" href="../../2025/03/05/today-i-learned-configuring-httpclient-via-service-registration/#repetition-of-values">Repetition of Values</a></h3>
<p>This is a great start, but over time, your class might end up like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span>
<span class="normal"><a href="#__codelineno-9-22">22</a></span>
<span class="normal"><a href="#__codelineno-9-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="p">{</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;https://api.github.com/user&quot;</span><span class="p">)</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Login</span><span class="p">;</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetAllUsers</span><span class="p">()</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;https://api.github.com/users&quot;</span><span class="p">);</span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Login</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetTeamNamesForOrg</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">org</span><span class="p">)</span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;https://api.github.com/orgs/{org}/teams&quot;</span><span class="p">);</span>
<a id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-9-23" name="__codelineno-9-23"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Right off the bat, it seems like we're repeating the URL for each method call. To remove the repetition, we could extract to a constant.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span>
<span class="normal"><a href="#__codelineno-10-23">23</a></span>
<span class="normal"><a href="#__codelineno-10-24">24</a></span>
<span class="normal"><a href="#__codelineno-10-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">    </span><span class="c1">// Setting the base URL for later usage</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">_baseUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.github.com&quot;</span><span class="p">;</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;{_baseUrl}/user&quot;</span><span class="p">)</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Login</span><span class="p">;</span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetAllUsers</span><span class="p">()</span>
<a id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;{_baseUrl}/users&quot;</span><span class="p">);</span>
<a id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Login</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-20" name="__codelineno-10-20"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetTeamNamesForOrg</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">org</span><span class="p">)</span>
<a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-10-22" name="__codelineno-10-22"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;{_baseUrl}/orgs/{org}/teams&quot;</span><span class="p">);</span>
<a id="__codelineno-10-23" name="__codelineno-10-23"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-10-24" name="__codelineno-10-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-10-25" name="__codelineno-10-25"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This helps remove the repetition, however, we're now keeping track of a new field, <code>_baseUrl</code>. Instead of using this, we could leverage the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.baseaddress?view=net-9.0"><code>BaseAddress</code></a> property and set that in the service's constructor.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span>
<span class="normal"><a href="#__codelineno-11-15">15</a></span>
<span class="normal"><a href="#__codelineno-11-16">16</a></span>
<span class="normal"><a href="#__codelineno-11-17">17</a></span>
<span class="normal"><a href="#__codelineno-11-18">18</a></span>
<span class="normal"><a href="#__codelineno-11-19">19</a></span>
<span class="normal"><a href="#__codelineno-11-20">20</a></span>
<span class="normal"><a href="#__codelineno-11-21">21</a></span>
<span class="normal"><a href="#__codelineno-11-22">22</a></span>
<span class="normal"><a href="#__codelineno-11-23">23</a></span>
<span class="normal"><a href="#__codelineno-11-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="p">{</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">        </span><span class="n">_client</span><span class="p">.</span><span class="n">BaseAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.github.com&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Setting the base address for the other requests.</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/user&quot;</span><span class="p">)</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Login</span><span class="p">;</span>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetAllUsers</span><span class="p">()</span>
<a id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-11-16" name="__codelineno-11-16"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">);</span>
<a id="__codelineno-11-17" name="__codelineno-11-17"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Login</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-11-18" name="__codelineno-11-18"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-19" name="__codelineno-11-19"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetTeamNamesForOrg</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">org</span><span class="p">)</span>
<a id="__codelineno-11-20" name="__codelineno-11-20"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-11-21" name="__codelineno-11-21"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;/orgs/{org}/teams&quot;</span><span class="p">);</span>
<a id="__codelineno-11-22" name="__codelineno-11-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-11-23" name="__codelineno-11-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-11-24" name="__codelineno-11-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>I like this refactor because we remove the field and we have our configuration in one spot. That being said, interacting with an API typically requires more information than just the URL. For example, setting up the API token or that we're always expecting JSON for the response. We could add the header setup in each method, but that seems quite duplicative.</p>
<h3 id="leveraging-default-request-headers"><a class="toclink" href="../../2025/03/05/today-i-learned-configuring-httpclient-via-service-registration/#leveraging-default-request-headers">Leveraging Default Request Headers</a></h3>
<p>We can centralize our request headers by leveraging the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.defaultrequestheaders?view=net-9.0"><code>DefaultRequestHeaders</code> property</a> and updating our constructor.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span>
<span class="normal"><a href="#__codelineno-12-18">18</a></span>
<span class="normal"><a href="#__codelineno-12-19">19</a></span>
<span class="normal"><a href="#__codelineno-12-20">20</a></span>
<span class="normal"><a href="#__codelineno-12-21">21</a></span>
<span class="normal"><a href="#__codelineno-12-22">22</a></span>
<span class="normal"><a href="#__codelineno-12-23">23</a></span>
<span class="normal"><a href="#__codelineno-12-24">24</a></span>
<span class="normal"><a href="#__codelineno-12-25">25</a></span>
<span class="normal"><a href="#__codelineno-12-26">26</a></span>
<span class="normal"><a href="#__codelineno-12-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="p">{</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">        </span><span class="n">_client</span><span class="p">.</span><span class="n">BaseAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.github.com&quot;</span><span class="p">;</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">        </span><span class="n">_client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Accept&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/vnd.github+json&quot;</span><span class="p">);</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">        </span><span class="n">_client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Authentication&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">$&quot;Bearer {yourTokenGoesHere}&quot;</span><span class="p">);</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">        </span><span class="n">_client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;X-GitHub-Api-Version&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2022-11-28&quot;</span><span class="p">);</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/user&quot;</span><span class="p">)</span>
<a id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Login</span><span class="p">;</span>
<a id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetAllUsers</span><span class="p">()</span>
<a id="__codelineno-12-18" name="__codelineno-12-18"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-12-19" name="__codelineno-12-19"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">);</span>
<a id="__codelineno-12-20" name="__codelineno-12-20"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Login</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-12-21" name="__codelineno-12-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-22" name="__codelineno-12-22"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetTeamNamesForOrg</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">org</span><span class="p">)</span>
<a id="__codelineno-12-23" name="__codelineno-12-23"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-12-24" name="__codelineno-12-24"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;/orgs/{org}/teams&quot;</span><span class="p">);</span>
<a id="__codelineno-12-25" name="__codelineno-12-25"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-12-26" name="__codelineno-12-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-27" name="__codelineno-12-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>I like this refactor because all of our configuration of the service is right next to how we're using it, so easy to troubleshoot. At this point, we would need to register our service in the Inversion of Control (IoC) container and then everything would work.</p>
<p>Generally, you'll find this in <code>Startup.cs</code> and would look like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="n">services</span><span class="p">.</span><span class="n">AddTransient</span><span class="o">&lt;</span><span class="n">IGitHubService</span><span class="p">,</span><span class="w"> </span><span class="n">GitHubService</span><span class="o">&gt;</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<h3 id="an-alternative-approach-for-service-registration"><a class="toclink" href="../../2025/03/05/today-i-learned-configuring-httpclient-via-service-registration/#an-alternative-approach-for-service-registration">An Alternative Approach for Service Registration</a></h3>
<p>However, I learned that when you're building a service that's wrapping an <code>HttpClient</code>, there's another service registration method you could use, <code>AddHttpClient</code> with the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/http-requests?view=aspnetcore-9.0#typed-clients"><em>Typed Client</em> approach</a>.</p>
<p>Let's take a look at what this would look like.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span>
<span class="normal"><a href="#__codelineno-14-6">6</a></span>
<span class="normal"><a href="#__codelineno-14-7">7</a></span>
<span class="normal"><a href="#__codelineno-14-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="c1">// In Startup.cs</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="n">services</span><span class="p">.</span><span class="n">AddHttpClient</span><span class="o">&lt;</span><span class="n">IGitHubService</span><span class="p">,</span><span class="w"> </span><span class="n">GitHubService</span><span class="o">&gt;</span><span class="p">(</span><span class="n">client</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">BaseAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Uri</span><span class="p">(</span><span class="s">&quot;https://api.github.com&quot;</span><span class="p">);</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Accept&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/vnd.github+json&quot;</span><span class="p">);</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">$&quot;Bearer {apiTokenGoesHere}&quot;</span><span class="p">);</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;X-GitHub-Api-Version&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2022-11-28&quot;</span><span class="p">);</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="p">});</span>
</code></pre></div></td></tr></table></div>
<p>We've essentially moved our configuration logic from the <code>GitHubService</code> to the IoC container, simplifying the service.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span>
<span class="normal"><a href="#__codelineno-15-16">16</a></span>
<span class="normal"><a href="#__codelineno-15-17">17</a></span>
<span class="normal"><a href="#__codelineno-15-18">18</a></span>
<span class="normal"><a href="#__codelineno-15-19">19</a></span>
<span class="normal"><a href="#__codelineno-15-20">20</a></span>
<span class="normal"><a href="#__codelineno-15-21">21</a></span>
<span class="normal"><a href="#__codelineno-15-22">22</a></span>
<span class="normal"><a href="#__codelineno-15-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IGitHubService</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="p">{</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/user&quot;</span><span class="p">)</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Login</span><span class="p">;</span>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetAllUsers</span><span class="p">()</span>
<a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">);</span>
<a id="__codelineno-15-16" name="__codelineno-15-16"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Login</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-15-17" name="__codelineno-15-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-18" name="__codelineno-15-18"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetTeamNamesForOrg</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">org</span><span class="p">)</span>
<a id="__codelineno-15-19" name="__codelineno-15-19"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-15-20" name="__codelineno-15-20"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;/orgs/{org}/teams&quot;</span><span class="p">);</span>
<a id="__codelineno-15-21" name="__codelineno-15-21"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-15-22" name="__codelineno-15-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-23" name="__codelineno-15-23"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="my-thoughts"><a class="toclink" href="../../2025/03/05/today-i-learned-configuring-httpclient-via-service-registration/#my-thoughts">My Thoughts</a></h3>
<p>Even though this is a new approach, I'm kind of torn if I like it or not. On one hand, I appreciate that we can centralize the logic in one spot so that everything for the <code>GitHubService</code> is one spot. However, if we needed other dependencies to configure the service (for example, we needed to get the bearer token from <code>AppSettings</code>), I could see this getting a bit more complicated, though contained.</p>
<p>On the other hand, we could shift all that config to the IoC and let it deal with that. It definitely streamlines the <code>GitHubService</code> so we can focus on the endpoints and their logic, however, now I've got to look for two spots to see where the client is being configured.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-12-27 00:00:00+00:00">Dec 27, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="year-in-review-2024"><a class="toclink" href="../../2024/12/27/year-in-review-2024/">Year in Review: 2024</a></h2>
<p>As the year comes to a close, I like to take this time to reflect on the past year: what got done, how do I feel like things are progressing, and are there any changes that I should be working on for the next year.</p>
<p>With that in mind, I generally break my goals into three sections: what progress did I make for my career? what progress did I make for the community, and finally, what progress did I make for myself?</p>
<h3 id="professional"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#professional">Professional</a></h3>
<p>This year, I focused more on learning about consulting and what a successful engagement looks like. As such, this year was a good year as I've had experience working with both larger companies (Fortune 500) and smaller companies. All in all, I find consulting to be a good application of my skills and is a natural inclination for my process improvement skills.</p>
<ul>
<li>Completed engagement with a Fortune 500 client to teach TypeScript and AWS (members were coming from COBOL)</li>
<li>Mentored two interns and helped get them hired full-time</li>
<li>Designed a system for custom form creation for an education company (which led to follow-up development work)</li>
<li>Started coaching engagement for an AgTech company focusing on delivery and process improvements</li>
<li>Designed a system for database health checks for a Database Administrator as a Service company</li>
</ul>
<p>To help Lean TECHniques with their Microsoft partnership, I spent time over the summer working on obtaining various Microsoft certifications (I ran out of time before getting the <em>Microsoft Certified: Azure Solutions Architect Expert</em> certificate, but that's on my docket for 2025)</p>
<ul>
<li>Earned the <a href="https://learn.microsoft.com/en-us/users/cameronpresley-4042/credentials/2cb0f6ef15460e5c">Microsoft Certified: Azure Administrator Associate</a> certification</li>
<li>Earned the <a href="https://learn.microsoft.com/en-us/users/cameronpresley-4042/credentials/ec65dd88cb49f4a2">Microsoft Certified: Azure Developer Associate</a> certification</li>
<li>Earned the <a href="https://learn.microsoft.com/en-us/users/
cameronpresley-4042/credentials/aabf4a1a96bb75e6">Microsoft Certified: DevOps Engineer Expert</a> certification</li>
</ul>
<p>Last, but not least, I spent some time learning some (new to me tech) like GraphQL and basic Java.</p>
<ul>
<li>Earned the <a href="https://www.apollographql.com/tutorials/certifications/a77be40c-1085-45c8-895f-464d2dcf4cd6">Graph Developer - Associate certification</a> from Apollo GraphQL</li>
<li>Was included as an acknowledgement in <em><a href="https://pragprog.com/titles/utj3/pragmatic-unit-testing-in-java-with-junit-third-edition/">Pragmatic Unit Testing in Java with JUnit: 3rd Edition by Jeff Langr</a></em> for my feedback and review before publishing.</li>
</ul>
<h3 id="community"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#community">Community</a></h3>
<p>On the community side, 2024 was a year of firsts. For example, I hosted and organized <a href="https://www.eventbookings.com/b/event/queen-city-code-retreat">Queen City Code Camp</a>, a conference where attendees learned the fundamentals of Test Driven Development (TDD) by solving the Mars Rover kata. This was the first time since 2019 that I organized a conference (and absolutely the first time since I moved to North Carolina), so lots of good lessons learned here.</p>
<p>In another first, I created my first training video, <a href="https://www.udemy.com/course/navigating-mars-using-ts-and-fp/?referralCode=134CA0E5EF78A43698B3">Navigating Mars Using Functional Programming in TypeScript</a>, a Udemy course where I walk you through how to solve the Mars Rover kata using functional programming concepts.</p>
<p>Lastly, I created two new talks this year: How to Make Your Own Automation Framework where I show you how to build your own framework using Deno, TypeScript, and GitHub Action; and How to Build More Resilient Teams where I show you how to use post-mortem and experiments to build high performing teams. In general, I shoot to create one new talk a year and I over-delivered on that goal this year (with 2025 already looking to be in good shape).</p>
<p>Outside of new talks, I authored 23 different blogs posts with my most common topics being Leadership and Functional Programming and presented at 11 different events.</p>
<h3 id="personal"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#personal">Personal</a></h3>
<ul>
<li>Read 32 books in various genres (biographical, investing, leadership, history, consulting, process, science fiction, and general fiction)</li>
<li>Learned the basics of knitting, made scarves and baby blankets using both seed and garter stitches</li>
<li>Learned the basics of working with chisels and planes (including sharpening) for woodworking</li>
<li>
<p>Built a catio for our new cat, Trix.
<img alt="Catio for Tix" src="https://softwarementorblog.blob.core.windows.net/images/trix-catio.jpg" /></p>
</li>
<li>
<p>Learned how to make two different kinds of coffee drinks (Americano and Latte)</p>
</li>
<li>Built my first computer from components (major shout-out to <a href="https://bsky.app/profile/azwyrd.bsky.social">Isaac</a> for helping me figure out the components)</li>
<li>Picked up over 30 bags of trash around the neighborhood</li>
<li>Volunteered with <a href="https://www.cubpack58.org/">Cub Scout Pack 58</a></li>
</ul>
<h3 id="what-does-2025-have-in-store"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#what-does-2025-have-in-store">What Does 2025 Have in Store?</a></h3>
<h4 id="obtain-three-client-engagements"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#obtain-three-client-engagements">Obtain Three Client Engagements</a></h4>
<p>I've spent plenty of time at step 1 (collect information), but it's now time to start putting that information into use (for better or for worse) and get my own clients. If I'm going to be successful, then I need to apply what I learn, make mistakes, mess up, learn, and iterate. As such, I'm going to expand my connections here in Charlotte, honing in on my ideal client. From there, I can expand and see what makes sense.</p>
<h4 id="author-two-training-courses"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#author-two-training-courses">Author Two Training Courses</a></h4>
<p>I learned a lot about authoring a training course by going through the Udemy process. Though it has a lower barrier to entry to get started (and they handle a good amount of the marketing), the fact that the pricing can fluctuate so much is a bit bonkers. For example, I have the course listed at $99.99, with a coupon that can bring the price down to $49.99. However, Udemy can then cut the price down to $9.99. On one hand, it increases sales, however, the amount of money made (both for Udemy and myself) is not enough to to cover the cost.</p>
<p>As such, I'll be spending time finding a new platform for 2025 where I can host my training such that the pricing is a bit more in my control. (Udemy, if you could allow course authors to set a floor on their pricing, I'd be so much happier with the service!)</p>
<h4 id="build-a-hope-chest"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#build-a-hope-chest">Build a Hope Chest</a></h4>
<p>I come from a long line of makers. My dad worked in construction and manufacturing, various uncles worked as welders, fabricators, and construction, and my grandfather was a carpenter (and moonshiner, but that's a tale for a different day). I've always been fascinated about how things work and how to make them better, hence why I started my journey into woodworking during the pandemic (idle time and I had the space for it).</p>
<p>I spend my work hours building things that either won't be seen by the general public or I can't talk about the project at all, so it can be difficult to explain what I do. Plus, you can't really touch software or applications, you can use them.</p>
<p>Enter woodworking. I can build something with my own two hands and give it to a friend, keep it for myself, or as a lesson for me going forward. I've gotten some experience building small boxes using power tools last year, but I haven't built anything of a certain size and definitely not with hand tools.</p>
<p>My last major goal for 2025 is to build a <a href="https://en.wikipedia.org/wiki/Hope_chest">hope chest</a> as this is a solid piece of fine furniture and it can be something I can pass down to my children when it comes time.</p>
<p>Building this is would be tougher than anything I've built up to this point, however, it should be in the realm of my knowledge. The challenge with this build will be using strictly hand tools to build it out. It'll take me longer and it probably won't be as nice as if I had used machines, but at the end of the day, I can say that I made it.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-08-19 00:00:00+00:00">Aug 19, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Today I Learned</a>, 
              <a href="../typescript/" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-leveraging-mock-names-with-jest"><a class="toclink" href="../../2024/08/19/today-i-learned---leveraging-mock-names-with-jest/">Today I Learned - Leveraging Mock Names with Jest</a></h2>
<p>I was working through the <a href="https://blog.thesoftwarementor.com/articles/2020/05/20/learning-through-example--mars-rover-kata/">Mars Rover kata</a> the other day and found myself in a predicament when trying to test one of the functions, the <code>convertCommandToAction</code> function.</p>
<p>The idea behind the function is that based on the Command you pass in, it'll return the right function to call. The code looks something like this.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span>
<span class="normal"><a href="#__codelineno-4-28">28</a></span>
<span class="normal"><a href="#__codelineno-4-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;MoveForward&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;MoveBackward&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;TurnLeft&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;TurnRight&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;Quit&#39;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="nx">Rover</span><span class="p">;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">moveForward</span><span class="o">:</span><span class="kt">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="nx">Rover</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">  </span><span class="c1">// business rules</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="p">}</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="kd">const</span><span class="w"> </span><span class="nx">moveBackward</span><span class="o">:</span><span class="kt">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Rover</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">  </span><span class="c1">// business rules</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="p">}</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="kd">const</span><span class="w"> </span><span class="nx">turnLeft</span><span class="o">:</span><span class="kt">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="nx">Rover</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">  </span><span class="c1">// business rules</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="p">}</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="kd">const</span><span class="w"> </span><span class="nx">turnRight</span><span class="o">:</span><span class="kt">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Rover</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">  </span><span class="c1">// business rules</span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="p">}</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="kd">const</span><span class="w"> </span><span class="nx">quit</span><span class="o">:</span><span class="kt">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="nx">Rover</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">  </span><span class="c1">// business rules</span>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="p">}</span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a>
<a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="c1">// Function that I&#39;m wanting to write tests against.</span>
<a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="kd">function</span><span class="w"> </span><span class="nx">convertCommandToAction</span><span class="p">(</span><span class="nx">c</span><span class="o">:</span><span class="kt">Command</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Action</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;MoveForward&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">moveForward</span><span class="p">;</span>
<a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;MoveBackward&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">moveBackward</span><span class="p">;</span>
<a id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;TurnLeft&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">turnLeft</span><span class="p">;</span>
<a id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;TurnRight&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">turnRight</span><span class="p">;</span>
<a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;Quit&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">quit</span><span class="p">;</span>
<a id="__codelineno-4-28" name="__codelineno-4-28"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-4-29" name="__codelineno-4-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>I'm able to write tests across all the other functions easily enough, but for the <code>convertCommandToAction</code>, I needed some way to know which function is being returned.</p>
<p>Since I don't want the real functions to be used, my mind went to leveraging <code>Jest</code> and mocking out the module that the actions were defined in, yielding the following test setup.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Command</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./models&quot;</span><span class="p">;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">convertCommandToAction</span><span class="p">,</span><span class="w"> </span><span class="nx">convertStringToCommand</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./parsers&quot;</span><span class="p">;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="nx">jest</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="s2">&quot;./actions&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">  </span><span class="nx">moveForward</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">(),</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">  </span><span class="nx">moveBackward</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">(),</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">  </span><span class="nx">turnLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">(),</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">  </span><span class="nx">turnRight</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">(),</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">  </span><span class="nx">quit</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">(),</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="p">}));</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;When converting a Command to an Action&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">  </span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;and the command is MoveForward, then the right action is returned&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">convertCommandToAction</span><span class="p">(</span><span class="s2">&quot;MoveForward&quot;</span><span class="p">);</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">    </span><span class="c1">// What should my expect be?</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">  </span><span class="p">});</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="p">});</span>
</code></pre></div></td></tr></table></div>
<p>One approach that I have used in the past is jest's ability <a href="https://jestjs.io/docs/jest-object#jestismockfunctionfn">to test if a function is a mocked function</a>, however, that approach doesn't work here because all of the functions are being mocked out. Meaning, that my test would pass, but if I returned <code>moveBackward</code> instead of <code>moveForward</code>, my test would still pass (but now for the wrong reason). I need a way to know <em>which</em> function was being returned.</p>
<p>Doing some digging, I found that the <code>jest.fn()</code> has a way of setting a name for a mock by leveraging the <a href="https://jestjs.io/docs/mock-function-api#mockfnmocknamename"><code>mockName</code></a> function. This in turn allowed me to change my setup to look like this.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span>
<span class="normal"><a href="#__codelineno-6-6">6</a></span>
<span class="normal"><a href="#__codelineno-6-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="nx">jest</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="s2">&quot;./actions&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">  </span><span class="nx">moveForward</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">().</span><span class="nx">mockName</span><span class="p">(</span><span class="s1">&#39;moveForward&#39;</span><span class="p">),</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">  </span><span class="nx">moveBackward</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">().</span><span class="nx">mockName</span><span class="p">(</span><span class="s1">&#39;moveBackward&#39;</span><span class="p">),</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">  </span><span class="nx">turnLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">().</span><span class="nx">mockName</span><span class="p">(</span><span class="s1">&#39;turnLeft&#39;</span><span class="p">),</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">  </span><span class="nx">turnRight</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">().</span><span class="nx">mockName</span><span class="p">(</span><span class="s1">&#39;turnRight&#39;</span><span class="p">),</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">  </span><span class="nx">quit</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">().</span><span class="nx">mockName</span><span class="p">(</span><span class="s1">&#39;quit&#39;</span><span class="p">),</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="p">}));</span>
</code></pre></div></td></tr></table></div>
<em>Note: It turns out that the <code>mockName</code> function is part of a <a href="https://martinfowler.com/bliki/FluentInterface.html">fluent interface</a>, which allows it to return a jest.Mock as the result of the mockName call</em></p>
<p>With my setup updated, my tests can now check that the result has the right mockName.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span>
<span class="normal"><a href="#__codelineno-7-7">7</a></span>
<span class="normal"><a href="#__codelineno-7-8">8</a></span>
<span class="normal"><a href="#__codelineno-7-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;When converting a Command to an Action&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">  </span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;and the command is MoveForward, then the right action is returned&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">    </span><span class="c1">// have to convert result as a jest.Mock to make TypeScript happy</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">convertCommandToAction</span><span class="p">(</span><span class="s2">&quot;MoveForward&quot;</span><span class="p">)</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">unknown</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">Jest</span><span class="p">.</span><span class="nx">Mock</span><span class="p">;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">getMockName</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="s2">&quot;moveForward&quot;</span><span class="p">);</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">  </span><span class="p">});</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="p">});</span>
</code></pre></div></td></tr></table></div>
<h3 id="wrapping-up"><a class="toclink" href="../../2024/08/19/today-i-learned---leveraging-mock-names-with-jest/#wrapping-up">Wrapping Up</a></h3>
<p>If you find yourself writing functions that return other function (i.e., leveraging functional programming concepts), then you check out using <code>mockName</code> for keeping track of which functions are being returned.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-08-06 00:00:00+00:00">Aug 6, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-changing-the-entrypoint-for-a-docker-container"><a class="toclink" href="../../2024/08/06/today-i-learned-changing-the-entrypoint-for-a-docker-container/">Today I Learned: Changing the Entrypoint for a Docker Container</a></h2>
<p>A common pattern for building software today is to develop using containers. This is a great strategy because it can ensure that everyone is building/deploying the same environment every time. However, like any other tooling, it can take a bit to create the file and make sure that you're setting it up correctly.</p>
<p>When I'm building a container, I typically will run <code>bash</code> in the container so I can inspect files, paths, permissions and more.</p>
<p>For example, let's say that I wanted to see what all is in the <code>node</code> image, I could run the following</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>node:22<span class="w"> </span>bash
</code></pre></div></td></tr></table></div>
<p>And as long as the <code>node</code> image has bash installed, I can take a look.</p>
<p>This trick works just fine when I have access to the Dockerfile and can change it. But what if you didn't have access to the Dockerfile? How would you troubleshoot?</p>
<h3 id="the-scenario"><a class="toclink" href="../../2024/08/06/today-i-learned-changing-the-entrypoint-for-a-docker-container/#the-scenario">The Scenario</a></h3>
<p>Let's say that I'm using a container that was created from another team, called <code>deps</code>. When I try to run it though, I get the following error:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>deps:latest
</code></pre></div></td></tr></table></div>
<p><img alt="Node error stating that it could not find module '/app/hello.js'" src="https://softwarementorblog.blob.core.windows.net/images/til-docker-entrypoint/image-1.png" /></p>
<p>Looking at the error message, it says that it couldn't find <code>/app/hello.js</code>. I could let the other team know and let them figure it out. However, I'd like to give them a bit more info and possible advice, so I could use the <code>bash</code> trick from before and see if I can spot the problem.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>deps:latest<span class="w"> </span>bash
</code></pre></div></td></tr></table></div>
<p><img alt="Node error stating that it could not find module '/app/hello.js" src="https://softwarementorblog.blob.core.windows.net/images/til-docker-entrypoint/image-1.png" /></p>
<p>Wait a minute! Why did I get the same error?</p>
<p>The reason is because the image has an <code>ENTRYPOINT</code> defined, which means that whenever the container starts, it's going to run that command. Since that command is the one that's failing, the container crashes before it executes bash or any other command.</p>
<h3 id="the-solution"><a class="toclink" href="../../2024/08/06/today-i-learned-changing-the-entrypoint-for-a-docker-container/#the-solution">The Solution</a></h3>
<p>Since I don't have access to the Dockerfile, I need a way to change the entrypoint to allow it to run bash. Luckily, it turns out that the <code>docker run</code> command has a <code>--entrypoint</code> param that you can set to be whatever the command should be.</p>
<p>So let's run the container, except this time, specifying bash as the entrypoint.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--entrypoint<span class="w"> </span><span class="s2">&quot;bash&quot;</span><span class="w"> </span>deps:latest
</code></pre></div></td></tr></table></div>
<p>And if I run the <code>ls</code> command, I can see that the issue is that the file is called index.js, not hello.js. </p>
<p><img alt="There's not a file called hello.js, but it's called index.js" src="https://softwarementorblog.blob.core.windows.net/images/til-docker-entrypoint/image-3.png" /></p>
<p>From here, I can give this information to the other team and they can make the necessary changes to their Dockerfile.</p>
    
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <span class="md-pagination__current">1</span> <a class="md-pagination__link" href="page/2/">2</a> <a class="md-pagination__link" href="page/3/">3</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../solid/" class="md-footer__link md-footer__link--prev" aria-label="Previous: SOLID">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                SOLID
              </div>
            </div>
          </a>
        
        
          
          <a href="../tooling/" class="md-footer__link md-footer__link--next" aria-label="Next: Tooling">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Tooling
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.footer", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.ad38c271.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b66b2b78.min.js"></script>
      
    
  </body>
</html>