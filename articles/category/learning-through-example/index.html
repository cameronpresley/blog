
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Cameron Presley">
      
      
      
        <link rel="prev" href="../leadership/">
      
      
        <link rel="next" href="../process/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16+insiders-4.53.16">
    
    
      
        <title>Learning Through Example - The Software Mentor</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.1caf78d2.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/page.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-ZE0MGVG7RJ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-ZE0MGVG7RJ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-ZE0MGVG7RJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#learning-through-example" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="The Software Mentor" class="md-header__button md-logo" aria-label="The Software Mentor" data-md-component="logo">
      
  <img src="../../../assets/images/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Software Mentor
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Learning Through Example
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  About Me

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  Articles

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../courses/" class="md-tabs__link">
        
  
  
    
  
  Training Course

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../level-up/" class="md-tabs__link">
        
  
  
    
  
  Level Up Resources

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../presentations/" class="md-tabs__link">
        
  
  
    
  
  Presentations

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../speaking-schedule/" class="md-tabs__link">
        
  
  
    
  
  Speaking Schedule

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../story/" class="md-tabs__link">
        
  
  
    
  
  Story

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../resume/" class="md-tabs__link">
        
  
  
    
  
  Resume

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The Software Mentor" class="md-nav__button md-logo" aria-label="The Software Mentor" data-md-component="logo">
      
  <img src="../../../assets/images/favicon.png" alt="logo">

    </a>
    The Software Mentor
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    About Me
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Articles
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Articles
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Archive
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Archive
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2025
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2024
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2023
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2020
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2018/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2018
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2015/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2015
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2014/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2014
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2013/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2013
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../net/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    .NET
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../c/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C#
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../career/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Career
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../coaching-corner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coaching Corner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../functional-programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Functional Programming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../interviewing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interviewing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../leadership/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Leadership
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
      
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning Through Example
  

    
  </span>
  
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../solid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SOLID
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../today-i-learned/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Today I Learned
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../tooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tooling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../typescript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeScript
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training Course
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../level-up/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level Up Resources
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../presentations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Presentations
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../speaking-schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Speaking Schedule
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Story
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resume/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resume
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="learning-through-example">Learning Through Example</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-07-14 00:00:00+00:00">Jul 14, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Learning Through Example</a></li>
        
        
          
          <li class="md-meta__item">
            
              7 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="mars-rover-implementing-logger-design"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/">Mars Rover ‚Äì Implementing Logger ‚Äì Design</a></h2>
<p>Welcome to the tenth installment of Learning Through Example ‚Äì Mars Rover! At this point, we‚Äôve wrapped up all the functionality for the <code>Rover</code>, so now it‚Äôs time to start implementing the logging requirements. Like always, we‚Äôll first take at the requirements to ensure we‚Äôve got a good idea of what‚Äôs needed. From there, we‚Äôll talk about the different approaches for implementation we could take. Finally, we‚Äôll decide on a rough approach for implementation</p>
<h3 id="what-do-we-need"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#what-do-we-need">What Do We Need?</a></h3>
<p>If we look back at the original <a href="../../2020/05/20/mars-rover---defining-the-problem/#problem-description">requirements</a> for logging, we find the following</p>
<blockquote>
<p>In order to help troubleshoot failures with the emulation, every time a command is received, both the command received, the rover‚Äôs location, and the rover‚Äôs orientation should be logged.</p>
</blockquote>
<h4 id="determining-intent-from-vague-requirements"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#determining-intent-from-vague-requirements">Determining Intent From Vague Requirements</a></h4>
<p>Yep, these requirements are clearly defined, but what‚Äôs the problem we‚Äôre trying to solve? Why do we care if this happens or not? After talking more with the Subject Matter Expert (SME), it seems like there are two main reasons for the logging requirement. First, they want a way to troubleshoot if something goes wrong in the emulation, and having this trace will be helpful in reproducing the error. Second, they want to have different runs be separated in the logging in the event they need to troubleshoot a specific run.</p>
<h4 id="going-from-vague-to-concrete-requirements"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#going-from-vague-to-concrete-requirements">Going from Vague to Concrete Requirements</a></h4>
<p>Given the above intent, it sounds like an easy approach we can take is to log all of this information to a file with a specific name. In real production code, you would likely use a logging solution instead of implementing your own, but this will provide a good opportunity to learn some of the System.IO namespace in .NET.</p>
<p>With a rough implementation in mind, we have another discussion with our SME, and come up with the following requirements:</p>
<ul>
<li>When the application starts, the user will need to specify where to log the information to (known as the <em>path</em>)</li>
<li>If the <em>path</em> doesn‚Äôt exist, the user is informed of such and the application doesn‚Äôt continue</li>
<li>If the <em>path</em> isn‚Äôt accessible (maybe due to a permissions issue), then the user is informed of such and the application doesn‚Äôt continue</li>
<li>If the <em>path</em> is valid, then a text file will be created that contains the information generated by the emulator</li>
<li>Every time the <code>Rover</code> receives a command, its <code>Location</code> and <code>Orientation</code> should be logged</li>
</ul>
<h3 id="software-design-guidelines"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#software-design-guidelines">Software Design Guidelines</a></h3>
<p>Now that we have requirements, how do we want to begin implementation? Do we want to add this logic to the Rover class? Or should we add a new component to handle logging?</p>
<h4 id="adding-logging-to-rover"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#adding-logging-to-rover">Adding Logging to Rover</a></h4>
<p>So one approach to this problem is to widen the responsibilities for the <code>Rover</code>, add a <code>Log</code> method and update the existing methods to use this new method. The advantage of this approach is that the logging is in one place so it‚Äôs easy to make changes. Another advantage is that since the <code>Rover</code> component already exists, we can go ahead and add some new tests pretty quick.</p>
<p>Unfortunately, this approach has two major downsides. First, by widening the responsibilities, we‚Äôll need to update all existing tests to deal with logging (which may not be a trivial change to make). Second, since the <code>Rover</code> handles the logging, we‚Äôve muddled our easy-to-test business rules with a <a href="https://stackoverflow.com/questions/23700540/cross-cutting-concern-example#answer-25779679"><em>cross-cutting concern</em></a> and now the <code>Rover</code> would have a couple of different reasons to change. Bummer üôÅ</p>
<h4 id="writing-a-new-component"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#writing-a-new-component">Writing a New Component</a></h4>
<p>The advantage of writing a new component is that we can focus on making a <code>Logger</code> component that just knows how to log any message to storage, regardless of what uses this component. By taking this approach, we can have a ‚Äúdumb‚Äù component (almost not worth testing) and keep the things that we care about (i.e. the business rules) easier to test.</p>
<p>The main downside of this approach is that we have yet another component to manage. In our particular case, that‚Äôs alright, but as the codebase becomes larger, this is something to keep in mind.</p>
<h3 id="looking-at-dependencies"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#looking-at-dependencies">Looking at Dependencies</a></h3>
<p>With our rough approach in mind (creating a new component to handle logging), let‚Äôs take a look at what this new component is going to need to work as expected. Based on the requirements, the <code>Logger</code> will need to know where to log the information to (the path) and what to log (the message). These necessary pieces of information are known as dependencies because the <code>Logger</code> won‚Äôt work if these are not provided.</p>
<p>When it comes to injecting in a dependency, there are three main approaches, each providing benefits and drawbacks. Let‚Äôs take a closer look at these approaches.</p>
<h4 id="constructor-injection"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#constructor-injection">Constructor Injection</a></h4>
<p>First and foremost, constructor injection makes a lot of sense <em>if the dependency doesn‚Äôt change throughout the lifetime of the object</em>. Let‚Äôs say that we have an object that knows how to retrieve records from a database. As part of its work, it will need access to a connection string to connect to the database in question.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">ItemRepository</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="p">{</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">_connectionString</span><span class="p">;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">  </span><span class="c1">// By adding the dependency here, there&#39;s no way you that</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">  </span><span class="c1">// an ItemRepository could be created without specifying</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">  </span><span class="c1">// a connection string.</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">ItemRepository</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">connectionString</span><span class="p">)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">    </span><span class="n">_connectionString</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connectionString</span><span class="p">;</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="p">}</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="c1">// Example usage</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="c1">// If the connectionString isn&#39;t provided, then</span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="c1">// the code doesn&#39;t compile!</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="kt">var</span><span class="w"> </span><span class="n">itemRepository</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ItemRepository</span><span class="p">(</span><span class="s">&quot;Data Source=localhost;Initial Catalog=AdventureWorks;Integrated Security=True&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Generally speaking, an application doesn‚Äôt speak to multiple databases, so the odds of the connection string needing to change during the lifetime of this class is slim. Given that, it makes sense to inject this dependency at the constructor level.</p>
<p>One of the benefits of injecting dependencies at the constructor level is that you‚Äôre revealing your intent to other developers. In this case, you‚Äôre signaling others ‚ÄúHey, if you‚Äôre going to use this class, you need to specify a connection string, otherwise this isn‚Äôt going to work!‚Äù</p>
<p>The main downside of this approach is that by adding more parameters to the constructor, you may end up with classes that have a ton of dependencies. However, if you find yourself in that situation, you might have <a href="../../2013/11/11/beginner-basics-establishing-a-solid-foundation--the-single-responsibility-principle/">another problem</a> going on.</p>
<h4 id="method-injection"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#method-injection">Method Injection</a></h4>
<p>For this approach, method injection makes sense <em>if the dependency can change during the lifetime of the object</em>. Let‚Äôs say that we have a component that needs a way to send notifications and that the notification mechanism is based on user preferences. For example, if I‚Äôm making a purchase, then I want the order confirmation to be emailed to me whereas other customers might want their receipt texted to them.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">PurchaseWorkflow</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">  </span><span class="c1">// By adding the NotificationStrategy here,</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">  </span><span class="c1">// there&#39;s no way that a developer can call </span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">  </span><span class="c1">// the Complete method without specifying </span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">  </span><span class="c1">// a way to notify the customer.</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Complete</span><span class="p">(</span><span class="n">Order</span><span class="w"> </span><span class="n">order</span><span class="p">,</span><span class="w"> </span><span class="n">INotificationStrategy</span><span class="w"> </span><span class="n">strategy</span><span class="p">)</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">receiptDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateReceipt</span><span class="p">(</span><span class="n">order</span><span class="p">);</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="n">strategy</span><span class="p">.</span><span class="n">SendNotification</span><span class="p">(</span><span class="n">order</span><span class="p">.</span><span class="n">Customer</span><span class="p">,</span><span class="w"> </span><span class="n">receiptDetails</span><span class="p">);</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="p">}</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="c1">// Example Usage</span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="kt">var</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Order</span><span class="p">(</span><span class="s">&quot;Cameron&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">22.50</span><span class="p">);</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="kt">var</span><span class="w"> </span><span class="n">workflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PurchaseWorkflow</span><span class="p">();</span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="c1">// If a NotificationStrategy isn&#39;t passed in, this code won&#39;t compile.</span>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="n">workflow</span><span class="p">.</span><span class="n">Complete</span><span class="p">(</span><span class="n">order</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TextNotificationStrategy</span><span class="p">());</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p>If we were to use constructor injection, that means that we would need to instantiate a whole new object just because the notification mechanism needed to change which seems a bit excessive for our use case.</p>
<p>Otherwise, method injection has the same main advantage of constructor injection (i.e. revealing design intent) and disadvantage (can lead to a bunch of necessary parameters to pass in)</p>
<h4 id="property-injection"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#property-injection">Property Injection</a></h4>
<p>Unlike the other two approaches, property injection allows us to set the dependency as a property on the object and then start using the object. Unlike the other two approaches where you have to always specify the dependency, this approach allows you to set the dependency, use the class, then switch out the dependency without having to create a new instance (like constructor injection would force you to) and without having to specify it every time a method was called.</p>
<p>However, the main downside is that you as the developer need to remember to set this property otherwise the code will compile, but you‚Äôll run into a runtime exception. It‚Äôs because of this limitation that I‚Äôll avoid this injection technique and stick with either constructor or method level injections.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">PurchaseWorkflow</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="p">{</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">  </span><span class="c1">// By having the notification be set as a property, </span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">  </span><span class="c1">// developer can set this dependency once and then</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">  </span><span class="c1">// only change it when needed.</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">  </span><span class="c1">// However, there&#39;s nothing forcing a developer to </span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">  </span><span class="c1">// set this property.</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">INotificationStrategy</span><span class="w"> </span><span class="n">NotificationStrategy</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Complete</span><span class="p">(</span><span class="n">Order</span><span class="w"> </span><span class="n">order</span><span class="p">)</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">receiptDetails</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateReceipt</span><span class="p">(</span><span class="n">order</span><span class="p">);</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">    </span><span class="n">NotificationStrategy</span><span class="p">.</span><span class="n">SendNotification</span><span class="p">(</span><span class="n">order</span><span class="p">.</span><span class="n">Customer</span><span class="p">,</span><span class="w"> </span><span class="n">receiptDetails</span><span class="p">);</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="p">}</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="c1">// The Mistake</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="kt">var</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Order</span><span class="p">(</span><span class="s">&quot;Cameron&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">22.50</span><span class="p">);</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="kt">var</span><span class="w"> </span><span class="n">workflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PurchaseWorkflow</span><span class="p">();</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="n">workflow</span><span class="p">.</span><span class="n">Complete</span><span class="p">(</span><span class="n">order</span><span class="p">);</span><span class="w"> </span><span class="c1">// This will cause a NullReferenceException to be thrown</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="c1">// Proper Usage</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="kt">var</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Order</span><span class="p">(</span><span class="s">&quot;Cameron&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">22.50</span><span class="p">);</span>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="kt">var</span><span class="w"> </span><span class="n">workflow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PurchaseWorkflow</span><span class="p">();</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a><span class="c1">// As long as you remember to set this property, things should work!</span>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="n">workflow</span><span class="p">.</span><span class="n">NotificationStrategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TextNotificationStrategy</span><span class="p">();</span>
<a id="__codelineno-5-27" name="__codelineno-5-27"></a><span class="n">workflow</span><span class="p">.</span><span class="n">Complete</span><span class="p">(</span><span class="n">order</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<h3 id="designing-the-logger"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#designing-the-logger">Designing the Logger</a></h3>
<p>Now that we‚Äôve looked at the various ways we can inject dependencies, we can start coming up with the rough design for <code>Logger</code>. Looking back at the requirements, we have two dependencies to worry about (the <em>path</em> and the message to log).</p>
<p>Given that the <em>path</em> is not going to change during a run of the emulator, we should leverage <em>constructor injection</em> for this dependency. For the <em>message</em>, since that will be based on the <code>Rover</code>'s <code>Location</code> and <code>Orientation</code> which will change during the emulation, we should leverage <em>method injection</em> for this dependency.</p>
<p>With all of this in place, we now have a much clearer idea of how the <code>Logger</code> component is going to look!</p>
<h3 id="wrapping-up"><a class="toclink" href="../../2020/07/14/mars-rover--implementing-logger--design/#wrapping-up">Wrapping Up</a></h3>
<p>In this post, we explored the requirements for logging and why the logging logic should be a separate component due it being a cross-cutting concern. From there, we explored at the three main ways to inject dependencies (constructor, method, and property). With this knowledge, we were able to make some smart decisions on how to inject where to log the information and what to log. In the next pose, we‚Äôll build upon this design by creating the <code>Logger</code> component. From there, we were able to make decisions on how to inject the path of where to log and the message to log. In the next post, we‚Äôll start implementing the logic for creating the <code>Logger</code> component.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-07-07 00:00:00+00:00">Jul 7, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Learning Through Example</a></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="mars-rover-implementing-rover-turn-right"><a class="toclink" href="../../2020/07/07/mars-rover--implementing-rover--turn-right/">Mars Rover ‚Äì Implementing Rover ‚Äì Turn Right</a></h2>
<p>Welcome to the ninth installment of Learning Through Example ‚Äì Mars Rover! In this post, we‚Äôre going to start driving out the functionality for the Rover and the business rules for turning right! First, we‚Äôll take a look at the requirements to make sure we have an idea of what‚Äôs needed. From there, we‚Äôll start implementing the requirements. By the end of this post, we‚Äôll have a Rover that can do perform all of the commands!</p>
<h3 id="turning-in-place-by-turning-right"><a class="toclink" href="../../2020/07/07/mars-rover--implementing-rover--turn-right/#turning-in-place-by-turning-right">Turning in Place By Turning Right</a></h3>
<p>If we look back at the original <a href="../../2020/05/20/mars-rover---defining-the-problem/#problem-description">requirements</a> for turning right, we find this single line as the requirement</p>
<blockquote>
<p>When the rover is told to turn right, it will rotate 90 degrees to the right, but not change its location</p>
</blockquote>
<p>Given this requirement, we‚Äôre able to double-check with our Subject Matter Expert that the <code>Rover</code> is essentially rotating in place which yields the following requirements.</p>
<ul>
<li>Given the <code>Rover</code> is facing <code>North</code>, when it turns right, then the <code>Rover</code> should be facing <code>East</code> at the same <code>Coordinate</code></li>
<li>Given the <code>Rover</code> is facing <code>East</code>, when it turns right, then the <code>Rover</code> should be facing <code>South</code> at the same <code>Coordinate</code></li>
<li>Given the <code>Rover</code> is facing <code>South</code>, when it turns right, then the <code>Rover</code> should be facing <code>West</code> at the same <code>Coordinate</code></li>
<li>Given the <code>Rover</code> is facing <code>West</code>, when it turns right, then the <code>Rover</code> should be facing <code>North</code> at the same <code>Coordinate</code></li>
</ul>
<p>So far, the requirements are very similar to when we were implementing <code>TurnLeft</code>, so let‚Äôs see if we can leverage the same setup!</p>
<h4 id="redgreenrefactor-for-rover-facing-north"><a class="toclink" href="../../2020/07/07/mars-rover--implementing-rover--turn-right/#redgreenrefactor-for-rover-facing-north">Red/Green/Refactor For Rover Facing North</a></h4>
<p>Given what we learned when we were implementing the rules for <code>TurnLeft</code>, I‚Äôm going to go ahead and copy the test and add the single case for when <code>Rover</code> faces <code>North</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="na">[Test]</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="na">[TestCase(Direction.North, Direction.East, TestName = &quot;AndFacingNorthThenTheRoverFacesEast&quot;)]</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">RoverTurningRight</span><span class="p">(</span><span class="n">Direction</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="p">{</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnRight</span><span class="p">();</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Since <code>TurnRight</code> doesn‚Äôt exist, this test will fail so let‚Äôs go ahead and write enough code to make it pass. For the implementation, I‚Äôm going to go ahead and take advantage of the pattern that we found last time, yielding the following</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span>
<span class="normal"><a href="#__codelineno-8-7">7</a></span>
<span class="normal"><a href="#__codelineno-8-8">8</a></span>
<span class="normal"><a href="#__codelineno-8-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnRight</span><span class="p">()</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">  </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>One thing to note is to take a look at how we defined <code>ifSouth</code>, <code>ifEast</code>, and <code>ifWest</code>. Since we‚Äôre still wanting to implement one requirement at a time, I‚Äôve defined them to do nothing so that if <code>Execute</code> is called, nothing will happen. Alternatively, I could have defined them to throw an exception, but I believe that‚Äôs a bit much since we‚Äôll be implementing the functionality soon!</p>
<p>With that implementation, our test passes, so it‚Äôs time to go on to the next requirement!</p>
<h4 id="rapid-test-creation-with-testcase"><a class="toclink" href="../../2020/07/07/mars-rover--implementing-rover--turn-right/#rapid-test-creation-with-testcase">Rapid Test Creation with TestCase</a></h4>
<p>With a parameterized unit test in place, adding a new test is as simple as adding a new <code>TestCase</code> attribute.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="na">[Test]</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="na">[TestCase(Direction.North, Direction.East, TestName = &quot;AndFacingNorthThenTheRoverFacesEast&quot;)]</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="hll"><span class="na">[TestCase(Direction.East, Direction.South, TestName = &quot;AndFacingEastThenTheRoverFacesSouth&quot;)]</span>
</span><a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">RoverTurningRight</span><span class="p">(</span><span class="n">Direction</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="p">{</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnRight</span><span class="p">();</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And updating <code>ifEast</code> action in the <code>TurnRight</code> method</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span>
<span class="normal"><a href="#__codelineno-10-6">6</a></span>
<span class="normal"><a href="#__codelineno-10-7">7</a></span>
<span class="normal"><a href="#__codelineno-10-8">8</a></span>
<span class="normal"><a href="#__codelineno-10-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnRight</span><span class="p">()</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="hll"><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">;</span>
</span><a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{};</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">  </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now that we‚Äôve proven how easy it is to make this change, let‚Äôs go ahead and knock out the final two test cases</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span>
<span class="normal"><a href="#__codelineno-11-13">13</a></span>
<span class="normal"><a href="#__codelineno-11-14">14</a></span>
<span class="normal"><a href="#__codelineno-11-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="na">[Test]</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="na">[TestCase(Direction.North, Direction.East, TestName = &quot;AndFacingNorthThenTheRoverFacesEast&quot;)]</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="na">[TestCase(Direction.East, Direction.South, TestName = &quot;AndFacingEastThenTheRoverFacesSouth&quot;)]</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="hll"><span class="na">[TestCase(Direction.South, Direction.West, TestName = &quot;AndFacingSouthThenTheRoverFacesWest&quot;)]</span>
</span><a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="hll"><span class="na">[TestCase(Direction.West, Direction.North, TestName = &quot;AndFacingWestThenTheRoverFacesNorth&quot;)]</span>
</span><a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">RoverTurningRight</span><span class="p">(</span><span class="n">Direction</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="p">{</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnRight</span><span class="p">();</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a>
<a id="__codelineno-11-13" name="__codelineno-11-13"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-11-14" name="__codelineno-11-14"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-11-15" name="__codelineno-11-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And implement the code to make those cases pass</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span>
<span class="normal"><a href="#__codelineno-12-5">5</a></span>
<span class="normal"><a href="#__codelineno-12-6">6</a></span>
<span class="normal"><a href="#__codelineno-12-7">7</a></span>
<span class="normal"><a href="#__codelineno-12-8">8</a></span>
<span class="normal"><a href="#__codelineno-12-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnRight</span><span class="p">()</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="p">{</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">;</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="hll"><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
</span><a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">;</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="hll"><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
</span><a id="__codelineno-12-7" name="__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a><span class="w">  </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Goodness, that was a pretty quick implementation of <code>TurnRight</code>! Thanks to our previous refactoring in <code>Rover</code> and leveraging parameterized testing, we were able to implement this new feature with a minimal amount of code and the code we did write was focused on the new functionality, not boilerplate.</p>
<p>With that being said, here‚Äôs our final version of <code>Rover</code>!</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span>
<span class="normal"><a href="#__codelineno-13-21">21</a></span>
<span class="normal"><a href="#__codelineno-13-22">22</a></span>
<span class="normal"><a href="#__codelineno-13-23">23</a></span>
<span class="normal"><a href="#__codelineno-13-24">24</a></span>
<span class="normal"><a href="#__codelineno-13-25">25</a></span>
<span class="normal"><a href="#__codelineno-13-26">26</a></span>
<span class="normal"><a href="#__codelineno-13-27">27</a></span>
<span class="normal"><a href="#__codelineno-13-28">28</a></span>
<span class="normal"><a href="#__codelineno-13-29">29</a></span>
<span class="normal"><a href="#__codelineno-13-30">30</a></span>
<span class="normal"><a href="#__codelineno-13-31">31</a></span>
<span class="normal"><a href="#__codelineno-13-32">32</a></span>
<span class="normal"><a href="#__codelineno-13-33">33</a></span>
<span class="normal"><a href="#__codelineno-13-34">34</a></span>
<span class="normal"><a href="#__codelineno-13-35">35</a></span>
<span class="normal"><a href="#__codelineno-13-36">36</a></span>
<span class="normal"><a href="#__codelineno-13-37">37</a></span>
<span class="normal"><a href="#__codelineno-13-38">38</a></span>
<span class="normal"><a href="#__codelineno-13-39">39</a></span>
<span class="normal"><a href="#__codelineno-13-40">40</a></span>
<span class="normal"><a href="#__codelineno-13-41">41</a></span>
<span class="normal"><a href="#__codelineno-13-42">42</a></span>
<span class="normal"><a href="#__codelineno-13-43">43</a></span>
<span class="normal"><a href="#__codelineno-13-44">44</a></span>
<span class="normal"><a href="#__codelineno-13-45">45</a></span>
<span class="normal"><a href="#__codelineno-13-46">46</a></span>
<span class="normal"><a href="#__codelineno-13-47">47</a></span>
<span class="normal"><a href="#__codelineno-13-48">48</a></span>
<span class="normal"><a href="#__codelineno-13-49">49</a></span>
<span class="normal"><a href="#__codelineno-13-50">50</a></span>
<span class="normal"><a href="#__codelineno-13-51">51</a></span>
<span class="normal"><a href="#__codelineno-13-52">52</a></span>
<span class="normal"><a href="#__codelineno-13-53">53</a></span>
<span class="normal"><a href="#__codelineno-13-54">54</a></span>
<span class="normal"><a href="#__codelineno-13-55">55</a></span>
<span class="normal"><a href="#__codelineno-13-56">56</a></span>
<span class="normal"><a href="#__codelineno-13-57">57</a></span>
<span class="normal"><a href="#__codelineno-13-58">58</a></span>
<span class="normal"><a href="#__codelineno-13-59">59</a></span>
<span class="normal"><a href="#__codelineno-13-60">60</a></span>
<span class="normal"><a href="#__codelineno-13-61">61</a></span>
<span class="normal"><a href="#__codelineno-13-62">62</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="p">{</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Rover</span><span class="p">()</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">();</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-13-18" name="__codelineno-13-18"></a>
<a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="w">    </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-13-21" name="__codelineno-13-21"></a>
<a id="__codelineno-13-22" name="__codelineno-13-22"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveBackward</span><span class="p">()</span>
<a id="__codelineno-13-23" name="__codelineno-13-23"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-13-24" name="__codelineno-13-24"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-13-25" name="__codelineno-13-25"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-13-26" name="__codelineno-13-26"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-13-27" name="__codelineno-13-27"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-13-28" name="__codelineno-13-28"></a>
<a id="__codelineno-13-29" name="__codelineno-13-29"></a><span class="w">    </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-13-30" name="__codelineno-13-30"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-13-31" name="__codelineno-13-31"></a>
<a id="__codelineno-13-32" name="__codelineno-13-32"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">()</span>
<a id="__codelineno-13-33" name="__codelineno-13-33"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-13-34" name="__codelineno-13-34"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
<a id="__codelineno-13-35" name="__codelineno-13-35"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">;</span>
<a id="__codelineno-13-36" name="__codelineno-13-36"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">;</span>
<a id="__codelineno-13-37" name="__codelineno-13-37"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-13-38" name="__codelineno-13-38"></a>
<a id="__codelineno-13-39" name="__codelineno-13-39"></a><span class="w">    </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-13-40" name="__codelineno-13-40"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-13-41" name="__codelineno-13-41"></a>
<a id="__codelineno-13-42" name="__codelineno-13-42"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnRight</span><span class="p">()</span>
<a id="__codelineno-13-43" name="__codelineno-13-43"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-13-44" name="__codelineno-13-44"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">;</span>
<a id="__codelineno-13-45" name="__codelineno-13-45"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">;</span>
<a id="__codelineno-13-46" name="__codelineno-13-46"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
<a id="__codelineno-13-47" name="__codelineno-13-47"></a><span class="w">    </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-13-48" name="__codelineno-13-48"></a>
<a id="__codelineno-13-49" name="__codelineno-13-49"></a><span class="w">    </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-13-50" name="__codelineno-13-50"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-13-51" name="__codelineno-13-51"></a>
<a id="__codelineno-13-52" name="__codelineno-13-52"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Execute</span><span class="p">(</span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="p">)</span>
<a id="__codelineno-13-53" name="__codelineno-13-53"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-13-54" name="__codelineno-13-54"></a><span class="w">    </span><span class="k">switch</span><span class="p">(</span><span class="n">Orientation</span><span class="p">)</span>
<a id="__codelineno-13-55" name="__codelineno-13-55"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-13-56" name="__codelineno-13-56"></a><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">:</span><span class="w"> </span><span class="n">ifNorth</span><span class="p">();</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-13-57" name="__codelineno-13-57"></a><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">:</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">();</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-13-58" name="__codelineno-13-58"></a><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">:</span><span class="w"> </span><span class="n">ifEast</span><span class="p">();</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-13-59" name="__codelineno-13-59"></a><span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">:</span><span class="w"> </span><span class="n">ifWest</span><span class="p">();</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-13-60" name="__codelineno-13-60"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-13-61" name="__codelineno-13-61"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-13-62" name="__codelineno-13-62"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="wrapping-up"><a class="toclink" href="../../2020/07/07/mars-rover--implementing-rover--turn-right/#wrapping-up">Wrapping Up</a></h3>
<p>With the completion of <code>TurnRight</code>, the Rover has finally been implemented with all required pieces of functionality. Through this process, we learned how to write good unit tests, how to refactor unit tests to use parameterized unit testing, and reducing repetition through a SOLID refactor of <code>if/else</code> all of which culminating in <code>TurnRight</code> being a simple piece of functionality to include. In the next post, we will start working on implementing our logger!</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-30 00:00:00+00:00">Jun 30, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Learning Through Example</a></li>
        
        
          
          <li class="md-meta__item">
            
              9 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="mars-rover-implementing-rover-refactoring-rover"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/">Mars Rover ‚Äì Implementing Rover ‚Äì Refactoring Rover</a></h2>
<p>Welcome to the eighth installment of Learning Through Example ‚Äì Mars Rover! In this post, we‚Äôre going to examine the <code>Rover</code> class and see what refactoring we can do based on some patterns we‚Äôre seeing with <code>MoveForward</code>, <code>MoveBackward</code>, and <code>TurnLeft</code>. After looking at the characteristics, we‚Äôll explore a couple of different approaches with their pros and cons. Finally, we‚Äôll make the refactor, using our test suite to make sure we didn‚Äôt regress in functionality.</p>
<h3 id="whats-the-problem"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#whats-the-problem">What‚Äôs The Problem</a></h3>
<p>If we look at the definition for <code>Rover</code>, it becomes clear that we have some major code duplication going on with regards to its <code>MoveForward</code>, <code>MoveBackward</code>, and <code>TurnLeft</code> methods.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span>
<span class="normal"><a href="#__codelineno-15-16">16</a></span>
<span class="normal"><a href="#__codelineno-15-17">17</a></span>
<span class="normal"><a href="#__codelineno-15-18">18</a></span>
<span class="normal"><a href="#__codelineno-15-19">19</a></span>
<span class="normal"><a href="#__codelineno-15-20">20</a></span>
<span class="normal"><a href="#__codelineno-15-21">21</a></span>
<span class="normal"><a href="#__codelineno-15-22">22</a></span>
<span class="normal"><a href="#__codelineno-15-23">23</a></span>
<span class="normal"><a href="#__codelineno-15-24">24</a></span>
<span class="normal"><a href="#__codelineno-15-25">25</a></span>
<span class="normal"><a href="#__codelineno-15-26">26</a></span>
<span class="normal"><a href="#__codelineno-15-27">27</a></span>
<span class="normal"><a href="#__codelineno-15-28">28</a></span>
<span class="normal"><a href="#__codelineno-15-29">29</a></span>
<span class="normal"><a href="#__codelineno-15-30">30</a></span>
<span class="normal"><a href="#__codelineno-15-31">31</a></span>
<span class="normal"><a href="#__codelineno-15-32">32</a></span>
<span class="normal"><a href="#__codelineno-15-33">33</a></span>
<span class="normal"><a href="#__codelineno-15-34">34</a></span>
<span class="normal"><a href="#__codelineno-15-35">35</a></span>
<span class="normal"><a href="#__codelineno-15-36">36</a></span>
<span class="normal"><a href="#__codelineno-15-37">37</a></span>
<span class="normal"><a href="#__codelineno-15-38">38</a></span>
<span class="normal"><a href="#__codelineno-15-39">39</a></span>
<span class="normal"><a href="#__codelineno-15-40">40</a></span>
<span class="normal"><a href="#__codelineno-15-41">41</a></span>
<span class="normal"><a href="#__codelineno-15-42">42</a></span>
<span class="normal"><a href="#__codelineno-15-43">43</a></span>
<span class="normal"><a href="#__codelineno-15-44">44</a></span>
<span class="normal"><a href="#__codelineno-15-45">45</a></span>
<span class="normal"><a href="#__codelineno-15-46">46</a></span>
<span class="normal"><a href="#__codelineno-15-47">47</a></span>
<span class="normal"><a href="#__codelineno-15-48">48</a></span>
<span class="normal"><a href="#__codelineno-15-49">49</a></span>
<span class="normal"><a href="#__codelineno-15-50">50</a></span>
<span class="normal"><a href="#__codelineno-15-51">51</a></span>
<span class="normal"><a href="#__codelineno-15-52">52</a></span>
<span class="normal"><a href="#__codelineno-15-53">53</a></span>
<span class="normal"><a href="#__codelineno-15-54">54</a></span>
<span class="normal"><a href="#__codelineno-15-55">55</a></span>
<span class="normal"><a href="#__codelineno-15-56">56</a></span>
<span class="normal"><a href="#__codelineno-15-57">57</a></span>
<span class="normal"><a href="#__codelineno-15-58">58</a></span>
<span class="normal"><a href="#__codelineno-15-59">59</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="p">{</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Rover</span><span class="p">()</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="n">X</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="o">=</span><span class="mi">0</span><span class="p">};</span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-15-16" name="__codelineno-15-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-17" name="__codelineno-15-17"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-18" name="__codelineno-15-18"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-15-19" name="__codelineno-15-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-20" name="__codelineno-15-20"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-21" name="__codelineno-15-21"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-15-22" name="__codelineno-15-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-23" name="__codelineno-15-23"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-24" name="__codelineno-15-24"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-15-25" name="__codelineno-15-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-26" name="__codelineno-15-26"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-15-27" name="__codelineno-15-27"></a>
<a id="__codelineno-15-28" name="__codelineno-15-28"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveBackward</span><span class="p">()</span>
<a id="__codelineno-15-29" name="__codelineno-15-29"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-15-30" name="__codelineno-15-30"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-31" name="__codelineno-15-31"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-15-32" name="__codelineno-15-32"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-33" name="__codelineno-15-33"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-34" name="__codelineno-15-34"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-15-35" name="__codelineno-15-35"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-36" name="__codelineno-15-36"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-37" name="__codelineno-15-37"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-15-38" name="__codelineno-15-38"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-39" name="__codelineno-15-39"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-40" name="__codelineno-15-40"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-15-41" name="__codelineno-15-41"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-42" name="__codelineno-15-42"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-15-43" name="__codelineno-15-43"></a>
<a id="__codelineno-15-44" name="__codelineno-15-44"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">()</span>
<a id="__codelineno-15-45" name="__codelineno-15-45"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-15-46" name="__codelineno-15-46"></a><span class="hll"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-47" name="__codelineno-15-47"></a><span class="w">      </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
<a id="__codelineno-15-48" name="__codelineno-15-48"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-49" name="__codelineno-15-49"></a><span class="hll"><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-50" name="__codelineno-15-50"></a><span class="w">      </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">;</span>
<a id="__codelineno-15-51" name="__codelineno-15-51"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-52" name="__codelineno-15-52"></a><span class="hll"><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-53" name="__codelineno-15-53"></a><span class="w">      </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">;</span>
<a id="__codelineno-15-54" name="__codelineno-15-54"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-55" name="__codelineno-15-55"></a><span class="hll"><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-15-56" name="__codelineno-15-56"></a><span class="w">      </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-15-57" name="__codelineno-15-57"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-58" name="__codelineno-15-58"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-15-59" name="__codelineno-15-59"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Based on the implementations, it seems like knowing what <code>Direction</code> the <code>Rover</code> is facing is a key rule to determine what update the <code>Rover</code> needs to do. The big pain point with this block of statements is that if we added a new <code>Direction</code> (like NorthEast), then we‚Äôd have to update these statements in <em>multiple places</em> even though all of these instances are referring to the same concept (i.e is the <code>Rover</code> facing this <code>Direction</code>). The other, more nuanced issue is that if we added a new <code>Direction</code>, there‚Äôs nothing forcing us to update <em>all of these places</em> because of our use of <code>if/else</code>.</p>
<h3 id="how-to-resolve"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#how-to-resolve">How To Resolve?</a></h3>
<p>From what we‚Äôre seeing, the primary issue are the duplicated <code>if/else</code> statements, so one of our primary design goals should be to have that logic in one place (instead of three different places). From there, we‚Äôd also like to have a way for the compiler to force us to handle the different <code>Directions</code> that the <code>Rover</code> is facing.</p>
<h4 id="isolating-the-ifelse"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#isolating-the-ifelse">Isolating the if/else</a></h4>
<p>In order to isolate the <code>if/else</code>, let‚Äôs go ahead and extract the logic to a new private method</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="k">private</span><span class="w"> </span><span class="n">xxx</span><span class="w"> </span><span class="nf">Execute</span><span class="p">(</span><span class="n">xxxx</span><span class="p">)</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="c1">//</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">    </span><span class="c1">// </span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">    </span><span class="c1">//</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">    </span><span class="c1">//</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>We‚Äôve now got the <code>if/else</code> isolated, but there are some questions on what the return type of this method should be or what parameters it will take. In order to answer those questions, let‚Äôs take a look at a couple of different approaches.</p>
<h4 id="using-a-functional-approach"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#using-a-functional-approach">Using a Functional Approach</a></h4>
<p>Now that we have a method that can operate given the <code>Rover</code>'s <code>Orientation</code>, one approach we could do is to modify this method to take in an Action for every possible <code>Orientation</code>. Then based on the <code>Orientation</code>, the appropriate <code>Action</code> is called.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Execute</span><span class="p">(</span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="p">)</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="n">ifNorth</span><span class="p">();</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">    </span><span class="n">ifSouth</span><span class="p">();</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">    </span><span class="n">ifEast</span><span class="p">();</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">    </span><span class="n">ifWest</span><span class="p">();</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this implementation, <code>TurnLeft</code> would look like</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span>
<span class="normal"><a href="#__codelineno-18-6">6</a></span>
<span class="normal"><a href="#__codelineno-18-7">7</a></span>
<span class="normal"><a href="#__codelineno-18-8">8</a></span>
<span class="normal"><a href="#__codelineno-18-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">()</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="p">{</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">;</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="w">  </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And <code>MoveForward</code> would look like</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span>
<span class="normal"><a href="#__codelineno-19-4">4</a></span>
<span class="normal"><a href="#__codelineno-19-5">5</a></span>
<span class="normal"><a href="#__codelineno-19-6">6</a></span>
<span class="normal"><a href="#__codelineno-19-7">7</a></span>
<span class="normal"><a href="#__codelineno-19-8">8</a></span>
<span class="normal"><a href="#__codelineno-19-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="p">{</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">  </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h5 id="advantages"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#advantages">Advantages</a></h5>
<p>The primary advantage of this approach is that in order to call <code>Execute</code>, you have to pass a parameter for the different directions. If you fail to do so, the code will fail to compile, which forces developers to handle the various use cases.</p>
<p>Furthermore, if there‚Äôs a bug in any of the <code>Actions</code>, then for troubleshooting, we‚Äôd need to know what method caused the problem and what the rover‚Äôs <code>Orientation</code> was and we can quickly figure out what the problem is.</p>
<h5 id="drawbacks"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#drawbacks">Drawbacks</a></h5>
<p>When using this approach, one thing to keep in mind is if we need to support additional <code>Direction</code>s in the future. The <code>Execute</code> method is already taking in four parameters and keeping them in the right order is difficult enough. What about five, six, or ten directions to support? The function signature would quickly become unwieldy.</p>
<p>In addition, the other downside to this approach is that if any of the <code>Action</code>s were to become much more complicated, it would start cluttering up the respective <code>Move</code> or <code>Turn</code> methods.</p>
<h4 id="using-an-object-oriented-approach"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#using-an-object-oriented-approach">Using an Object-Oriented Approach</a></h4>
<p>Now that we have a method that can operate given the Rover‚Äòs Orientation, another approach is to introduce the Strategy pattern where we would need to create the following types</p>
<ul>
<li><code>IMovementStrategy</code> ‚Äì an interface that lists the different kinds of movements that can be done (currently <code>MoveForward</code>, <code>MoveBackward</code>, and <code>TurnLeft</code>)</li>
<li><code>NorthMovementStrategy</code> ‚Äì a new class that implements the <code>IMovementStrategy</code> and is responsible for the various business rules when moving and facing <code>North</code></li>
<li><code>GetMovementStrategy</code> ‚Äì a method in <code>Rover</code> that for the current <code>Orientation</code>, returns the right implementation of <code>IMovementStrategy</code></li>
<li>Update the existing move methods to use <code>GetMovementStrategy</code></li>
</ul>
<p>First, let‚Äôs take a look at the <code>IMovementStrategy</code> definition</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span>
<span class="normal"><a href="#__codelineno-20-5">5</a></span>
<span class="normal"><a href="#__codelineno-20-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="k">internal</span><span class="w"> </span><span class="nf">IMovementStrategy</span><span class="p">()</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="p">{</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">  </span><span class="n">Coordinate</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">(</span><span class="n">Coordinate</span><span class="w"> </span><span class="n">coordinate</span><span class="p">);</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">  </span><span class="n">Coordinate</span><span class="w"> </span><span class="nf">MoveBackward</span><span class="p">(</span><span class="n">Coordinate</span><span class="w"> </span><span class="n">coordinate</span><span class="p">);</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">  </span><span class="n">Direction</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The key takeaway for this type is that if we need to add an additional movement (like <code>TurnRight</code>), we‚Äôll need to update this interface. Taking a closer look, we‚Äôve defined the signatures for all of the methods to return a value (either a <code>Location</code> or a <code>Direction</code>). We have to make this change because no <code>Strategy</code> will have access to the <code>Rover</code> itself, so it‚Äôll need to return the correct value for <code>Rover</code> to hold onto.</p>
<p>Next, let‚Äôs take a look at an example implementation for when the <code>Orientation</code> is <code>North</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span>
<span class="normal"><a href="#__codelineno-21-13">13</a></span>
<span class="normal"><a href="#__codelineno-21-14">14</a></span>
<span class="normal"><a href="#__codelineno-21-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="k">internal</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">NorthMovementStrategy</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IMovementStrategy</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="p">{</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">(</span><span class="n">Coordinate</span><span class="w"> </span><span class="n">coordinate</span><span class="p">)</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">coordinate</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="nf">MoveBackward</span><span class="p">(</span><span class="n">Coordinate</span><span class="w"> </span><span class="n">coordinate</span><span class="p">)</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">coordinate</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">()</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
<a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>If you look closer, we‚Äôve essentially moved the business rules for the three methods from the existing business rules. We would repeat this process for the other <code>Direction</code>s (yielding a <code>SouthMovementStrategy</code>, an <code>EastMovementStrategy</code>, and a <code>WestMovementStrategy</code>)</p>
<p>Now that we have the various strategies in place, we can create the <code>GetMovementStrategy</code> method</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">private</span><span class="w"> </span><span class="n">IMovementStrategy</span><span class="w"> </span><span class="nf">GetStrategy</span><span class="p">()</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="p">{</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">NorthMovementStrategy</span><span class="p">();</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">SouthMovementStrategy</span><span class="p">();</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">EastMovementStrategy</span><span class="p">();</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">WestMovementStrategy</span><span class="p">();</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Which then would allow us to refactor <code>TurnLeft</code> as the following</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span>
<span class="normal"><a href="#__codelineno-23-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">()</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="p">{</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">movementStrategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetMovementStrategy</span><span class="p">();</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">  </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">movementStrategy</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And <code>MoveForward</code> as</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span>
<span class="normal"><a href="#__codelineno-24-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="p">{</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">movementStrategy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetMovementStrategy</span><span class="p">();</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">  </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">movementStrategy</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">(</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h5 id="advantages_1"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#advantages_1">Advantages</a></h5>
<p>When using this approach, we can easily extend functionality when new <code>Direction</code>s are added. For example, if we added <code>NorthEast</code>, then we would create a new <code>MovementStrategy</code>, have it implement the interface and fill in business rules (also allowing us to easily add tests as we go). From there, we would update the <code>GetMovementStrategy</code> method to return the new strategy. By adding new functionality by primarily writing new code and making very little modifications to existing code, we can adhere to the Open/Closed Principle from SOLID design.</p>
<h5 id="drawbacks_1"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#drawbacks_1">Drawbacks</a></h5>
<p>The major drawback of this approach is that we had to create a lot of boilerplate code to make everything hang. One interface, four implementations, and a factory method for creating the appropriate strategy for a given <code>Orientation</code>.</p>
<p>The other, more subtle, drawback is that one must be aware of the pivot point of change. For example, we originally made this refactor based on strategies of what to do when faced in a given <code>Direction</code>. This made sense as an easy refactor. However, we‚Äôve now made it easy to support a new <code>Direction</code> when added, but if we were to add a new <code>Command</code> instead, we would update the <code>IMovementStrategy</code> with the new method which would break all implementations. Once that happens, we have no choice but to implement the whole feature at once.</p>
<p>Personally, I‚Äôm a proponent of delivering value in small chunks and verify that we‚Äôre building the right thing, but in this case, this approach doesn‚Äôt make that easy.</p>
<h4 id="start-the-refactor"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#start-the-refactor">Start the Refactor</a></h4>
<p>Given the above options, I‚Äôm going to choose the more functional approach mostly because the business rules in my case are one-liners. If they were more complex, then I‚Äôd lean heavily more towards the <code>Strategy</code> pattern.</p>
<p>With that in mind, I‚Äôm going to go ahead and define the general <code>Execute</code> method as such</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span>
<span class="normal"><a href="#__codelineno-25-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Execute</span><span class="p">(</span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="p">)</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="p">{</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="w">    </span><span class="n">ifNorth</span><span class="p">();</span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="w">    </span><span class="n">ifSouth</span><span class="p">();</span>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="w">    </span><span class="n">ifEast</span><span class="p">();</span>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-25-12" name="__codelineno-25-12"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-13" name="__codelineno-25-13"></a><span class="w">    </span><span class="n">ifWest</span><span class="p">();</span>
<a id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-25-15" name="__codelineno-25-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Once that‚Äôs in place, I can go ahead and refactor <code>TurnLeft</code> to use the <code>Execute</code> method.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span>
<span class="normal"><a href="#__codelineno-26-4">4</a></span>
<span class="normal"><a href="#__codelineno-26-5">5</a></span>
<span class="normal"><a href="#__codelineno-26-6">6</a></span>
<span class="normal"><a href="#__codelineno-26-7">7</a></span>
<span class="normal"><a href="#__codelineno-26-8">8</a></span>
<span class="normal"><a href="#__codelineno-26-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">()</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="p">{</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orienation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">;</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">;</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">  </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now that I‚Äôve updated <code>TurnLeft</code>, I can run the tests to make sure I didn‚Äôt break functionality. This is where the power of automated tests come to play. I can have higher confidence that my refactor didn‚Äôt break anything because of the test suite.</p>
<p>After verifying  that the tests pass for <code>TurnLeft</code>, I‚Äôll continue refactoring <code>MoveForward</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span>
<span class="normal"><a href="#__codelineno-27-4">4</a></span>
<span class="normal"><a href="#__codelineno-27-5">5</a></span>
<span class="normal"><a href="#__codelineno-27-6">6</a></span>
<span class="normal"><a href="#__codelineno-27-7">7</a></span>
<span class="normal"><a href="#__codelineno-27-8">8</a></span>
<span class="normal"><a href="#__codelineno-27-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="p">{</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="w">  </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>and <code>MoveBackward</code> using the same technique</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span>
<span class="normal"><a href="#__codelineno-28-18">18</a></span>
<span class="normal"><a href="#__codelineno-28-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="p">{</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">  </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="p">}</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveBackward</span><span class="p">()</span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="p">{</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="w">  </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a>
<a id="__codelineno-28-18" name="__codelineno-28-18"></a><span class="w">  </span><span class="n">Execute</span><span class="p">(</span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">ifWest</span><span class="p">);</span>
<a id="__codelineno-28-19" name="__codelineno-28-19"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="one-final-touch"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#one-final-touch">One Final Touch</a></h3>
<p>So at this point, we‚Äôve successfully refactored <code>MoveForward</code>, <code>MoveBackward</code>, and <code>TurnLeft</code> to use <code>Execute</code> instead of their own logic, but the more I look at <code>Execute</code>, the more I want to convert the <code>if/else</code> into a <code>switch</code> statement because a <code>switch</code> is going to force us to implement the different <code>Direction</code>s whereas the <code>if/else</code> pattern did not. So let‚Äôs go ahead and make that change.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Execute</span><span class="p">(</span><span class="n">Action</span><span class="w"> </span><span class="n">ifNorth</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifEast</span><span class="p">,</span><span class="w"> </span><span class="n">Action</span><span class="w"> </span><span class="n">ifWest</span><span class="p">)</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="p">{</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">  </span><span class="k">switch</span><span class="p">(</span><span class="n">Orientation</span><span class="p">)</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">:</span><span class="w"> </span><span class="n">ifNorth</span><span class="p">();</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">:</span><span class="w"> </span><span class="n">ifSouth</span><span class="p">();</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">:</span><span class="w"> </span><span class="n">ifEast</span><span class="p">();</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">:</span><span class="w"> </span><span class="n">ifWest</span><span class="p">();</span><span class="w"> </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And we can verify that our refactored worked like a top!</p>
<h3 id="wrapping-up"><a class="toclink" href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/#wrapping-up">Wrapping Up</a></h3>
<p>At this point, we‚Äôve made some good changes to the <code>Rover</code> with how the various methods work by examining the duplication (the <code>if/else</code>), extracting the duplication to a single area, and the compared the functional approach and the OOP approach via the Strategy pattern. In the next post, we‚Äôll take on implementing <code>TurnRight</code> and see how our new refactor works in practice when adding new functionality!</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-23 00:00:00+00:00">Jun 23, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Learning Through Example</a></li>
        
        
          
          <li class="md-meta__item">
            
              9 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="mars-rover-implementing-rover-turning-left"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/">Mars Rover ‚Äì Implementing Rover : Turning Left</a></h2>
<p>Welcome to the seventh installment of Learning Through Example ‚Äì Mars Rover! In this post, we‚Äôre going to start driving out the functionality for the <code>Rover</code> and the business rules for turning left! First, we‚Äôll take a look at the requirements to make sure we have an idea of what‚Äôs needed. From there, we‚Äôll start implementing the requirements. By the end of this post, we‚Äôll have a <code>Rover</code> that can do 3/4 of the possible commands!</p>
<h3 id="turning-in-place-by-turning-left"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#turning-in-place-by-turning-left">Turning in Place By Turning Left</a></h3>
<p>If we look back at the original <a href="../../2020/05/20/mars-rover---defining-the-problem/#problem-description">requirements</a> for turning left, we find this single line as the requirement</p>
<blockquote>
<p>When the rover is told to turn left, it will rotate 90 degrees to the left, but not change its location</p>
</blockquote>
<p>Given this requirement, we‚Äôre able to double check with our Subject Matter Expert that the <code>Rover</code> is essentially rotating in place which yields the following requirements.</p>
<ul>
<li>Given the <code>Rover</code> is facing <code>North</code>, when it turns left, then the <code>Rover</code> should be facing <code>West</code> at the same Coordinate</li>
<li>Given the <code>Rover</code> is facing <code>West</code>, when it turns left, then the <code>Rover</code> should be facing <code>South</code> at the same Coordinate</li>
<li>Given the <code>Rover</code> is facing <code>South</code>, when it turns left, then the <code>Rover</code> should be facing <code>East</code> at the same Coordinate</li>
<li>Given the <code>Rover</code> is facing <code>East</code>, when it turns left, then the <code>Rover</code> should be facing <code>North</code> at the same Coordinate</li>
</ul>
<p>Even though we‚Äôve not written tests that have this exact setup, it looks like we should be able to use that as a start while we‚Äôre implementing. So let‚Äôs go ahead tackle the first requirement!</p>
<h3 id="redgreenrefactor-for-rover-facing-north"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#redgreenrefactor-for-rover-facing-north">Red/Green/Refactor For Rover Facing North</a></h3>
<p>Leaning on lessons learned previously, we can write the following test for when the <code>Rover</code> is facing <code>North</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="na">[Test]</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenTheRoverFacesWest</span><span class="p">()</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="p">{</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="o">=</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">};</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Not too bad of a setup! First, we create the <code>Rover</code> and capture its <code>initialLocation</code>. From there, we call our new method, <code>TurnLeft</code> which doesn‚Äôt exist yet, but will soon. After <code>TurnLeft</code> has been called, we check to make sure that our <code>Location</code> is the same and that our <code>Orientation</code> has been updated accordingly.</p>
<p>Now let‚Äôs write just enough code to pass.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span>
<span class="normal"><a href="#__codelineno-13-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">()</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="p">{</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Pretty straightforward implementation and is good enough to make the test pass. Not much to refactor at this point so let‚Äôs go ahead and work on the next test case.</p>
<h3 id="redgreenrefactor-for-rover-facing-west"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#redgreenrefactor-for-rover-facing-west">Red/Green/Refactor For Rover Facing West</a></h3>
<p>For the next test, let‚Äôs go ahead and write one for when the <code>Rover</code> faces <code>West</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="na">[Test]</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingWestThenTheRoverFacesSouth</span><span class="p">()</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="p">{</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="o">=</span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">};</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And now enough code to make it pass</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span>
<span class="normal"><a href="#__codelineno-15-5">5</a></span>
<span class="normal"><a href="#__codelineno-15-6">6</a></span>
<span class="normal"><a href="#__codelineno-15-7">7</a></span>
<span class="normal"><a href="#__codelineno-15-8">8</a></span>
<span class="normal"><a href="#__codelineno-15-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">()</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="p">{</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">;</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Once again, now that we have passing tests, is there anything we want to refactor? The business rules look to be simple enough so I don‚Äôt feel the need to refactor those. When we look at the test code, the test seems straightforward and I‚Äôm not sure what I‚Äôd simplify.</p>
<p>Time to commit these changes and on to the next requirement.</p>
<h3 id="redgreenrefactor-for-rover-facing-south"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#redgreenrefactor-for-rover-facing-south">Red/Green/Refactor For Rover Facing South</a></h3>
<p>Third verse same as the first, we can write a failing test for when the <code>Rover</code> faces <code>South</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="na">[Test]</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingSouthThenTheRoverFacesEast</span><span class="p">()</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="p">{</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="o">=</span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">};</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And now enough code to make it pass</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">()</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">;</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">;</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With everything passing again, we can pause to rethink about refactoring but so far so good from my perspective. There are maybe some superficial changes that could be made, but I can‚Äôt make a strong enough argument to implement them.</p>
<p>Time to commit and tackle the last requirement!</p>
<h3 id="redgreenrefactor-for-rover-facing-east"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#redgreenrefactor-for-rover-facing-east">Red/Green/Refactor for Rover Facing East</a></h3>
<p>Let‚Äôs go ahead and write the final test for when the <code>Rover</code> faces <code>East</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="na">[Test]</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingEastThenTheRoverFacesNorth</span><span class="p">()</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="p">{</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="o">=</span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">};</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And now enough code to make it pass</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TurnLeft</span><span class="p">()</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="p">{</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">;</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">;</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">;</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="there-seems-to-be-a-pattern"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#there-seems-to-be-a-pattern">There Seems To Be a Pattern</a></h3>
<p>Now that we have a few tests in place, it seems like all of the tests are following a pretty straightforward pattern:</p>
<ol>
<li>Create a <code>Rover</code> with a particular <code>Orientation</code></li>
<li>Get the starting <code>Location</code></li>
<li>Call <code>TurnLeft</code></li>
<li>Verify that the <code>Location</code> didn‚Äôt change</li>
<li>Verify that the <code>Orientation</code> is correct</li>
</ol>
<h4 id="parameterized-testing"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#parameterized-testing">Parameterized Testing</a></h4>
<p>When I find myself writing tests where the tests look exactly the same and the only difference is the initial data and expected output, then I start thinking about how to parameterize the test so that the test is run multiple times, but with different parameters. By making this change, we reduce the amount of test code written, without sacrificing readability or maintainability.</p>
<h4 id="when-to-not-parameterize"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#when-to-not-parameterize">When To Not Parameterize</a></h4>
<p>It seems like it would be easy to write tests in this fashion, so why don‚Äôt we use this technique all the time?</p>
<p>The primary reason why we wouldn‚Äôt want to use this approach is if we would need to pass in a ton of parameters in order to make this test generic enough. A general guideline I use is that if the total parameters are three or less, then parameterization is a good fit. However, if I find out that I need to pass in more than three parameters, it makes me wonder if the tests are really the same test at all.</p>
<p>A secondary reason why this approach may not be a good fit is if it clouds our readability and debug-ability of the tests. Recall that our tests help us drive out our requirements and helps us talk in a ubiquitous language. If we can no longer do that easily, then we should not parameterize our tests.</p>
<h3 id="refactoring"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#refactoring">Refactoring</a></h3>
<p>With all of that said, let‚Äôs take a look at our tests for <code>WhenTurningLeft</code> and see what each of the tests have in common.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span>
<span class="normal"><a href="#__codelineno-20-17">17</a></span>
<span class="normal"><a href="#__codelineno-20-18">18</a></span>
<span class="normal"><a href="#__codelineno-20-19">19</a></span>
<span class="normal"><a href="#__codelineno-20-20">20</a></span>
<span class="normal"><a href="#__codelineno-20-21">21</a></span>
<span class="normal"><a href="#__codelineno-20-22">22</a></span>
<span class="normal"><a href="#__codelineno-20-23">23</a></span>
<span class="normal"><a href="#__codelineno-20-24">24</a></span>
<span class="normal"><a href="#__codelineno-20-25">25</a></span>
<span class="normal"><a href="#__codelineno-20-26">26</a></span>
<span class="normal"><a href="#__codelineno-20-27">27</a></span>
<span class="normal"><a href="#__codelineno-20-28">28</a></span>
<span class="normal"><a href="#__codelineno-20-29">29</a></span>
<span class="normal"><a href="#__codelineno-20-30">30</a></span>
<span class="normal"><a href="#__codelineno-20-31">31</a></span>
<span class="normal"><a href="#__codelineno-20-32">32</a></span>
<span class="normal"><a href="#__codelineno-20-33">33</a></span>
<span class="normal"><a href="#__codelineno-20-34">34</a></span>
<span class="normal"><a href="#__codelineno-20-35">35</a></span>
<span class="normal"><a href="#__codelineno-20-36">36</a></span>
<span class="normal"><a href="#__codelineno-20-37">37</a></span>
<span class="normal"><a href="#__codelineno-20-38">38</a></span>
<span class="normal"><a href="#__codelineno-20-39">39</a></span>
<span class="normal"><a href="#__codelineno-20-40">40</a></span>
<span class="normal"><a href="#__codelineno-20-41">41</a></span>
<span class="normal"><a href="#__codelineno-20-42">42</a></span>
<span class="normal"><a href="#__codelineno-20-43">43</a></span>
<span class="normal"><a href="#__codelineno-20-44">44</a></span>
<span class="normal"><a href="#__codelineno-20-45">45</a></span>
<span class="normal"><a href="#__codelineno-20-46">46</a></span>
<span class="normal"><a href="#__codelineno-20-47">47</a></span>
<span class="normal"><a href="#__codelineno-20-48">48</a></span>
<span class="normal"><a href="#__codelineno-20-49">49</a></span>
<span class="normal"><a href="#__codelineno-20-50">50</a></span>
<span class="normal"><a href="#__codelineno-20-51">51</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="na">[TestFixture]</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">WhenTurningLeft</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="p">{</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenTheRoverFacesWest</span><span class="p">()</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="hll"><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="o">=</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">};</span>
</span><a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="hll"><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
</span><a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-20-15" name="__codelineno-20-15"></a>
<a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-20-17" name="__codelineno-20-17"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingWestThenTheRoverFacesSouth</span><span class="p">()</span>
<a id="__codelineno-20-18" name="__codelineno-20-18"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-20-19" name="__codelineno-20-19"></a><span class="hll"><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="o">=</span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">};</span>
</span><a id="__codelineno-20-20" name="__codelineno-20-20"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-20-21" name="__codelineno-20-21"></a>
<a id="__codelineno-20-22" name="__codelineno-20-22"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-20-23" name="__codelineno-20-23"></a>
<a id="__codelineno-20-24" name="__codelineno-20-24"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-20-25" name="__codelineno-20-25"></a><span class="hll"><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
</span><a id="__codelineno-20-26" name="__codelineno-20-26"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-20-27" name="__codelineno-20-27"></a>
<a id="__codelineno-20-28" name="__codelineno-20-28"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-20-29" name="__codelineno-20-29"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingSouthThenTheRoverFacesEast</span><span class="p">()</span>
<a id="__codelineno-20-30" name="__codelineno-20-30"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-20-31" name="__codelineno-20-31"></a><span class="hll"><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="o">=</span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">};</span>
</span><a id="__codelineno-20-32" name="__codelineno-20-32"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-20-33" name="__codelineno-20-33"></a>
<a id="__codelineno-20-34" name="__codelineno-20-34"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-20-35" name="__codelineno-20-35"></a>
<a id="__codelineno-20-36" name="__codelineno-20-36"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-20-37" name="__codelineno-20-37"></a><span class="hll"><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
</span><a id="__codelineno-20-38" name="__codelineno-20-38"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-20-39" name="__codelineno-20-39"></a>
<a id="__codelineno-20-40" name="__codelineno-20-40"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-20-41" name="__codelineno-20-41"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingEastThenTheRoverFacesNorth</span><span class="p">()</span>
<a id="__codelineno-20-42" name="__codelineno-20-42"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-20-43" name="__codelineno-20-43"></a><span class="hll"><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="o">=</span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">};</span>
</span><a id="__codelineno-20-44" name="__codelineno-20-44"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-20-45" name="__codelineno-20-45"></a>
<a id="__codelineno-20-46" name="__codelineno-20-46"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-20-47" name="__codelineno-20-47"></a>
<a id="__codelineno-20-48" name="__codelineno-20-48"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-20-49" name="__codelineno-20-49"></a><span class="hll"><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
</span><a id="__codelineno-20-50" name="__codelineno-20-50"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-20-51" name="__codelineno-20-51"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>If we examine a bit closer, we‚Äôll notice that the only differences are the starting <code>Orientation</code> and the expected <code>Orientation</code>. Since those are the only values that we would need to parameterize, this is a great candidate for parameterization!</p>
<p>So starting off slow, we‚Äôre going to refactor the <code>AndFacingEastThenTheRoverFacesNorth</code> test to use NUnit‚Äôs <a href="https://github.com/nunit/docs/wiki/TestCase-Attribute">TestCase attribute</a> to pass in the parameters. Even though we‚Äôre using NUnit for this functionality, most test frameworks support this concept, just with different syntax.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="na">[Test]</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="hll"><span class="na">[TestCase(Direction.East, Direction.North, TestName = &quot;AndFacingEastThenTheRoverFacesNorth&quot;)]</span>
</span><a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="hll"><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">RoverTurningLeft</span><span class="p">(</span><span class="n">Direction</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span>
</span><a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="p">{</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="hll"><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">};</span>
</span><a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="hll"><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
</span><a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With these changes in place, let‚Äôs break down what our approach was.</p>
<p>First, we added the <code>TestCase</code> attribute to the test as this allows us to specify parameters. In this case, we‚Äôre passing in two parameters (<code>Direction.East</code> and <code>Direction.North</code>). In addition, we‚Äôre also giving this <code>TestCase</code> a unique test name by setting the <code>TestName</code> property to <code>AndFacingEastThenTheRoverFacesNorth</code>. By setting this property, we‚Äôre controlling what this test will show up in the test runner.</p>
<p>Second, we changed the signature of the test method to take in two <code>Direction</code>s, one for the <code>start</code> and the other for the <code>expected</code> direction for <code>Rover</code>. These new parameters line up with the ordering of parameters in the <code>TestCase</code>. In addition, since this test is going to be a bit more generic, I renamed this method to <code>RoverTurningLeft</code> because the <code>TestName</code> is going to have my requirement and this method is the generic shell.</p>
<p>Finally, we updated how we initialized the <code>Rover</code> by setting it‚Äôs <code>Orientation</code> to be <code>start</code> and we changed our <code>Assert</code> to be on <code>expected</code>.</p>
<h3 id="verifying-the-changes"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#verifying-the-changes">Verifying The Changes</a></h3>
<p>With this new test in place, let‚Äôs run it and verify that our changes worked</p>
<figure>
<p><img alt="Single test passing for when rover faces north)" src="https://softwarementorblog.blob.core.windows.net/images/turn-left-test-case-refactor.png" />
  </p>
<figcaption>Single test passing for when Rover faces North</figcaption>
</figure>
<p>Nice! Let‚Äôs go ahead and add additional TestCase attributes for the other tests</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="na">[Test]</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="hll"><span class="na">[TestCase(Direction.North, Direction.West, TestName = &quot;AndFacingNorthThenTheRoverFacesWest&quot;)]</span>
</span><a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="hll"><span class="na">[TestCase(Direction.West, Direction.South, TestName = &quot;AndFacingWestThenTheRoverFacesSouth&quot;)]</span>
</span><a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="hll"><span class="na">[TestCase(Direction.South, Direction.East, TestName = &quot;AndFacingSouthThenTheRoverFacesEast&quot;)]</span>
</span><a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="na">[TestCase(Direction.East, Direction.North, TestName = &quot;AndFacingEastThenTheRoverFacesNorth&quot;)]</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">RoverTurningLeft</span><span class="p">(</span><span class="n">Direction</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="p">{</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And if we run our test suite, we verify that everything passes!</p>
<figure>
<p><img alt="Full test suite passing)" src="https://softwarementorblog.blob.core.windows.net/images/turn-left-test-case-full-refactor.png" />
  </p>
<figcaption>All four tests passing</figcaption>
</figure>
<p>With this in place, we can remove the other tests in this file, which yields the following test class.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span>
<span class="normal"><a href="#__codelineno-23-13">13</a></span>
<span class="normal"><a href="#__codelineno-23-14">14</a></span>
<span class="normal"><a href="#__codelineno-23-15">15</a></span>
<span class="normal"><a href="#__codelineno-23-16">16</a></span>
<span class="normal"><a href="#__codelineno-23-17">17</a></span>
<span class="normal"><a href="#__codelineno-23-18">18</a></span>
<span class="normal"><a href="#__codelineno-23-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="na">[TestFixture]</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">WhenTurningLeft</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="p">{</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">  </span><span class="na">[TestCase(Direction.North, Direction.West, TestName = &quot;AndFacingNorthThenTheRoverFacesWest&quot;)]</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">  </span><span class="na">[TestCase(Direction.West, Direction.South, TestName = &quot;AndFacingWestThenTheRoverFacesSouth&quot;)]</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">  </span><span class="na">[TestCase(Direction.South, Direction.East, TestName = &quot;AndFacingSouthThenTheRoverFacesEast&quot;)]</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">  </span><span class="na">[TestCase(Direction.East, Direction.North, TestName = &quot;AndFacingEastThenTheRoverFacesNorth&quot;)]</span>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">RoverTurningLeft</span><span class="p">(</span><span class="n">Direction</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span>
<a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-23-13" name="__codelineno-23-13"></a>
<a id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">TurnLeft</span><span class="p">();</span>
<a id="__codelineno-23-15" name="__codelineno-23-15"></a>
<a id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-23-19" name="__codelineno-23-19"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Already we can see how easy it would be to extend this test suite if a new <code>Direction</code> were to be added by adding the new <code>TestCase</code> and updating the other ones as needed.</p>
<h3 id="wrapping-up"><a class="toclink" href="../../2020/06/23/mars-rover--implementing-rover--turning-left/#wrapping-up">Wrapping Up</a></h3>
<p>Goodness, just like that we have a <code>Rover</code> that knows how to <code>MoveForward</code>, <code>MoveBackward</code>, and <code>TurnLeft</code>! In this post, we added some new functionality to <code>Rover</code> by first examining the requirements and implementing them one at a time. From there, we noticed during our refactor step that our test code looked similar, just differing on inputs. This, in turn, inspired us to look at parameterized testing which allowed us to drastically reduce the amount of code needed for the various use cases and allows us to add additional cases easier in the future. In the next post, we start taking a look at some interesting patterns that <code>Rover</code> is exhibiting in its three methods.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-16 00:00:00+00:00">Jun 16, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Learning Through Example</a></li>
        
        
          
          <li class="md-meta__item">
            
              6 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="mars-rover-implementing-rover-moving-backward"><a class="toclink" href="../../2020/06/16/mars-rover--implementing-rover--moving-backward/">Mars Rover ‚Äì Implementing Rover : Moving Backward</a></h2>
<p>Welcome to the sixth installment of Learning Through Example ‚Äì Mars Rover! In this post, we‚Äôll pick up from where we left off with <code>Rover</code> and start implementing the rules for the <code>Rover</code> to move backward!</p>
<p>Just like last time, we‚Äôll first examine what it means for the <code>Rover</code> to move backward by looking over the requirements in deeper detail. Once we have a better understanding, we‚Äôll start driving out the functionality by focusing on a simple case and building more complexity. By the end of this post, we‚Äôll have a <code>Rover</code> that will know how to move backward when facing any <code>Direction</code>!</p>
<h3 id="so-what-does-it-mean-to-move-backward"><a class="toclink" href="../../2020/06/16/mars-rover--implementing-rover--moving-backward/#so-what-does-it-mean-to-move-backward">So What Does It Mean To Move Backward?</a></h3>
<p>If we look back at the original <a href="../../2020/05/20/mars-rover---defining-the-problem/#problem-description">requirements</a> for moving backward, we find this single line with regards to moving backward</p>
<blockquote>
<p>When the rover is told to move backward, then it will move rover unit away from the direction it‚Äôs facing</p>
</blockquote>
<p>Hmm, based on our previous experience with implementing <code>MoveForward</code>, I have a good idea of the requirements and after double-checking with our Subject Matter Expert, we confirm that our assumption is correct and derive the following requirements.</p>
<ul>
<li>Given the <code>Rover</code> is facing North, when it moves forward, then its <code>Y</code> value decreases by 1</li>
<li>Given the <code>Rover</code> is facing South, when it moves forward, then its <code>Y</code> value increases by 1</li>
<li>Given the <code>Rover</code> is facing East, when it moves forward, then its <code>X</code> value decreases by 1</li>
<li>Given the <code>Rover</code> is facing East, when it moves forward, then its <code>X</code> value increases by 1</li>
</ul>
<p>Great, we have enough information to get started so we can start demonstrating the software and get quicker feedback!</p>
<h3 id="redgreenrefactor-for-rover-facing-north"><a class="toclink" href="../../2020/06/16/mars-rover--implementing-rover--moving-backward/#redgreenrefactor-for-rover-facing-north">Red/Green/Refactor For Rover Facing North</a></h3>
<p>Given the lessons learned when writing tests for when implementing move forward, we can write the following test.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="na">[Test]</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenYDecreasesByOne</span><span class="p">()</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="p">{</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveBackward</span><span class="p">();</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now let‚Äôs write just enough code to pass.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveBackward</span><span class="p">()</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Not too shabby, we‚Äôve got enough code in place to make everything pass so let‚Äôs take a look at refactoring. From the business rules, <code>MoveBackward</code> is too simple to need a refactor, though I have a suspicion about what the final look of the method will look like. From the test code, the test is pretty straightforward and looks a ton like the tests we wrote for <code>MoveForward</code>.</p>
<p>With all of that in mind, let‚Äôs go ahead and commit these changes and go to the next requirement!</p>
<h3 id="redgreenrefactor-for-rover-facing-south"><a class="toclink" href="../../2020/06/16/mars-rover--implementing-rover--moving-backward/#redgreenrefactor-for-rover-facing-south">Red/Green/Refactor For Rover Facing South</a></h3>
<p>Once again, we can write a failing test for when the <code>Rover</code> faces <code>South</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-11-10">10</a></span>
<span class="normal"><a href="#__codelineno-11-11">11</a></span>
<span class="normal"><a href="#__codelineno-11-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="na">[Test]</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingSouthThenYIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="p">{</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveBackward</span><span class="p">();</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And now enough code to make it pass</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span>
<span class="normal"><a href="#__codelineno-12-5">5</a></span>
<span class="normal"><a href="#__codelineno-12-6">6</a></span>
<span class="normal"><a href="#__codelineno-12-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveBackward</span><span class="p">()</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="p">{</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="w">    </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="w">  </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Once again, now that we have passing tests, is there anything we want to refactor? The business rules look to be simple enough so I don‚Äôt feel the need to refactor those. When we look at the test code, the test seems straightforward and I‚Äôm not sure what I‚Äôd simplify.</p>
<p>Time to commit these changes and on to the next requirement.</p>
<h3 id="redgreenrefactor-for-rover-facing-east"><a class="toclink" href="../../2020/06/16/mars-rover--implementing-rover--moving-backward/#redgreenrefactor-for-rover-facing-east">Red/Green/Refactor For Rover Facing East</a></h3>
<p>Third verse same as the first, we can write a failing test for when the Rover faces East</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="na">[Test]</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingEastThenXDecreasesByOne</span><span class="p">()</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="p">{</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveBackward</span><span class="p">();</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="p">);</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And now enough code to make it pass</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveBackward</span><span class="p">()</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">  </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With everything passing again, we can pause to rethink about refactoring but so far so good from my perspective. There are maybe some superficial changes that could be made, but I can‚Äôt make a strong enough argument to implement them.</p>
<p>Time to commit and tackle the last requirement!</p>
<h3 id="redgreenrefactor-for-rover-facing-west"><a class="toclink" href="../../2020/06/16/mars-rover--implementing-rover--moving-backward/#redgreenrefactor-for-rover-facing-west">Red/Green/Refactor for Rover Facing West</a></h3>
<p>Let‚Äôs go ahead and write the final test for when the <code>Rover</code> faces West</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="na">[Test]</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingWestThenXIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="p">{</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveBackward</span><span class="p">();</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">(</span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="p">);</span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And now enough code to make it pass</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveBackward</span><span class="p">()</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="how-does-rover-look"><a class="toclink" href="../../2020/06/16/mars-rover--implementing-rover--moving-backward/#how-does-rover-look">How Does Rover Look?</a></h3>
<p>With the final test in place, let‚Äôs take a look at <code>Rover</code> looks like!</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span>
<span class="normal"><a href="#__codelineno-17-21">21</a></span>
<span class="normal"><a href="#__codelineno-17-22">22</a></span>
<span class="normal"><a href="#__codelineno-17-23">23</a></span>
<span class="normal"><a href="#__codelineno-17-24">24</a></span>
<span class="normal"><a href="#__codelineno-17-25">25</a></span>
<span class="normal"><a href="#__codelineno-17-26">26</a></span>
<span class="normal"><a href="#__codelineno-17-27">27</a></span>
<span class="normal"><a href="#__codelineno-17-28">28</a></span>
<span class="normal"><a href="#__codelineno-17-29">29</a></span>
<span class="normal"><a href="#__codelineno-17-30">30</a></span>
<span class="normal"><a href="#__codelineno-17-31">31</a></span>
<span class="normal"><a href="#__codelineno-17-32">32</a></span>
<span class="normal"><a href="#__codelineno-17-33">33</a></span>
<span class="normal"><a href="#__codelineno-17-34">34</a></span>
<span class="normal"><a href="#__codelineno-17-35">35</a></span>
<span class="normal"><a href="#__codelineno-17-36">36</a></span>
<span class="normal"><a href="#__codelineno-17-37">37</a></span>
<span class="normal"><a href="#__codelineno-17-38">38</a></span>
<span class="normal"><a href="#__codelineno-17-39">39</a></span>
<span class="normal"><a href="#__codelineno-17-40">40</a></span>
<span class="normal"><a href="#__codelineno-17-41">41</a></span>
<span class="normal"><a href="#__codelineno-17-42">42</a></span>
<span class="normal"><a href="#__codelineno-17-43">43</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Rover</span><span class="p">()</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">(){</span><span class="n">X</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="o">=</span><span class="mi">0</span><span class="p">};</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Direciton</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-21" name="__codelineno-17-21"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-17-22" name="__codelineno-17-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-23" name="__codelineno-17-23"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-24" name="__codelineno-17-24"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-17-25" name="__codelineno-17-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-26" name="__codelineno-17-26"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-27" name="__codelineno-17-27"></a>
<a id="__codelineno-17-28" name="__codelineno-17-28"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveBackward</span><span class="p">()</span>
<a id="__codelineno-17-29" name="__codelineno-17-29"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-17-30" name="__codelineno-17-30"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-31" name="__codelineno-17-31"></a><span class="w">      </span><span class="n">Location</span><span class="o">=</span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-17-32" name="__codelineno-17-32"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-33" name="__codelineno-17-33"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-34" name="__codelineno-17-34"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-17-35" name="__codelineno-17-35"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-36" name="__codelineno-17-36"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-37" name="__codelineno-17-37"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-17-38" name="__codelineno-17-38"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-39" name="__codelineno-17-39"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-40" name="__codelineno-17-40"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-17-41" name="__codelineno-17-41"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-42" name="__codelineno-17-42"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-43" name="__codelineno-17-43"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Overall, <code>Rover</code> is looking to be in a good spot, however, one thing that stands out is that <code>MoveForward</code> and <code>MoveBackward</code> look similar due to their matching <code>if</code> statements. When I see duplication like this, I start thinking about how possible refactoring techniques to reduce the duplication. However, it can be tough to see a pattern before it establishes.</p>
<h3 id="when-to-refactor"><a class="toclink" href="../../2020/06/16/mars-rover--implementing-rover--moving-backward/#when-to-refactor">When to Refactor</a></h3>
<p>When it comes to refactoring to a pattern, I like to have three or more examples so I have a better idea of what use cases need to be supported. A common mistake I see developers make is that they start implementing a pattern before really understanding the problem. My approach is to refactor to a pattern when it makes sense and not before.</p>
<p>Circling back to this duplicated ifs, I‚Äôve got a hunch that <code>TurnLeft</code> and <code>TurnRight</code> will follow a similar approach but I‚Äôm curious to know what they‚Äôre going to look like and I don‚Äôt want to refactor too early. So taking my own advice, I‚Äôm going to go ahead and skip refactoring <code>MoveForward</code> and <code>MoveBackward</code> until I at implement <code>TurnLeft</code> as that may change my approach.</p>
<h3 id="wrapping-up"><a class="toclink" href="../../2020/06/16/mars-rover--implementing-rover--moving-backward/#wrapping-up">Wrapping Up</a></h3>
<p>Just like that, we now have a <code>Rover</code> that knows how to both <code>MoveForward</code> and <code>MoveBackward</code>! Like before, we first started by examining the requirements and coming up with our various test cases. From there, we were able to drive out the functionality by using red-green-refactor and building our software with tests. In the next post, we‚Äôll take a look at implementing the logic for turning left!</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-09 00:00:00+00:00">Jun 9, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Learning Through Example</a></li>
        
        
          
          <li class="md-meta__item">
            
              14 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="mars-rover-implementing-rover-moving-forward"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/">Mars Rover ‚Äì Implementing Rover : Moving Forward</a></h2>
<p>Welcome to the fifth installment of Learning Through Example ‚Äì Mars Rover! In this post, we‚Äôll pick up from where we left on with <code>Rover</code> and start digging into how to make it move forward! We‚Äôll first examine what it means for the <code>Rover</code> to move forward by looking over the requirements in deeper detail. Once we have a better understanding, we‚Äôll start driving out the functionality by focusing on a simple case and building more complexity. By the end of this post, we‚Äôll have a <code>Rover</code> that will know how to move forward when facing any <code>Direction</code>!</p>
<h3 id="so-what-does-it-mean-to-move-forward"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#so-what-does-it-mean-to-move-forward">So What Does It Mean To Move Forward?</a></h3>
<p>If we look back at the original <a href="../../2020/05/20/mars-rover---defining-the-problem/#problem-description">requirements</a> for moving forward, we find this single line with regards to moving forward</p>
<blockquote>
<p>When the rover is told to move forward, then it will move one rover unit in the direction it‚Äôs facing</p>
</blockquote>
<p>Super helpful, right? I don‚Äôt know about you, but this not nearly enough information for us to start our work because I‚Äôm not sure what that actually means!</p>
<p>In this case, we will have a more in-depth conversation with our Subject Matter Expert and we‚Äôll find out that depending on the <code>Orientation</code> of the <code>Rover</code> the <code>Rover</code>‚Äòs <code>Location</code> will change. Through additional conversations, we end up figuring out some more concrete business rules for when the <code>Rover</code> moves forward.</p>
<ul>
<li>Given the <code>Rover</code> is facing North, when it moves forward, then its <code>Y</code> value increases by 1</li>
<li>Given the <code>Rover</code> is facing South, when it moves forward, then its <code>Y</code> value decreases by 1</li>
<li>Given the <code>Rover</code> is facing East, when it moves forward, then its <code>X</code> value increases by 1</li>
<li>Given the <code>Rover</code> is facing East, when it moves forward, then its <code>X</code> value decreases by 1</li>
</ul>
<p>Great, we have enough information to get started so we can start demonstrating the software and get quicker feedback!</p>
<h3 id="writing-the-first-test"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#writing-the-first-test">Writing The First Test</a></h3>
<p>Let‚Äôs begin writing our first test for the <code>Rover</code> moving forward! We‚Äôll be leveraging the same naming guidelines mentioned in <a href="../../2020/05/26/mars-rover---intro-to-testing/">part three</a> to help make the use cases standout in our tests</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="na">[Test]</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenYIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="p">{</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">  </span><span class="c1">// Arrange</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">};</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="w">  </span><span class="c1">// Act</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="w">  </span><span class="c1">// Assert</span>
<a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Coordinate</span><span class="p">.</span><span class="n">Y</span><span class="p">);</span>
<a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>So far, so good! The test matches the intent behind the name and a new developer can see that we‚Äôve created a <code>Rover</code> facing <code>North</code>, called its <code>MoveForward</code> method and making sure that the <code>Y</code> property is 1.</p>
<p>If we try running the test, it will fail because <code>Rover</code> doesn‚Äôt have a <code>MoveForward</code> method, so let‚Äôs go ahead and write a simple implementation.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="p">{</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Even though there‚Äôs no business logic implemented, it‚Äôs enough code for our test to compile and if we run the test, the test fails because <code>Y</code> is not 1.</p>
<p>With that in mind, let‚Äôs go ahead and write the simplest thing that could work just to check our approach.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span>
<span class="normal"><a href="#__codelineno-28-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="p">{</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">  </span><span class="n">Location</span><span class="p">.</span><span class="n">Y</span><span class="o">+=</span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Hmm, when we try to compile this code though, we get the following error</p>
<figure>
<p><img alt="Compiler error when trying to update the Location's Y property)" src="https://softwarementorblog.blob.core.windows.net/images/mars-rover-struct-problem.png" />
  </p>
<figcaption>Compiler error when trying to update the Location's Y Property</figcaption>
</figure>
<p>What‚Äôs going on here?</p>
<h3 id="when-things-go-off-track"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#when-things-go-off-track">When Things Go Off Track</a></h3>
<p>The error is caused due to the interaction of <code>struct</code> and the <code>Location</code> property implementation. If you recall, <code>struct</code>s are value types which means when you assign them to a variable, the variable has its own <em>copy</em> of the <code>struct</code>, not the <em>reference</em>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span>
<span class="normal"><a href="#__codelineno-29-13">13</a></span>
<span class="normal"><a href="#__codelineno-29-14">14</a></span>
<span class="normal"><a href="#__codelineno-29-15">15</a></span>
<span class="normal"><a href="#__codelineno-29-16">16</a></span>
<span class="normal"><a href="#__codelineno-29-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="c1">// Let&#39;s create a location</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="kt">var</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="c1">// And now let&#39;s have newLocation have the same value, NOTE: This isn&#39;t a reference to location!</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="kt">var</span><span class="w"> </span><span class="n">newLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">location</span><span class="p">;</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="c1">// And if we check if both are equal, they are!</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">location</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">newLocation</span><span class="p">));</span><span class="w"> </span><span class="c1">// True</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="c1">// Now let&#39;s change location&#39;s X value</span>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="n">location</span><span class="p">.</span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a>
<a id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="c1">// That works just fine, but if we check what newLocation is, we see that it&#39;s stil (0, 0)</span>
<a id="__codelineno-29-14" name="__codelineno-29-14"></a><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;newLocation = ({newLocation.X}, {newLocation.Y})&quot;</span><span class="p">);</span>
<a id="__codelineno-29-15" name="__codelineno-29-15"></a>
<a id="__codelineno-29-16" name="__codelineno-29-16"></a><span class="c1">// Which means when we compare, they&#39;re not the same!</span>
<a id="__codelineno-29-17" name="__codelineno-29-17"></a><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">location</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">newLocation</span><span class="p">));</span><span class="w"> </span><span class="c1">// False</span>
</code></pre></div></td></tr></table></div>
<p>So what does that have to do with the <code>Location</code> property? Well, we‚Äôve defined it as an auto-property which is syntactic sugar for telling the compiler to generate a backing field for the property and to implement default <code>get</code> and <code>set</code> logic.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span>
<span class="normal"><a href="#__codelineno-30-14">14</a></span>
<span class="normal"><a href="#__codelineno-30-15">15</a></span>
<span class="normal"><a href="#__codelineno-30-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="c1">// Given this definition of Rover</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="p">{</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">}</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="p">}</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="c1">// This is syntactic sugar for the following</span>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="p">{</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">_location</span><span class="p">;</span>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Location</span>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="w">    </span><span class="k">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_location</span><span class="p">;</span>
<a id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="w">    </span><span class="k">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">_location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">;</span>
<a id="__codelineno-30-15" name="__codelineno-30-15"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-30-16" name="__codelineno-30-16"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>So the problem arises from how <code>get</code> is working. It‚Äôs returning the backing field which is going to be stored as a variable for use. Recall from above that when we do that type of assignment, we‚Äôre working on a copy of the value. So if we try to make changes to the copy, the changes won‚Äôt make it back to the backing field which in turn won‚Äôt ever update the <code>Location</code> property!</p>
<h3 id="getting-back-on-track"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#getting-back-on-track">Getting Back On Track</a></h3>
<p>So good job on the compiler letting us know that there‚Äôs a problem even if the message is a bit obscure! But how do we fix the problem? Well, to get the code to compile, instead of updating the <code>Y</code> property of <code>Location</code>, let‚Äôs go ahead and update the entire <code>Location</code> property instead.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span>
<span class="normal"><a href="#__codelineno-31-3">3</a></span>
<span class="normal"><a href="#__codelineno-31-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="p">{</span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">  </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And if we try to run our test, we find that it now passes, hooray!</p>
<h3 id="refactoring-the-code"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#refactoring-the-code">Refactoring The Code</a></h3>
<p>For those keeping track at home, we‚Äôre doing a pretty good job of following Test Drive Development (TDD) principles in that we first <em>wrote a failing test</em>, then <em>wrote enough code to make it pass</em>. The third step is to <em>refactor our code</em> (both production and test) to make it easier to work with or to make it more robust.</p>
<p>If we take a look at the <code>MoveForward</code> method, it‚Äôs pretty simple and there‚Äôs not much we can refactor there for now.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span>
<span class="normal"><a href="#__codelineno-32-3">3</a></span>
<span class="normal"><a href="#__codelineno-32-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="p">{</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">  </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="is-our-state-correct"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#is-our-state-correct">Is Our State Correct?</a></h3>
<p>So if our business code is pretty good, let‚Äôs take a look at our test and see what can be done.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="na">[Test]</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenYIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="p">{</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">  </span><span class="c1">// Arrange</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">};</span>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="w">  </span><span class="c1">// Act</span>
<a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-33-9" name="__codelineno-33-9"></a>
<a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="w">  </span><span class="c1">// Assert</span>
<a id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Coordinate</span><span class="p">.</span><span class="n">Y</span><span class="p">);</span>
<a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Looking at this code, one thing that stands out is that we‚Äôre checking that <code>Y</code> got updated, but we‚Äôre not verifying that <code>X</code> nor the <code>Orientation</code> didn‚Äôt change. In fact, if we change the implementation of <code>MoveForward</code> to set the X value to be 200 and change the <code>Orientation</code> to be <code>South</code>, the test would still pass and it clearly shouldn‚Äôt!</p>
<p>Thankfully, we can mediate this oversight by creating an <code>expectedLocation</code> which will have the expected <code>X</code> and <code>Y</code> values for the Rover. In addition, we‚Äôll update one <code>Assert</code> to use this new value and add another <code>Assert</code> to verify the <code>Orientation</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-34-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-34-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-34-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-34-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-34-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-34-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-34-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-34-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-34-10">10</a></span>
<span class="normal"><a href="#__codelineno-34-11">11</a></span>
<span class="normal"><a href="#__codelineno-34-12">12</a></span>
<span class="normal"><a href="#__codelineno-34-13">13</a></span>
<span class="normal"><a href="#__codelineno-34-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="na">[Test]</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenYIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="p">{</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="w">  </span><span class="c1">// Arrange</span>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">};</span>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a>
<a id="__codelineno-34-7" name="__codelineno-34-7"></a><span class="w">  </span><span class="c1">// Act</span>
<a id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-34-9" name="__codelineno-34-9"></a>
<a id="__codelineno-34-10" name="__codelineno-34-10"></a><span class="w">  </span><span class="c1">// Assert</span>
<a id="__codelineno-34-11" name="__codelineno-34-11"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<a id="__codelineno-34-12" name="__codelineno-34-12"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-34-13" name="__codelineno-34-13"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-34-14" name="__codelineno-34-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Nice! We‚Äôre now much more explicit about our expectations of <code>Rover</code> should be at this <em>exact</em> <code>Location</code> and should have this <em>exact</em> <code>Orientation</code>, otherwise, fail the test.</p>
<h3 id="are-there-hidden-assumptions"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#are-there-hidden-assumptions">Are There Hidden Assumptions?</a></h3>
<p>While looking at this test, there‚Äôs one more subtle issue with code, can you spot it?</p>
<p>We‚Äôre making an assumption about what the initial <code>Location</code> for the <code>Rover</code>! What if the <code>Rover</code> started off at (5, 5) instead of (0, 0)? This test would fail, but not for the right reason (an error in the production code), but due to fragility in the way the test was written.</p>
<p>If we wanted to harden this test, we have two approaches</p>
<h4 id="setting-the-location"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#setting-the-location">Setting the Location</a></h4>
<p>We could change our <code>Arrange</code> step to explicitly set the initial location of <code>Rover</code> to be (0, 0). This would guarantee the initial setup and if the default <code>Location</code> were to ever change, our test would still pass.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="na">[Test]</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenYIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="p">{</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="w">  </span><span class="c1">// Arrange</span>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">,</span>
<a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="hll"><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
</span><a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-35-10" name="__codelineno-35-10"></a>
<a id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="w">  </span><span class="c1">// Act</span>
<a id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-35-13" name="__codelineno-35-13"></a>
<a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="w">  </span><span class="c1">// Assert</span>
<a id="__codelineno-35-15" name="__codelineno-35-15"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<a id="__codelineno-35-16" name="__codelineno-35-16"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-35-17" name="__codelineno-35-17"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="capturing-the-initial-location"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#capturing-the-initial-location">Capturing the Initial Location</a></h4>
<p>When we look at this test and the code we‚Äôre testing, the key thing that we‚Äôre wanting to test is that the right value was modified correctly (in this case either by +1 or -1). Given that, we could update our <code>Arrange</code> step to capture what the initial <code>Location</code> was and then update our <code>Assert</code> step to know about the location.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-36-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-36-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-36-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-36-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-36-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-36-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-36-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-36-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-36-10">10</a></span>
<span class="normal"><a href="#__codelineno-36-11">11</a></span>
<span class="normal"><a href="#__codelineno-36-12">12</a></span>
<span class="normal"><a href="#__codelineno-36-13">13</a></span>
<span class="normal"><a href="#__codelineno-36-14">14</a></span>
<span class="normal"><a href="#__codelineno-36-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="na">[Test]</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenYIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="p">{</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="w">  </span><span class="c1">// Arrange</span>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">};</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="hll"><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span><span class="w"> </span><span class="c1">// capturing the initial location</span>
</span><a id="__codelineno-36-7" name="__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="w">  </span><span class="c1">// Act</span>
<a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-36-10" name="__codelineno-36-10"></a>
<a id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="w">  </span><span class="c1">// Assert</span>
<a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="hll"><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="o">+</span><span class="mi">1</span><span class="p">};</span>
</span><a id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Given the two approaches, I like the idea of capturing the initial location, so that‚Äôs what I‚Äôm going to go with.</p>
<h2 id="writing-additional-tests"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#writing-additional-tests">Writing Additional Tests</a></h2>
<p>Now that we have a passing test for <code>Rover</code> and moving forward, let‚Äôs go ahead and implement another piece of functionality by writing a test for when the <code>Rover</code> is facing <code>South</code></p>
<h4 id="redgreenrefactor-for-rover-facing-south"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#redgreenrefactor-for-rover-facing-south">Red/Green/Refactor for Rover Facing South</a></h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-37-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-37-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-37-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-37-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-37-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-37-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-37-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-37-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-37-10">10</a></span>
<span class="normal"><a href="#__codelineno-37-11">11</a></span>
<span class="normal"><a href="#__codelineno-37-12">12</a></span>
<span class="normal"><a href="#__codelineno-37-13">13</a></span>
<span class="normal"><a href="#__codelineno-37-14">14</a></span>
<span class="normal"><a href="#__codelineno-37-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="na">[Test]</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingSouthThenYDecreasesByOne</span><span class="p">()</span>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="p">{</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">  </span><span class="c1">// Arrange</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">};</span>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span><span class="w"> </span><span class="c1">// capturing the inital location</span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a>
<a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="w">  </span><span class="c1">// Act</span>
<a id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-37-10" name="__codelineno-37-10"></a>
<a id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="w">  </span><span class="c1">// Assert</span>
<a id="__codelineno-37-12" name="__codelineno-37-12"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="o">-</span><span class="mi">1</span><span class="p">};</span>
<a id="__codelineno-37-13" name="__codelineno-37-13"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-37-14" name="__codelineno-37-14"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-37-15" name="__codelineno-37-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And write enough code to make it pass!</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span>
<span class="normal"><a href="#__codelineno-38-4">4</a></span>
<span class="normal"><a href="#__codelineno-38-5">5</a></span>
<span class="normal"><a href="#__codelineno-38-6">6</a></span>
<span class="normal"><a href="#__codelineno-38-7">7</a></span>
<span class="normal"><a href="#__codelineno-38-8">8</a></span>
<span class="normal"><a href="#__codelineno-38-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="p">{</span>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">Y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now that we have a passing test suite again, is there anything we want to refactor? Are there any patterns starting to emerge?</p>
<p>From the business code, <code>MoveForward</code> seems pretty straightforward and I‚Äôm not sure what refactor I could do there that would make a lot of sense right now.</p>
<p>If we take a look at the test code, I‚Äôm noticing that our two tests so far look almost like carbon copies of each other. In fact, if we take a closer look, it seems like the only differences between the two tests are the <code>Rover</code>‚Äòs <code>Orientation</code> and the <code>expectedLocation</code>. I‚Äôm really tempted to refactor this code to be a bit more <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> and remove some duplication. However, I‚Äôve only seen two examples so far and before I refactor to a pattern, I actually want the pattern to manifest first so I know what the pattern is.</p>
<p>Let‚Äôs keep writing some more tests and see what pattern emerges!</p>
<h4 id="redgreenrefactor-for-rover-facing-east"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#redgreenrefactor-for-rover-facing-east">Red/Green/Refactor for Rover Facing East</a></h4>
<p>Now that the <code>Rover</code> can move forward when facing <code>North</code> or <code>South</code>, let‚Äôs go ahead and write a test for when the <code>Rover</code> faces East.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-39-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-39-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-39-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-39-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-39-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-39-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-39-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-39-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-39-10">10</a></span>
<span class="normal"><a href="#__codelineno-39-11">11</a></span>
<span class="normal"><a href="#__codelineno-39-12">12</a></span>
<span class="normal"><a href="#__codelineno-39-13">13</a></span>
<span class="normal"><a href="#__codelineno-39-14">14</a></span>
<span class="normal"><a href="#__codelineno-39-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingEastThenXIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="w">    </span><span class="c1">// Arrange</span>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">};</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a>
<a id="__codelineno-39-8" name="__codelineno-39-8"></a><span class="w">    </span><span class="c1">// Act</span>
<a id="__codelineno-39-9" name="__codelineno-39-9"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-39-10" name="__codelineno-39-10"></a>
<a id="__codelineno-39-11" name="__codelineno-39-11"></a><span class="w">    </span><span class="c1">// Assert</span>
<a id="__codelineno-39-12" name="__codelineno-39-12"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="p">};</span>
<a id="__codelineno-39-13" name="__codelineno-39-13"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-39-14" name="__codelineno-39-14"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-39-15" name="__codelineno-39-15"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With the test in place, let‚Äôs write enough code to make it pass.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="p">{</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">Y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Direction</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">X</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">Y</span><span class="p">};</span>
<a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this passing test, let‚Äôs take a look at possible refactoring opportunities.</p>
<h5 id="refactoring-coordinate"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#refactoring-coordinate">Refactoring Coordinate</a></h5>
<p>If we look at the production code, I‚Äôm getting really tired of having to write <code>Location = new Coordinate {X=Location.X..., Y=Location.Y...}</code> because I know I‚Äôm going to have to write this similar logic for the last remaining test for moving forward and probably something similar for moving backward.</p>
<p>Looking at the way we‚Äôve been modifying <code>Coordinate</code>, it seems like we‚Äôre every modifying <code>X</code> or <code>Y</code> by a set amount, so what if we wrote some methods that could adjust either <code>X</code> or <code>Y</code>?</p>
<p>If we take a look at <code>Coordinate</code>, it seems like we have a struct with the two properties in mention, so let‚Äôs add a method called <code>AdjustXBy</code> that will return a new <code>Coordinate</code> with <code>X</code> adjusted by that value and keep <code>Y</code> the same</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span>
<span class="normal"><a href="#__codelineno-41-4">4</a></span>
<span class="normal"><a href="#__codelineno-41-5">5</a></span>
<span class="normal"><a href="#__codelineno-41-6">6</a></span>
<span class="normal"><a href="#__codelineno-41-7">7</a></span>
<span class="normal"><a href="#__codelineno-41-8">8</a></span>
<span class="normal"><a href="#__codelineno-41-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="k">public</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Coordinate</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="p">{</span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="hll"><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="nf">AdjustXBy</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">adjustment</span><span class="p">)</span>
</span><a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="hll"><span class="w">  </span><span class="p">{</span>
</span><a id="__codelineno-41-8" name="__codelineno-41-8"></a><span class="hll"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">X</span><span class="o">+</span><span class="n">adjustment</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="o">=</span><span class="n">Y</span><span class="p">};</span>
</span><a id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="hll"><span class="w">  </span><span class="p">}</span>
</span></code></pre></div></td></tr></table></div>
<p>With this change in place, let‚Äôs go ahead and update our <code>MoveForward</code> method to use this new code!</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-42-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-42-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-42-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-42-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-42-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-42-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-42-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-42-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-42-10">10</a></span>
<span class="normal"><a href="#__codelineno-42-11">11</a></span>
<span class="normal"><a href="#__codelineno-42-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="p">{</span>
<a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">Y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<a id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-42-9" name="__codelineno-42-9"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Direction</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="hll"><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><a id="__codelineno-42-11" name="__codelineno-42-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-42-12" name="__codelineno-42-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Even in this small example, this addition is already more concise of our intent than the other two cases. After doing a quick verification that the test still passes (otherwise the refactor isn‚Äôt a refactor), let‚Äôs go ahead and add a new method to <code>Coordinate</code> called <code>AdjustYBy</code> that is similar to <code>AdjustXBy</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">1</a></span>
<span class="normal"><a href="#__codelineno-43-2">2</a></span>
<span class="normal"><a href="#__codelineno-43-3">3</a></span>
<span class="normal"><a href="#__codelineno-43-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="nf">AdjustYBy</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">adjustment</span><span class="p">)</span>
<a id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="o">=</span><span class="n">Y</span><span class="o">+</span><span class="n">adjustment</span><span class="p">};</span>
<a id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And let‚Äôs go ahead and update <code>MoveForward</code> to take advantage of this new functionality</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-44-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-44-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-44-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-44-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-44-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-44-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-44-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-44-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-44-10">10</a></span>
<span class="normal"><a href="#__codelineno-44-11">11</a></span>
<span class="normal"><a href="#__codelineno-44-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="p">{</span>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="hll"><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-7" name="__codelineno-44-7"></a><span class="hll"><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><a id="__codelineno-44-8" name="__codelineno-44-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-44-9" name="__codelineno-44-9"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Direciton</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-10" name="__codelineno-44-10"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-44-11" name="__codelineno-44-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-44-12" name="__codelineno-44-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>After making that much change to the production code, we‚Äôll go ahead and run our test suite again and it seems like the change is working as expected, nice!</p>
<h5 id="refactoring-test-code"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#refactoring-test-code">Refactoring Test Code</a></h5>
<p>Now that we‚Äôve refactored the business rules and our test suite is passing correctly, we can take a look at refactoring our test code. With the addition of the <code>East</code> test, the tests are definitely following a pattern and I should be able to extract out that logic to a <a href="https://github.com/nunit/docs/wiki/TestCaseData">single test and then pass in different parameters</a> (even though the link is to NUnit, most test frameworks support this concept).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-45-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-45-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-45-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-45-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-45-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-45-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-45-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-45-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-45-10">10</a></span>
<span class="normal"><a href="#__codelineno-45-11">11</a></span>
<span class="normal"><a href="#__codelineno-45-12">12</a></span>
<span class="normal"><a href="#__codelineno-45-13">13</a></span>
<span class="normal"><a href="#__codelineno-45-14">14</a></span>
<span class="normal"><a href="#__codelineno-45-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenYIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="w">    </span><span class="c1">// Arrange</span>
<a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="hll"><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">};</span>
</span><a id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span><span class="w"> </span><span class="c1">// capturing the inital location</span>
<a id="__codelineno-45-7" name="__codelineno-45-7"></a>
<a id="__codelineno-45-8" name="__codelineno-45-8"></a><span class="w">    </span><span class="c1">// Act</span>
<a id="__codelineno-45-9" name="__codelineno-45-9"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-45-10" name="__codelineno-45-10"></a>
<a id="__codelineno-45-11" name="__codelineno-45-11"></a><span class="w">    </span><span class="c1">// Assert</span>
<a id="__codelineno-45-12" name="__codelineno-45-12"></a><span class="hll"><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="o">+</span><span class="mi">1</span><span class="p">};</span>
</span><a id="__codelineno-45-13" name="__codelineno-45-13"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-45-14" name="__codelineno-45-14"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-45-15" name="__codelineno-45-15"></a><span class="w">  </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-46-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-46-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-46-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-46-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-46-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-46-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-46-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-46-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-46-10">10</a></span>
<span class="normal"><a href="#__codelineno-46-11">11</a></span>
<span class="normal"><a href="#__codelineno-46-12">12</a></span>
<span class="normal"><a href="#__codelineno-46-13">13</a></span>
<span class="normal"><a href="#__codelineno-46-14">14</a></span>
<span class="normal"><a href="#__codelineno-46-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="na">[Test]</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingSouthThenYDecreasesByOne</span><span class="p">()</span>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="p">{</span>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="w">  </span><span class="c1">// Arrange</span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="hll"><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">};</span>
</span><a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span><span class="w"> </span><span class="c1">// capturing the inital location</span>
<a id="__codelineno-46-7" name="__codelineno-46-7"></a>
<a id="__codelineno-46-8" name="__codelineno-46-8"></a><span class="w">  </span><span class="c1">// Act</span>
<a id="__codelineno-46-9" name="__codelineno-46-9"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-46-10" name="__codelineno-46-10"></a>
<a id="__codelineno-46-11" name="__codelineno-46-11"></a><span class="w">  </span><span class="c1">// Assert</span>
<a id="__codelineno-46-12" name="__codelineno-46-12"></a><span class="hll"><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="o">-</span><span class="mi">1</span><span class="p">};</span>
</span><a id="__codelineno-46-13" name="__codelineno-46-13"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-46-14" name="__codelineno-46-14"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-46-15" name="__codelineno-46-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-47-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-47-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-47-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-47-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-47-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-47-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-47-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-47-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-47-10">10</a></span>
<span class="normal"><a href="#__codelineno-47-11">11</a></span>
<span class="normal"><a href="#__codelineno-47-12">12</a></span>
<span class="normal"><a href="#__codelineno-47-13">13</a></span>
<span class="normal"><a href="#__codelineno-47-14">14</a></span>
<span class="normal"><a href="#__codelineno-47-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="na">[Test]</span>
<a id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingEastThenXIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="p">{</span>
<a id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="w">  </span><span class="c1">// Arrange</span>
<a id="__codelineno-47-5" name="__codelineno-47-5"></a><span class="hll"><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">};</span>
</span><a id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-47-7" name="__codelineno-47-7"></a>
<a id="__codelineno-47-8" name="__codelineno-47-8"></a><span class="w">  </span><span class="c1">// Act</span>
<a id="__codelineno-47-9" name="__codelineno-47-9"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-47-10" name="__codelineno-47-10"></a>
<a id="__codelineno-47-11" name="__codelineno-47-11"></a><span class="w">  </span><span class="c1">// Assert</span>
<a id="__codelineno-47-12" name="__codelineno-47-12"></a><span class="hll"><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="p">};</span>
</span><a id="__codelineno-47-13" name="__codelineno-47-13"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-47-14" name="__codelineno-47-14"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-47-15" name="__codelineno-47-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Given the differences between the tests, we would need to extract the starting <code>Direction</code> and the <code>expectedLocation</code> to be parameters. However, the <code>expectedLocation</code> is based on the initialLocation which is currently based on whatever the <code>Rover</code> defaults to.</p>
<p>Based on that chain, if we wanted to do this refactor, we would have to pass in a <code>Rover</code> as the parameter and I really don‚Äôt like that idea because if <code>Rover</code> grows to be bigger, then creating a <code>Rover</code> becomes more involved and I don‚Äôt want to inflict that onto my test. In addition, one thing that is nice about our tests is that they‚Äôre easy to read and to follow their logic which has a ton of value given that developers spend more time reading code than writing code.</p>
<p>All of that to say, that even though the tests look similar, I‚Äôm going to pass on refactoring to a single unified test because I‚Äôd be trading readability for removing duplication and these tests are small enough that I don‚Äôt think it‚Äôs that much technical debt to take on.</p>
<h4 id="redgreenrefactor-for-rover-facing-west"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#redgreenrefactor-for-rover-facing-west">Red/Green/Refactor for Rover Facing West</a></h4>
<p>With the latest test, we‚Äôre 3/4 of the way through implementing <code>MoveForward</code>, so let‚Äôs go ahead and write another failing test for when the <code>Rover</code> faces <code>West</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-48-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-48-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-48-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-48-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-48-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-48-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-48-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-48-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-48-10">10</a></span>
<span class="normal"><a href="#__codelineno-48-11">11</a></span>
<span class="normal"><a href="#__codelineno-48-12">12</a></span>
<span class="normal"><a href="#__codelineno-48-13">13</a></span>
<span class="normal"><a href="#__codelineno-48-14">14</a></span>
<span class="normal"><a href="#__codelineno-48-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="na">[Test]</span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingWestThenXDecreasesByOne</span><span class="p">()</span>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="p">{</span>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="w">  </span><span class="c1">// Arrange</span>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">};</span>
<a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-48-7" name="__codelineno-48-7"></a>
<a id="__codelineno-48-8" name="__codelineno-48-8"></a><span class="w">  </span><span class="c1">// Act</span>
<a id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="w">  </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-48-10" name="__codelineno-48-10"></a>
<a id="__codelineno-48-11" name="__codelineno-48-11"></a><span class="w">  </span><span class="c1">// Assert</span>
<a id="__codelineno-48-12" name="__codelineno-48-12"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="p">};</span>
<a id="__codelineno-48-13" name="__codelineno-48-13"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-48-14" name="__codelineno-48-14"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-48-15" name="__codelineno-48-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With the test in places, let‚Äôs write enough code to make the test pass by taking advantage of <code>Coordinate.AdjustXBy</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-49-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-49-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-49-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-49-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-49-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-49-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-49-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-49-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-49-10">10</a></span>
<span class="normal"><a href="#__codelineno-49-11">11</a></span>
<span class="normal"><a href="#__codelineno-49-12">12</a></span>
<span class="normal"><a href="#__codelineno-49-13">13</a></span>
<span class="normal"><a href="#__codelineno-49-14">14</a></span>
<span class="normal"><a href="#__codelineno-49-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="p">{</span>
<a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-49-6" name="__codelineno-49-6"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-7" name="__codelineno-49-7"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-49-8" name="__codelineno-49-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-49-9" name="__codelineno-49-9"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Direciton</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-10" name="__codelineno-49-10"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-49-11" name="__codelineno-49-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-49-12" name="__codelineno-49-12"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-13" name="__codelineno-49-13"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-49-14" name="__codelineno-49-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-49-15" name="__codelineno-49-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And with this latest addition, not only do we have a passing test suite, but we‚Äôve also covered the business rules for when the <code>Rover</code> moves forward, completing this part of the kata, nice!</p>
<p>As a recap, here‚Äôs what <code>Rover</code> and <code>WhenMovingForward</code> looks like</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-50-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-50-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-50-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-50-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-50-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-50-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-50-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-50-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-50-10">10</a></span>
<span class="normal"><a href="#__codelineno-50-11">11</a></span>
<span class="normal"><a href="#__codelineno-50-12">12</a></span>
<span class="normal"><a href="#__codelineno-50-13">13</a></span>
<span class="normal"><a href="#__codelineno-50-14">14</a></span>
<span class="normal"><a href="#__codelineno-50-15">15</a></span>
<span class="normal"><a href="#__codelineno-50-16">16</a></span>
<span class="normal"><a href="#__codelineno-50-17">17</a></span>
<span class="normal"><a href="#__codelineno-50-18">18</a></span>
<span class="normal"><a href="#__codelineno-50-19">19</a></span>
<span class="normal"><a href="#__codelineno-50-20">20</a></span>
<span class="normal"><a href="#__codelineno-50-21">21</a></span>
<span class="normal"><a href="#__codelineno-50-22">22</a></span>
<span class="normal"><a href="#__codelineno-50-23">23</a></span>
<span class="normal"><a href="#__codelineno-50-24">24</a></span>
<span class="normal"><a href="#__codelineno-50-25">25</a></span>
<span class="normal"><a href="#__codelineno-50-26">26</a></span>
<span class="normal"><a href="#__codelineno-50-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="p">{</span>
<a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-50-5" name="__codelineno-50-5"></a>
<a id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Rover</span><span class="p">()</span>
<a id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-50-8" name="__codelineno-50-8"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-50-9" name="__codelineno-50-9"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">(){</span><span class="n">X</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="o">=</span><span class="mi">0</span><span class="p">};</span>
<a id="__codelineno-50-10" name="__codelineno-50-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-50-11" name="__codelineno-50-11"></a>
<a id="__codelineno-50-12" name="__codelineno-50-12"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">MoveForward</span><span class="p">()</span>
<a id="__codelineno-50-13" name="__codelineno-50-13"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-50-14" name="__codelineno-50-14"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-15" name="__codelineno-50-15"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-50-16" name="__codelineno-50-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-17" name="__codelineno-50-17"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-18" name="__codelineno-50-18"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustYBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-50-19" name="__codelineno-50-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-20" name="__codelineno-50-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Direciton</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-21" name="__codelineno-50-21"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-50-22" name="__codelineno-50-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-23" name="__codelineno-50-23"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Orientation</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-24" name="__codelineno-50-24"></a><span class="w">      </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Location</span><span class="p">.</span><span class="n">AdjustXBy</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-50-25" name="__codelineno-50-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-26" name="__codelineno-50-26"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-50-27" name="__codelineno-50-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-51-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-51-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-51-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-51-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-51-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-51-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-51-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-51-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-51-10">10</a></span>
<span class="normal"><a href="#__codelineno-51-11">11</a></span>
<span class="normal"><a href="#__codelineno-51-12">12</a></span>
<span class="normal"><a href="#__codelineno-51-13">13</a></span>
<span class="normal"><a href="#__codelineno-51-14">14</a></span>
<span class="normal"><a href="#__codelineno-51-15">15</a></span>
<span class="normal"><a href="#__codelineno-51-16">16</a></span>
<span class="normal"><a href="#__codelineno-51-17">17</a></span>
<span class="normal"><a href="#__codelineno-51-18">18</a></span>
<span class="normal"><a href="#__codelineno-51-19">19</a></span>
<span class="normal"><a href="#__codelineno-51-20">20</a></span>
<span class="normal"><a href="#__codelineno-51-21">21</a></span>
<span class="normal"><a href="#__codelineno-51-22">22</a></span>
<span class="normal"><a href="#__codelineno-51-23">23</a></span>
<span class="normal"><a href="#__codelineno-51-24">24</a></span>
<span class="normal"><a href="#__codelineno-51-25">25</a></span>
<span class="normal"><a href="#__codelineno-51-26">26</a></span>
<span class="normal"><a href="#__codelineno-51-27">27</a></span>
<span class="normal"><a href="#__codelineno-51-28">28</a></span>
<span class="normal"><a href="#__codelineno-51-29">29</a></span>
<span class="normal"><a href="#__codelineno-51-30">30</a></span>
<span class="normal"><a href="#__codelineno-51-31">31</a></span>
<span class="normal"><a href="#__codelineno-51-32">32</a></span>
<span class="normal"><a href="#__codelineno-51-33">33</a></span>
<span class="normal"><a href="#__codelineno-51-34">34</a></span>
<span class="normal"><a href="#__codelineno-51-35">35</a></span>
<span class="normal"><a href="#__codelineno-51-36">36</a></span>
<span class="normal"><a href="#__codelineno-51-37">37</a></span>
<span class="normal"><a href="#__codelineno-51-38">38</a></span>
<span class="normal"><a href="#__codelineno-51-39">39</a></span>
<span class="normal"><a href="#__codelineno-51-40">40</a></span>
<span class="normal"><a href="#__codelineno-51-41">41</a></span>
<span class="normal"><a href="#__codelineno-51-42">42</a></span>
<span class="normal"><a href="#__codelineno-51-43">43</a></span>
<span class="normal"><a href="#__codelineno-51-44">44</a></span>
<span class="normal"><a href="#__codelineno-51-45">45</a></span>
<span class="normal"><a href="#__codelineno-51-46">46</a></span>
<span class="normal"><a href="#__codelineno-51-47">47</a></span>
<span class="normal"><a href="#__codelineno-51-48">48</a></span>
<span class="normal"><a href="#__codelineno-51-49">49</a></span>
<span class="normal"><a href="#__codelineno-51-50">50</a></span>
<span class="normal"><a href="#__codelineno-51-51">51</a></span>
<span class="normal"><a href="#__codelineno-51-52">52</a></span>
<span class="normal"><a href="#__codelineno-51-53">53</a></span>
<span class="normal"><a href="#__codelineno-51-54">54</a></span>
<span class="normal"><a href="#__codelineno-51-55">55</a></span>
<span class="normal"><a href="#__codelineno-51-56">56</a></span>
<span class="normal"><a href="#__codelineno-51-57">57</a></span>
<span class="normal"><a href="#__codelineno-51-58">58</a></span>
<span class="normal"><a href="#__codelineno-51-59">59</a></span>
<span class="normal"><a href="#__codelineno-51-60">60</a></span>
<span class="normal"><a href="#__codelineno-51-61">61</a></span>
<span class="normal"><a href="#__codelineno-51-62">62</a></span>
<span class="normal"><a href="#__codelineno-51-63">63</a></span>
<span class="normal"><a href="#__codelineno-51-64">64</a></span>
<span class="normal"><a href="#__codelineno-51-65">65</a></span>
<span class="normal"><a href="#__codelineno-51-66">66</a></span>
<span class="normal"><a href="#__codelineno-51-67">67</a></span>
<span class="normal"><a href="#__codelineno-51-68">68</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="na">[TestFixture]</span>
<a id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nf">WhenMovingForward</span><span class="p">()</span>
<a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="p">{</span>
<a id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenYIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-51-6" name="__codelineno-51-6"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-51-7" name="__codelineno-51-7"></a><span class="w">    </span><span class="c1">// Arrange</span>
<a id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">};</span>
<a id="__codelineno-51-9" name="__codelineno-51-9"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-51-10" name="__codelineno-51-10"></a>
<a id="__codelineno-51-11" name="__codelineno-51-11"></a><span class="w">    </span><span class="c1">// Act</span>
<a id="__codelineno-51-12" name="__codelineno-51-12"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-51-13" name="__codelineno-51-13"></a>
<a id="__codelineno-51-14" name="__codelineno-51-14"></a><span class="w">    </span><span class="c1">// Assert</span>
<a id="__codelineno-51-15" name="__codelineno-51-15"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="o">+</span><span class="mi">1</span><span class="p">};</span>
<a id="__codelineno-51-16" name="__codelineno-51-16"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-51-17" name="__codelineno-51-17"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-51-18" name="__codelineno-51-18"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-51-19" name="__codelineno-51-19"></a>
<a id="__codelineno-51-20" name="__codelineno-51-20"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-51-21" name="__codelineno-51-21"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingSouthThenYDecreasesByOne</span><span class="p">()</span>
<a id="__codelineno-51-22" name="__codelineno-51-22"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-51-23" name="__codelineno-51-23"></a><span class="w">    </span><span class="c1">// Arrange</span>
<a id="__codelineno-51-24" name="__codelineno-51-24"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">};</span>
<a id="__codelineno-51-25" name="__codelineno-51-25"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-51-26" name="__codelineno-51-26"></a>
<a id="__codelineno-51-27" name="__codelineno-51-27"></a><span class="w">    </span><span class="c1">// Act</span>
<a id="__codelineno-51-28" name="__codelineno-51-28"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-51-29" name="__codelineno-51-29"></a>
<a id="__codelineno-51-30" name="__codelineno-51-30"></a><span class="w">    </span><span class="c1">// Assert</span>
<a id="__codelineno-51-31" name="__codelineno-51-31"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="o">-</span><span class="mi">1</span><span class="p">};</span>
<a id="__codelineno-51-32" name="__codelineno-51-32"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-51-33" name="__codelineno-51-33"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">South</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-51-34" name="__codelineno-51-34"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-51-35" name="__codelineno-51-35"></a>
<a id="__codelineno-51-36" name="__codelineno-51-36"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-51-37" name="__codelineno-51-37"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingEastThenXIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-51-38" name="__codelineno-51-38"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-51-39" name="__codelineno-51-39"></a><span class="w">    </span><span class="c1">// Arrange</span>
<a id="__codelineno-51-40" name="__codelineno-51-40"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">};</span>
<a id="__codelineno-51-41" name="__codelineno-51-41"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-51-42" name="__codelineno-51-42"></a>
<a id="__codelineno-51-43" name="__codelineno-51-43"></a><span class="w">    </span><span class="c1">// Act</span>
<a id="__codelineno-51-44" name="__codelineno-51-44"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-51-45" name="__codelineno-51-45"></a>
<a id="__codelineno-51-46" name="__codelineno-51-46"></a><span class="w">    </span><span class="c1">// Assert</span>
<a id="__codelineno-51-47" name="__codelineno-51-47"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="p">};</span>
<a id="__codelineno-51-48" name="__codelineno-51-48"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-51-49" name="__codelineno-51-49"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">East</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-51-50" name="__codelineno-51-50"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-51-51" name="__codelineno-51-51"></a>
<a id="__codelineno-51-52" name="__codelineno-51-52"></a>
<a id="__codelineno-51-53" name="__codelineno-51-53"></a><span class="w">  </span><span class="na">[Test]</span>
<a id="__codelineno-51-54" name="__codelineno-51-54"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingWestThenXDecreasesByOne</span><span class="p">()</span>
<a id="__codelineno-51-55" name="__codelineno-51-55"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-51-56" name="__codelineno-51-56"></a><span class="w">    </span><span class="c1">// Arrange</span>
<a id="__codelineno-51-57" name="__codelineno-51-57"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">};</span>
<a id="__codelineno-51-58" name="__codelineno-51-58"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-51-59" name="__codelineno-51-59"></a>
<a id="__codelineno-51-60" name="__codelineno-51-60"></a><span class="w">    </span><span class="c1">// Act</span>
<a id="__codelineno-51-61" name="__codelineno-51-61"></a><span class="w">    </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-51-62" name="__codelineno-51-62"></a>
<a id="__codelineno-51-63" name="__codelineno-51-63"></a><span class="w">    </span><span class="c1">// Assert</span>
<a id="__codelineno-51-64" name="__codelineno-51-64"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="p">};</span>
<a id="__codelineno-51-65" name="__codelineno-51-65"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-51-66" name="__codelineno-51-66"></a><span class="w">    </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">West</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-51-67" name="__codelineno-51-67"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-51-68" name="__codelineno-51-68"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="wrapping-up"><a class="toclink" href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/#wrapping-up">Wrapping Up</a></h3>
<p>With this final test in place, we have the core functionality for when the <code>Rover</code> moves forward. In addition, we‚Äôve written enough tests and functionality now that if requirements were to change, we have a pretty good guess on what the work involved would be. In the next part of the kata, we‚Äôll start implementing a new piece of functionality!</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-03 00:00:00+00:00">Jun 3, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Learning Through Example</a></li>
        
        
          
          <li class="md-meta__item">
            
              9 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="mars-rover-implementing-rover-creation"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/">Mars Rover ‚Äì Implementing Rover : Creation</a></h2>
<p>In this installment of the Mars Rover kata, we‚Äôre going to start implementing the <code>Rover</code> type! First, we‚Äôre going to review the models that we derived in Part 2 of the series. From there, we‚Äôll take a look at the various requirements and see which piece to start implementing. From there, we‚Äôll write our first tests, driving the new functionality and running into a snag or two on the way. By the end of this post, we‚Äôll be one requirement down for the kata and have a better understanding of the <code>Rover</code> type!</p>
<h3 id="model-review"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#model-review">Model Review</a></h3>
<p>As a recap, we‚Äôve derived the following <a href="../../2020/05/19/mars-rover---modeling-concepts/">models and implementations</a> for the kata so far. For this post, we‚Äôre going to be spending the majority of our time working with <code>Rover</code>, but it‚Äôs good to know what our base looks like.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span>
<span class="normal"><a href="#__codelineno-16-2">2</a></span>
<span class="normal"><a href="#__codelineno-16-3">3</a></span>
<span class="normal"><a href="#__codelineno-16-4">4</a></span>
<span class="normal"><a href="#__codelineno-16-5">5</a></span>
<span class="normal"><a href="#__codelineno-16-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="k">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">Command</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="n">MoveForward</span><span class="p">,</span><span class="w"> </span><span class="n">MoveBackward</span><span class="p">,</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">  </span><span class="n">TurnLeft</span><span class="p">,</span><span class="w"> </span><span class="n">TurnRight</span><span class="p">,</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">  </span><span class="n">Quit</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">Direction</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">South</span><span class="p">,</span><span class="w"> </span><span class="n">East</span><span class="p">,</span><span class="w"> </span><span class="n">West</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Coordinate</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="p">{</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span>
<span class="normal"><a href="#__codelineno-19-4">4</a></span>
<span class="normal"><a href="#__codelineno-19-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="p">{</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this in mind, let‚Äôs start working on adding some new functionality to <code>Rover</code>!</p>
<h3 id="in-the-beginning"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#in-the-beginning">In the beginning</a></h3>
<h4 id="picking-an-approach"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#picking-an-approach">Picking an Approach</a></h4>
<p>When I begin a new feature, one thing that I‚Äôm always thinking about is how do I break down the work ahead of me in such a way that I can start delivering value much faster. This doesn‚Äôt mean that I‚Äôm skipping on quality, but it does mean that I value quicker feedback than 100% test coverage. With that being said, when I look at the <a href="../../2020/05/20/mars-rover---defining-the-problem/#problem-description">requirements</a>, something that I can implement pretty quickly is that when the <code>Rover</code> starts, it should be at (0, 0) facing North.</p>
<p>Like everything in development, there are multiple ways we could implement this functionality</p>
<ol>
<li>Provide a default constructor for <code>Rover</code> that sets those values explicitly</li>
<li>Update the Program.cs file to set those values for <code>Rover</code></li>
</ol>
<p>With the first approach, we‚Äôre encoding this business rule into the <code>Rover</code> type and forcing that when anyone creates an instance of <code>Rover</code>, it will always be at (0, 0) facing North which is a nice way of putting the business rule into the right component.</p>
<p>With the second approach, we‚Äôre going to let <code>Rover</code> be a dumb component and have some other component decide these values. The downside to this approach is that if there‚Äôs an error with <code>Rover</code>, we won‚Äôt know if it‚Äôs because of how <code>Rover</code> is behaving or how it was created.</p>
<p>Both approaches are valid, so I‚Äôm just going to pick one and use that for now. If later down the road we need to make a change, we‚Äôll update as needed. With that being said, I‚Äôm leaning towards the first approach, so let‚Äôs go ahead and write our first unit test on making sure that <code>Rover</code> is facing <code>North</code>.</p>
<h4 id="gaining-our-bearings"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#gaining-our-bearings">Gaining Our Bearings</a></h4>
<p>Creating a unit test for <code>Rover</code> where the <code>Orientation</code> should be <code>North</code> would look like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span>
<span class="normal"><a href="#__codelineno-20-5">5</a></span>
<span class="normal"><a href="#__codelineno-20-6">6</a></span>
<span class="normal"><a href="#__codelineno-20-7">7</a></span>
<span class="normal"><a href="#__codelineno-20-8">8</a></span>
<span class="normal"><a href="#__codelineno-20-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="na">[Test]</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ThenTheRoverIsFacingNorth</span><span class="p">()</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="p">{</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">  </span><span class="c1">// Arrange and Act</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="p">();</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">  </span><span class="c1">// Assert</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Orientation</span><span class="p">);</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>What‚Äôs interesting here is that when we run this test, it passes! But why does it pass? If we look back at <code>Rover</code>, here‚Äôs how we‚Äôve defined it.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span>
<span class="normal"><a href="#__codelineno-21-4">4</a></span>
<span class="normal"><a href="#__codelineno-21-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="p">{</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>We don‚Äôt have any constructors defined nor are we setting values for the two properties, so how does it know that <code>Orientation</code> is <code>North</code>?</p>
<p>Magic?</p>
<p>Not quite! Since we‚Äôre not setting any value for <code>Orientation</code>, it will be whatever the default value for <code>Direction</code> is. We can determine that by using the <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/default">default</a> operator in C#.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">default</span><span class="p">(</span><span class="n">Direction</span><span class="p">);</span><span class="w"> </span><span class="c1">// North</span>
</code></pre></div></td></tr></table></div>
<p>But why is <code>North</code> the default value for <code>Direction</code>?</p>
<p>If you remember how <code>Direction</code> was defined, we decided to define it as an <em>enum</em> which is really a number in disguise.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">public</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="n">Direction</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="p">{</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">  </span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">South</span><span class="p">,</span><span class="w"> </span><span class="n">East</span><span class="p">,</span><span class="w"> </span><span class="n">West</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>So what‚Äôs the default value for a number?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="k">default</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span><span class="w"> </span><span class="c1">// 0</span>
</code></pre></div></td></tr></table></div>
<p>So what‚Äôs happening here is that when the <code>Rover</code> is created, it looks for any logic in the default constructor. Since there isn‚Äôt one, it will set default values to both properties. For <code>Orientation</code>, that value will be 0 and by default, it will be the first value listed in the <code>Direction</code> enum.</p>
<p>So for fun, if we change <code>North</code> to be the second choice in <code>Direction</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span>
<span class="normal"><a href="#__codelineno-25-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="k">public</span><span class="w"> </span><span class="n">Direction</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="p">{</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">  </span><span class="n">South</span><span class="p">,</span><span class="w"> </span><span class="n">North</span><span class="p">,</span><span class="w"> </span><span class="n">East</span><span class="p">,</span><span class="w"> </span><span class="n">West</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>then our test fails with our expected error.</p>
<figure>
<p><img alt="Failing unit test for Mars Rover" src="https://softwarementorblog.blob.core.windows.net/images/mars-rover-failed-orientation.png" />
  </p>
<figcaption>Failing unit test for Mars Rover as the expected value was North, but the value was South.</figcaption>
</figure>
<p>I don‚Äôt know about you, but someone changing the ordering of an <em>enum</em> shouldn‚Äôt be causing a failing test. Luckily, resolving this issue is as simple as explicitly stating the <code>Orientation</code> in <code>Rover</code>‚Äòs default constructor.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="p">{</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Rover</span><span class="p">()</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now, our test passes even if we change the ordering of values in <code>Direction</code>!</p>
<h4 id="getting-to-ground-zero"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#getting-to-ground-zero">Getting to Ground Zero</a></h4>
<p>Now that we have our <code>Orientation</code> figured out, let‚Äôs go ahead and write our next test to make sure that the <code>Location</code> is correct.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span>
<span class="normal"><a href="#__codelineno-27-4">4</a></span>
<span class="normal"><a href="#__codelineno-27-5">5</a></span>
<span class="normal"><a href="#__codelineno-27-6">6</a></span>
<span class="normal"><a href="#__codelineno-27-7">7</a></span>
<span class="normal"><a href="#__codelineno-27-8">8</a></span>
<span class="normal"><a href="#__codelineno-27-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="na">[Test]</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ThenTheRoverIsAt00</span><span class="p">()</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="p">{</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">  </span><span class="c1">// Arrange and Act</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="p">();</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">{</span><span class="n">X</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="o">=</span><span class="mi">0</span><span class="p">};</span>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>When we run the test, we get the following error:</p>
<figure>
<p><img alt="Failing coordinate test for rover" src="https://softwarementorblog.blob.core.windows.net/images/mars-rover-failed-location.png" />
  </p>
<figcaption>Failed test for Rover since it was expecting a Coordinate, but the Location was null.</figcaption>
</figure>
<p>Ah, yeah, that makes sense, <code>Location</code> is a <code>Coordinate</code> which is an object. Because we‚Äôve not explicitly set <code>Location</code>, the default value is <code>null</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="k">default</span><span class="p">(</span><span class="n">Coordinate</span><span class="p">);</span><span class="w"> </span><span class="c1">// null</span>
</code></pre></div></td></tr></table></div>
<p>So let‚Äôs go ahead and update the <code>Rover</code> constructor</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span>
<span class="normal"><a href="#__codelineno-29-13">13</a></span>
<span class="normal"><a href="#__codelineno-29-14">14</a></span>
<span class="normal"><a href="#__codelineno-29-15">15</a></span>
<span class="normal"><a href="#__codelineno-29-16">16</a></span>
<span class="normal"><a href="#__codelineno-29-17">17</a></span>
<span class="normal"><a href="#__codelineno-29-18">18</a></span>
<span class="normal"><a href="#__codelineno-29-19">19</a></span>
<span class="normal"><a href="#__codelineno-29-20">20</a></span>
<span class="normal"><a href="#__codelineno-29-21">21</a></span>
<span class="normal"><a href="#__codelineno-29-22">22</a></span>
<span class="normal"><a href="#__codelineno-29-23">23</a></span>
<span class="normal"><a href="#__codelineno-29-24">24</a></span>
<span class="normal"><a href="#__codelineno-29-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Rover</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="p">{</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="n">Location</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Rover</span><span class="p">()</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">    </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="p">;</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">    </span><span class="n">Location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">(){</span><span class="n">X</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="o">=</span><span class="mi">0</span><span class="p">};</span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="p">}</span>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="err">````</span>
<a id="__codelineno-29-13" name="__codelineno-29-13"></a>
<a id="__codelineno-29-14" name="__codelineno-29-14"></a><span class="n">So</span><span class="w"> </span><span class="k">let</span><span class="err">‚Äô</span><span class="n">s</span><span class="w"> </span><span class="n">re</span><span class="o">-</span><span class="n">run</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">now</span><span class="p">.</span>
<a id="__codelineno-29-15" name="__codelineno-29-15"></a>
<a id="__codelineno-29-16" name="__codelineno-29-16"></a><span class="err">```</span><span class="n">csharp</span>
<a id="__codelineno-29-17" name="__codelineno-29-17"></a><span class="na">[Test]</span>
<a id="__codelineno-29-18" name="__codelineno-29-18"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ThenTheRoverIsAt00</span><span class="p">()</span>
<a id="__codelineno-29-19" name="__codelineno-29-19"></a><span class="p">{</span>
<a id="__codelineno-29-20" name="__codelineno-29-20"></a><span class="w">  </span><span class="c1">// Arrange and Act</span>
<a id="__codelineno-29-21" name="__codelineno-29-21"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="p">();</span>
<a id="__codelineno-29-22" name="__codelineno-29-22"></a>
<a id="__codelineno-29-23" name="__codelineno-29-23"></a><span class="w">  </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="p">{</span><span class="n">X</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="o">=</span><span class="mi">0</span><span class="p">};</span>
<a id="__codelineno-29-24" name="__codelineno-29-24"></a><span class="w">  </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">);</span>
<a id="__codelineno-29-25" name="__codelineno-29-25"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<figure>
<p><img alt="Failing test for coordinate since they're different" src="https://softwarementorblog.blob.core.windows.net/images/mars-rover-coordinate-difference.png" />
  </p>
<figcaption>Failed unit test since the expected coordinate is not the same as the actual coordinate..</figcaption>
</figure>
<p>What‚Äôs going on here?</p>
<h4 id="not-all-locations-are-created-equally"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#not-all-locations-are-created-equally">Not All Locations Are Created Equally</a></h4>
<p>When we leverage <code>Assert.AreEqual</code>, under the hood, it‚Äôs leveraging the built-in <code>Equals</code> method for the values being passed in. For primitive types, this will do a comparison by <em>values</em>, but if we‚Äôre comparing objects, then it will do comparison by <em>reference</em>.</p>
<p>Given this, the problem we‚Äôre running into now is that even though I have two <code>Coordinate</code>s that have the same value, since they are two different objects, then <code>Assert.AreEqual</code> will fail. We‚Äôve got a couple of different ways to solve this problem.</p>
<h5 id="overriding-the-equals-method"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#overriding-the-equals-method">Overriding the <code>Equals</code> Method</a></h5>
<p>One way to solve the problem is by overriding the <code>Equals</code> method on the <code>Coordinate</code> class and override the logic so that two <code>Coordinate</code>s are the same if all of their properties are the same. This is a pretty solid approach to take if that‚Äôs how equality should work everywhere. With that being said, here are some things to keep in mind when using this technique.</p>
<p>First, if the class gains a new property, you will need to remember to update the <code>Equals</code> method, otherwise, you‚Äôll get interesting behavior when two objects that have a single difference are being treated as the same.</p>
<p>Next, if you override <code>Equals</code>, <a href="https://docs.microsoft.com/en-us/dotnet/api/system.object.gethashcode?view=netcore-3.1#remarks">then you must override GetHashCode as well</a>. If you fail to do this, this will generate a warning during compilation time, but the bigger problem is that for two objects that are the same based on the definition of <code>Equals</code> but hash differently, then you will fail to find the item correctly in <code>Dictionary</code> and <code>HashSet</code> structures. When implementing <code>GetHashCode</code>, you should use the same properties for hashing as you would for equality checking.</p>
<p>Overall, I will use this approach if equality for this type needs to be by value for everywhere in the application but this isn‚Äôt my favorite approach because developers need to remember to update both <code>Equals</code> and <code>GetHashCode</code> when new properties are added.</p>
<h5 id="going-from-class-to-struct"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#going-from-class-to-struct">Going from <code>class</code> to <code>struct</code></a></h5>
<p>The second approach we can take to have equality by value is by changing our type for <code>Coordinate</code> from a <code>class</code> to a <code>struct</code>. The cool thing about <code>structs</code> is that they by default handle equality by value so if you do need to add another property, things will work as expected. However, like all things in software, there are a couple of things to be aware of.</p>
<p>First, <code>structs</code> have to have an empty, default constructor. So if there are some validation rules that need to be checked in the constructor, there‚Äôs no way to force that to happen. Another effect of this drawback is that if a <code>struct</code> needs two things to exist or it shouldn‚Äôt be created, you can‚Äôt force callers to pass them in which can play havoc with making illegal states unrepresentable.</p>
<p>Second, when working with <code>struct</code>s, and you change one of the properties, you‚Äôre modifying a <em>copy</em> of the struct and not the original version.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span>
<span class="normal"><a href="#__codelineno-30-14">14</a></span>
<span class="normal"><a href="#__codelineno-30-15">15</a></span>
<span class="normal"><a href="#__codelineno-30-16">16</a></span>
<span class="normal"><a href="#__codelineno-30-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="k">public</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Date</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="p">{</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Month</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Day</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Year</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="p">}</span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Order</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="p">{</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="n">TransactionDate</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">decimal</span><span class="w"> </span><span class="n">Total</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="p">}</span>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a>
<a id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="kt">var</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Order</span><span class="p">{</span><span class="n">Total</span><span class="o">=</span><span class="mf">9.99m</span><span class="p">};</span><span class="w"> </span><span class="c1">// at this point, Order will have a Date of 0/00/0000</span>
<a id="__codelineno-30-15" name="__codelineno-30-15"></a><span class="n">order</span><span class="p">.</span><span class="n">TransactionDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">{</span><span class="n">Month</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">Day</span><span class="o">=</span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="o">=</span><span class="mi">2020</span><span class="p">};</span><span class="w"> </span><span class="c1">// Order has a new date!</span>
<a id="__codelineno-30-16" name="__codelineno-30-16"></a><span class="n">order</span><span class="p">.</span><span class="n">TransactionDate</span><span class="p">.</span><span class="n">Day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="c1">// Fail to compile =&gt; Cannot modify the return value of `TransactionDate`</span>
<a id="__codelineno-30-17" name="__codelineno-30-17"></a><span class="w">                              </span><span class="c1">// because it is not a variable</span>
</code></pre></div></td></tr></table></div>
<p>It‚Äôs not a problem if you replace the <em>whole</em> struct value, but if you only want to change a part of it, you‚Äôll need to replace the whole value. If you‚Äôve ever worked with the <code>DateTime</code> type, you‚Äôll notice that you can‚Äôt change values, but you can create a new <code>DateTime</code> value with updated properties.</p>
<p>Overall, I prefer this approach when modeling values where dependencies aren‚Äôt required and there‚Äôs not a need for validation logic.</p>
<h5 id="creating-an-equals-method-for-testing"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#creating-an-equals-method-for-testing">Creating an <code>Equals</code> Method for Testing</a></h5>
<p>The third approach you can take when checking if things are equal is by defining a custom <code>Equals</code> method that lives in my test suite and is only used for testing. The benefit of this approach is that I can now verify my objects by value, without the need of overriding two different methods. In addition, since this type of equality is only needed for testing, I can now have this logic live in the test project. In addition, I can still have validation logic and non-default constructors for my classes.</p>
<p>The main downside to this approach is that if there‚Äôs a new property added to the class that you‚Äôve written custom equality logic for, you‚Äôll need to update this method as well.</p>
<p>Overall, I prefer this approach when I need equality by value for testing purposes only and I don‚Äôt want to make wide-sweeping changes by changing my type from <code>class</code> to <code>struct</code>.</p>
<h4 id="making-locations-equal"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#making-locations-equal">Making Locations Equal</a></h4>
<p>Now that we have some more information about why the test failed and a few different approaches, let‚Äôs take a look at what approach makes sense here. First off, <code>Coordinate</code>s really don‚Äôt have any validation logic. Second, in our system, if we have two <code>Coordinate</code>s with the same values, then they should be considered the same. Given these assumptions, I‚Äôm going to go ahead and change the type definition from <code>class</code> to <code>struct</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span>
<span class="normal"><a href="#__codelineno-31-3">3</a></span>
<span class="normal"><a href="#__codelineno-31-4">4</a></span>
<span class="normal"><a href="#__codelineno-31-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="k">public</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Coordinate</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="p">{</span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="p">{</span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;}</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now that we‚Äôve made that change, if we re-run our test, it passes!</p>
<h4 id="wrapping-up"><a class="toclink" href="../../2020/06/03/mars-rover--implementing-rover--creation/#wrapping-up">Wrapping Up</a></h4>
<p>In this post, we started writing tests on <code>Rover</code>. We started off by adding a default constructor which sets the <code>Orientation</code> to <code>Direction.North</code> and explored about how setting defaults explicitly can protect us from changes in the future. From there, we wrote a test on <code>Location</code> and learned about how <code>Assert.AreEquals</code> leverages default equality and a few different approaches to solving this problem. Now that we have a way to assert against <code>Orientation</code> and <code>Location</code>, we can start writing tests for when the rover moves forward!</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-26 00:00:00+00:00">May 26, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Learning Through Example</a></li>
        
        
          
          <li class="md-meta__item">
            
              7 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="mars-rover-intro-to-testing"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/">Mars Rover - Intro To Testing</a></h2>
<h3 id="what-this-is-and-what-this-isnt"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#what-this-is-and-what-this-isnt">What This Is and What This Isn‚Äôt</a></h3>
<p>The goal of this post isn‚Äôt to try to convince you that you should be unit testing your code, but to give you enough information that if you need to unit test your code or if you‚Äôre in a codebase that expects tests, you will have the knowledge to hold your own. If you are looking for reasons why you should be testing, there are some great resources in the <a href="../../2020/05/26/mars-rover---intro-to-testing/#additional-resources">Additional Resources</a> section at the end of the post!</p>
<h3 id="unit-testing-101"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#unit-testing-101">Unit Testing 101</a></h3>
<p>At its core, <em>unit testing</em> is the practice of writing code that tests that your code is working correctly. Confused? It‚Äôll make sense in a minute, I promise! If you‚Äôve ever made changes to a project, how confident were you that your changes worked? If I had to guess, there‚Äôs a high level of confidence that your changes solved the problem. However, how confident were you that your changes didn‚Äôt break some other piece of functionality? I imagine that your confidence is a bit lower. For me, I‚Äôm reasonably confident that my changes are solid, but I‚Äôm not always sure that I didn‚Äôt break some other features elsewhere. The most straightforward approach to verify everything is working correctly is to run the application and try it out, right?</p>
<p>For small applications, that‚Äôs a pretty reasonable approach to take and wouldn‚Äôt take too much time. However, what if you‚Äôre working on a more complicated application? How much time is it taking for you to compile the application, launch it, and start navigating through the UI? The premise of unit testing is that we can exercise the same logic that‚Äôs running in the application but without having to go through the interface. This type of testing is generally faster and less error-prone since your test code will do the same tests over and over again. The downside is that you‚Äôll spend more time writing code, but for me, I feel much more confident in my work when I can run the full test suite and know pretty quickly if I‚Äôve broken something.</p>
<h4 id="naming-again"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#naming-again">Naming Again?!</a></h4>
<p>If you‚Äôve been following along with the Mars Rover kata series then you know I‚Äôm a huge fan of using the same language as my Subject Matter Experts (SMEs) when it comes to the problem at hand as it prevents confusion when different terminology is used for the same concept.</p>
<p>When it comes to naming my tests, I take this approach one step further and name my tests in such a manner that if you read the class name followed by the method, then you‚Äôll have a clear idea of what the test‚Äôs intent is. The main reason I name my tests this way is that if my test fails, I want to know what requirement or workflow is not working so I can see if it makes sense for that workflow to be impacted.</p>
<p>Sometimes, a test will start to fail because requirements have changed, so the test needs to be updated or removed. In other cases, the test failure reveals a contradiction in rules so it helps me if I can clearly see the use case and ask the right questions to my SMEs.</p>
<h4 id="framing-context-with-givenwhenthen"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#framing-context-with-givenwhenthen">Framing Context with Given/When/Then</a></h4>
<p>When it comes to naming my test classes and method, I borrow inspiration from the <em>Given/When/Then</em> naming methodology. I came across this convention when learning about Behavior Driven Development (BDD) early on in my career but I was familiar with the naming convent from working with user stories. The intent of Given/When/Then is that it provides the <em>context</em>, an <em>action</em>, and a <em>result</em>. Going to Mars Rover, an example user story would be</p>
<blockquote>
<p>Given that the rover is at (0, 0) facing North, when it receives the move forward command, then it should be at (0, 1) facing North</p>
</blockquote>
<p>Let‚Äôs break this user story down and examine the various parts:</p>
<h5 id="given"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#given">Given</a></h5>
<p>The <em>Given</em> portion of the user story sets up the context of the application. It can be as simple as <em>Given that the user is logged into the system</em> or as complex as <em>Given that today is a holiday and that a user wants to make a reservation</em>. The goal here is that someone can read this portion of the story and understand what is being accomplished. For this user story, the context is that we have a Rover that‚Äôs located at (0, 0) facing North.</p>
<h5 id="when"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#when">When</a></h5>
<p>The <em>When</em> portion of the user story gives what action is being taken in the application. At this level, we‚Äôd typically stay away from technical jargon (i.e. the user clicks the reservation button) and focus more on the workflow being accomplished. For this user story, the action is that the Rover received the Move Forward command.</p>
<h5 id="then"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#then">Then</a></h5>
<p>The <em>Then</em> portion of the user story tells us what the expected result or behavior is. It can be as simple as <em>then the total is $42.55</em> or as complex as <em>then the sale is declined and the user is informed that there was an issue processing the payment</em>. For this user story, we‚Äôre expecting that after the Rover receives the Move Forward command, then the rover is at (0, 1) facing North.</p>
<h4 id="test-structure-and-naming-conventions"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#test-structure-and-naming-conventions">Test Structure and Naming Conventions</a></h4>
<p>Now that we‚Äôve learned a bit more about Given/When/Then, let‚Äôs talk about how this can influence your test structure. When I‚Äôm writing tests, I‚Äôll typically place them in a unit test project that‚Äôs separate from production code so that we don‚Äôt deploy the unit tests with the production code.</p>
<p>In the case of Mars Rover, if I have a project called <em>MarsRover</em>, then I‚Äôd have a project called <em>MarsRover.UnitTests</em>. Once I have this new project created, I‚Äôll create a folder called <em>xyzTests</em> where <em>xyz</em> is the name of the class I‚Äôm writing tests against. So if I‚Äôm writing tests against the <em>Rover</em> class in the <em>MarsRover</em> project, then I would have a folder called <em>RoverTests</em> in the <em>MarsRover.UnitTests</em> project.</p>
<figure>
<p><img alt="Solution Layout for Mars Rover in VS Code" src="https://softwarementorblog.blob.core.windows.net/images/example-test-layout.png" />
  </p>
<figcaption>Project naming conventions outlined in red. The test class and folder naming conventions outlined in blue</figcaption>
</figure>
<p>From here, I‚Äôll generally create a file per method or workflow that I want to test for the class. So based on our user story above, I would have a file called WhenMovingForward and this file will contain all the different tests for this functionality. Once a file is in place, we can start writing the various test methods for different behaviors. When naming methods, I will include the context for the setup and what the expectations were. By combining the test name and the method name, it will sound like a user story.</p>
<figure>
<p><img alt="Shows the test class with names in the test runner" src="https://softwarementorblog.blob.core.windows.net/images/test-class-with-names.png" />
  </p>
<figcaption>VS Code Test Runner showing test classes with test names</figcaption>
</figure>
<h4 id="organizing-your-test-with-arrangeactassert"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#organizing-your-test-with-arrangeactassert">Organizing Your Test With Arrange/Act/Assert</a></h4>
<p>At this point, we have the infrastructure in place for our tests, so how do we write a good test? Every good test will have three parts, Arrange, Act, and Assert. In the Arrange step, we‚Äôre going to focus on creating dependencies and getting the initial state setup for the test. For simple tests, this step may only consist of creating the class that we‚Äôre testing. For more complicated tests, there may be more dependencies to create, some methods to call, and possibly modifying the local environment. The Act step is where the method or property that we‚Äôre testing is called. This step should be the simplest portion of the test since it should only be a line or two of code. The third and final step is the Assert step where we check that the result we observed was correct. For simple tests, this could be a single line where check a value whereas more complicated tests may need to check various properties.</p>
<p>Using WhenMovingForward as an example, here‚Äôs what an example test might look like.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span>
<span class="normal"><a href="#__codelineno-1-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">using</span><span class="w"> </span><span class="nn">NUnit</span><span class="p">;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">MarsRover.UnitTests.RoverTests</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="p">{</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">  </span><span class="na">[TestFixture]</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nf">WhenMovingForward</span><span class="p">()</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">    </span><span class="na">[Test]</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">AndFacingNorthThenYIncreasesByOne</span><span class="p">()</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">      </span><span class="c1">// Arrange</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">rover</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rover</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Orientation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span><span class="p">.</span><span class="n">North</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">initialLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rover</span><span class="p">.</span><span class="n">Location</span><span class="p">;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">      </span><span class="c1">// Act</span>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">      </span><span class="n">rover</span><span class="p">.</span><span class="n">MoveForward</span><span class="p">();</span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">      </span><span class="c1">// Assert</span>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">      </span><span class="kt">var</span><span class="w"> </span><span class="n">expectedLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="p">{</span><span class="n">X</span><span class="o">=</span><span class="n">initialLocation</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">Y</span><span class="o">=</span><span class="n">initialLocation</span><span class="p">.</span><span class="n">Y</span><span class="o">+</span><span class="mi">1</span><span class="p">};</span>
<a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="w">      </span><span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="n">expectedLocation</span><span class="p">,</span><span class="w"> </span><span class="n">initialLocation</span><span class="p">);</span>
<a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>I like to think of Arrange/Act/Assert (AAA) as a science experiment because we have to first find a hypothesis, design some test to prove or disprove the hypothesis, get all the necessary ingredients together for the test, run the test, and see if we have evidence to support our hypothesis.</p>
<h3 id="wrapping-up"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#wrapping-up">Wrapping Up</a></h3>
<p>In this post, we took a brief break from the Mars Rover kata to get a quick understanding of unit testing and the naming conventions we‚Äôll be leveraging for the rest of the series! We first talked about the importance of naming and how if we follow <em>Given</em>, <em>When</em>, <em>Then</em> syntax, we can turn our user stories into readable test names for future engineers. From there, I showed you <em>Arrange</em>, <em>Act</em>, <em>Assert</em> notation for tests, and an example test using the convention. Next time, we‚Äôll start implementing Rover!</p>
<hr />
<h3 id="additional-resources"><a class="toclink" href="../../2020/05/26/mars-rover---intro-to-testing/#additional-resources">Additional Resources</a></h3>
<ul>
<li><em><a href="http://www.jeremybytes.com/Demos.aspx#UTMMF">Unit Testing Makes Me Faster</a></em> (presentation) by Jeremy Clark</li>
<li><em><a href="https://martinfowler.com/bliki/GivenWhenThen.html">Given, When, Then</a></em> by Martin Fowler</li>
<li><em><a href="https://amazon.com/Starting-Unit-Test-Hard-Think-ebook/dp/B00KIZ6JAC">Starting to Unit Test: Not as Hard as You Think</a></em> by Erik Dietrich</li>
<li><em><a href="https://amazon.com/Art-Unit-Testing-examples/dp/1617290890/">The Art of Unit Testing: with examples in C# 2nd Edition</a></em> by Roy Osherove</li>
<li>_<a href="https://taylonr.com/talks/everything-i-needed-to-know-about-debugging-i-learned-in-elementary-physics/">Everything I Needed To Know About Debugging I Learned In Elementary Physics</a> (presentation) by Nate Taylor</li>
</ul>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-20 00:00:00+00:00">May 20, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Learning Through Example</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="mars-rover-defining-the-problem"><a class="toclink" href="../../2020/05/20/mars-rover---defining-the-problem/">Mars Rover - Defining the Problem</a></h2>
<p>In this installment, we‚Äôll be looking at the problem description for Mars Rover. After becoming more familiar with the problem, we‚Äôll start by identifying the terminology that we should be using when talking about the problem by defining a ubiquitous language. From there, I‚Äôll show you how to break down the problem into various concepts and how to find the relationships between the various pieces. By the end of this post, you should feel comfortable exploring a new domain, understanding the terminology used, and defining relationships.</p>
<h3 id="problem-description"><a class="toclink" href="../../2020/05/20/mars-rover---defining-the-problem/#problem-description">Problem Description</a></h3>
<p>Congratulations and welcome to the S.P.A.C.E¬π Institute, good to have you aboard! Our big focus for the year is to develop a rover that can navigate the surface of Mars! While the engineers are working on the design and building of the rover, we can focus on building the navigation module and start iterating on its design. With that in mind, here are a couple of assumptions we‚Äôre going to make for this version.</p>
<ol>
<li>The rover will be traveling on a two-dimensional plane that should be modeled as a coordinate (X, Y)</li>
<li>The rover is guaranteed to be able to travel in a chosen direction (no worries about obstacles or other landmarks)</li>
</ol>
<p>Given the above assumptions, here are the business rules that the emulation will need to follow</p>
<ul>
<li>When the emulation starts, the rover will always be at (0, 0) and facing North</li>
<li>There are a series of commands that the rover can receive that can change its location or direction<ul>
<li>When the rover is told to move forward, then it will move one rover unit in the direction it‚Äôs facing</li>
<li>When the rover is told to move backward, then it will move rover unit away from the direction it‚Äôs facing</li>
<li>When the rover is told to turn left, it will rotate 90 degrees to the left, but not change its location</li>
<li>When the rover is told to turn right, it will rotate 90 degrees to the right, but not change its location</li>
<li>When the emulation is told to quit, the rover will stop receiving commands</li>
</ul>
</li>
<li>For the emulation, valid directions include North, East, South, and West</li>
<li>In order to help troubleshoot failures with the emulation, every time a command is received, both the command received, the rover‚Äôs location, and the rover‚Äôs orientation should be logged.</li>
</ul>
<p>¬π Simple Programming Application Checks Expertise</p>
<hr />
<h3 id="identifying-the-domain"><a class="toclink" href="../../2020/05/20/mars-rover---defining-the-problem/#identifying-the-domain">Identifying the Domain</a></h3>
<p>When building software, I want to understand the various business terms that are being used to describe the problem so that when I‚Äôm talking to subject matter experts (SMEs), I‚Äôm using the same terminology as they are. For those who are familiar with <em><a href="https://en.wikipedia.org/wiki/Domain-driven_design">Domain-Driven Design</a></em>, this practice of using the same terminology is known as defining a <a href="https://martinfowler.com/bliki/UbiquitousLanguage.html">ubiquitous language</a> and the goal is to make sure that when someone says <em>Command</em>, then we are all referring to the same concept. If you‚Äôve ever worked in a codebase where something was called one thing, but the business referred to it as something different, then you are familiar with the pain of having to map between the two concepts.</p>
<h4 id="find-the-nouns"><a class="toclink" href="../../2020/05/20/mars-rover---defining-the-problem/#find-the-nouns">Find The Nouns</a></h4>
<p>When working to define the ubiquitous language, a common approach is to find the nouns that are being used in the description as this can create the foundation of your classes (if following Object-Oriented principles) or your types (if following Functional Programming principles).</p>
<p>Looking over the description again, these nouns stood out to me:</p>
<figure>
<p><img alt="Identifies domain (Rover, Command, Location, Direction, and Orientation)" src="https://softwarementorblog.blob.core.windows.net/images/domain-models.jpg" />
  </p>
<figcaption>Domain models: Rover, Command, Location, Direction, and Orientation</figcaption>
</figure>
<h4 id="find-the-relationships"><a class="toclink" href="../../2020/05/20/mars-rover---defining-the-problem/#find-the-relationships">Find The Relationships</a></h4>
<p>Once the nouns have been found, I‚Äôll pivot to finding out how these different concepts are related to each other. One approach to finding these relationships is using ‚Äúhas-a‚Äù and ‚Äúis-a‚Äù relationships. At a high level, if two things are related through ‚Äúhas-a‚Äù, then those concepts should be composed together. If two concepts have an ‚Äúis-a‚Äù relationship, then I know that the concepts should be interchangeable for one another.</p>
<p>To help identify these relationships, I would work with the SME to understand what each of these concepts means and how they relate to each other. Since it‚Äôll be a bit hard to simulate a conversation, here‚Äôs the information that we would learn from our SME.</p>
<ul>
<li>A <em>Rover</em> has a <em>Location</em> and an <em>Orientation</em></li>
<li><em>Orientation</em> is the <em>Direction</em> that a <em>Rover</em> is facing</li>
<li><em>Location</em> is the coordinates that the <em>Rover</em> is located at</li>
<li>A <em>Command</em> is something that a <em>Rover</em> receives from the User</li>
<li>A <em>Direction</em> can be North, East, South, or West</li>
<li>A <em>Command</em> can be Move Forward, Move Backward, Turn Left,  Turn Right, or Quit</li>
</ul>
<p>With this new understanding, our concepts and relationships would look something like this:</p>
<figure>
<p><img alt="Domain model for Mars Rover" src="https://softwarementorblog.blob.core.windows.net/images/simple-domain-model-relationships.png" />
  </p>
<figcaption>Domain model relationships where Rover has a Location and an Orientation. Orientation is a Direction and Command is not related to anything.</figcaption>
</figure>
<h3 id="wrapping-up"><a class="toclink" href="../../2020/05/20/mars-rover---defining-the-problem/#wrapping-up">Wrapping Up</a></h3>
<p>In this post, we explored the problem description for the Mars Rover kata and built up our understanding of the various concepts by exploring the nouns. After finding the nouns, we leveraged ‚Äúhas-a‚Äù and ‚Äúis-a‚Äù thinking to come up with a rough idea of how the various concepts related to one another. In the next post, we‚Äôll be focusing on how to model these concepts in code!</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-20 00:00:00+00:00">May 20, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="./" class="md-meta__link">Learning Through Example</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="learning-through-example-mars-rover-kata"><a class="toclink" href="../../2020/05/20/learning-through-example--mars-rover-kata/">Learning Through Example ‚Äì Mars Rover Kata</a></h2>
<p>Over my career, I‚Äôve spent a lot of time bringing new engineers up to speed on how to break down problems, how to write better code, and how to write automated tests. What I‚Äôve come to find out is that there are a ton of resources on how to do each of these things individually, but not very many that brings all of these concepts together in one place. The purpose of this series is to bring all of these ideas together as we solve the <a href="https://kata-log.rocks/mars-rover-kata">Mars Rover kata</a>.</p>
<h3 id="purpose"><a class="toclink" href="../../2020/05/20/learning-through-example--mars-rover-kata/#purpose">Purpose</a></h3>
<p>For new engineers, this kata has about the right amount of complexity to explore these various concepts and help identify things to improve on. As a team lead at SentryOne, I‚Äôve onboard interns and our associate engineers using this kata as a launch point to teach them the tooling and processes we use. In addition, this kata serves as a method to evaluate their current skills so we can help round out a solid foundation for their career.</p>
<p>By the end of this series, you will have a better understanding of how to break down a problem into small, deliverable pieces while being able to write tests around new functionality. Even though there will be a lot of code to look at, none of these concepts are technology-specific so I challenge you to follow along with your tech stack of choice and see how you would implement some of these concepts in that stack. </p>
<h3 id="technologies-used"><a class="toclink" href="../../2020/05/20/learning-through-example--mars-rover-kata/#technologies-used">Technologies Used</a></h3>
<p>On the topic of technologies, I‚Äôll be using the following for my implementation of this kata. As long as you find the relevant tool for your technology stack, you should be able to follow along!</p>
<ul>
<li>Source Control: <a href="https://github.com/cameronpresley/lte-mars-rover">GitHub</a></li>
<li>Language/Framework: C# on <a href="https://dotnet.microsoft.com/download">.NET Core 3.1</a></li>
<li>Unit Testing Framework: <a href="https://nunit.org/">NUnit</a></li>
<li>Mocking Framework: <a href="https://nsubstitute.github.io/">NSubstitute</a></li>
<li>Editor: <a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
</ul>
<h4 id="series"><a class="toclink" href="../../2020/05/20/learning-through-example--mars-rover-kata/#series">Series</a></h4>
<ul>
<li><a href="../../2020/05/20/learning-through-example--mars-rover-kata/">Part 0 ‚Äì Introduction</a></li>
<li><a href="../../2020/05/20/mars-rover---defining-the-problem/">Part 1 ‚Äì Defining the Problem</a></li>
<li><a href="../../2020/05/19/mars-rover---modeling-concepts/">Part 2 ‚Äì Modeling Concepts</a></li>
<li><a href="../../2020/05/26/mars-rover---intro-to-testing/">Part 3 ‚Äì Intro to Testing</a></li>
<li><a href="../../2020/06/03/mars-rover--implementing-rover--creation/">Part 4 ‚Äì Creating a Rover</a></li>
<li><a href="../../2020/06/09/mars-rover--implementing-rover--moving-forward/">Part 5 ‚Äì Rover Moving Forward</a></li>
<li><a href="../../2020/06/16/mars-rover--implementing-rover--moving-backward/">Part 6 ‚Äì Rover Moving Backward</a></li>
<li><a href="../../2020/06/23/mars-rover--implementing-rover--turning-left/">Part 7 ‚Äì Rover Turning Left</a></li>
<li><a href="../../2020/06/30/mars-rover--implementing-rover--refactoring-rover/">Part 8 ‚Äì Refactoring Rover</a></li>
<li><a href="../../2020/07/07/mars-rover--implementing-rover--turn-right/">Part 9 ‚Äì Rover Turning Right</a></li>
<li><a href="../../2020/07/14/mars-rover--implementing-logger--design/">Part 10 ‚Äì Creating a Logger</a></li>
<li>Part 11 ‚Äì Logging to a File</li>
<li>Part 12 ‚Äì Combining Rover and Logger </li>
<li>Part 13 ‚Äì Implementing the User Interface</li>
<li>Part 14 ‚Äì Reflection</li>
</ul>
    
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <span class="md-pagination__current">1</span> <a class="md-pagination__link" href="page/2/">2</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../leadership/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Leadership">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Leadership
              </div>
            </div>
          </a>
        
        
          
          <a href="../process/" class="md-footer__link md-footer__link--next" aria-label="Next: Process">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Process
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.footer", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.ad38c271.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b66b2b78.min.js"></script>
      
    
  </body>
</html>