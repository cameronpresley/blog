
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Cameron Presley">
      
      
      
        <link rel="prev" href="../../../tooling/">
      
      
        <link rel="next" href="../../../../archive/2025/">
      
      
        
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16+insiders-4.53.16">
    
    
      
        <title>TypeScript - The Software Mentor</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.1caf78d2.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../stylesheets/page.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-ZE0MGVG7RJ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-ZE0MGVG7RJ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-ZE0MGVG7RJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#typescript" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="The Software Mentor" class="md-header__button md-logo" aria-label="The Software Mentor" data-md-component="logo">
      
  <img src="../../../../../assets/images/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Software Mentor
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              TypeScript
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        
  
  
    
  
  About Me

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../" class="md-tabs__link">
          
  
  
  Articles

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../courses/" class="md-tabs__link">
        
  
  
    
  
  Training Course

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../level-up/" class="md-tabs__link">
        
  
  
    
  
  Level Up Resources

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../presentations/" class="md-tabs__link">
        
  
  
    
  
  Presentations

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../speaking-schedule/" class="md-tabs__link">
        
  
  
    
  
  Speaking Schedule

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../story/" class="md-tabs__link">
        
  
  
    
  
  Story

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../resume/" class="md-tabs__link">
        
  
  
    
  
  Resume

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="The Software Mentor" class="md-nav__button md-logo" aria-label="The Software Mentor" data-md-component="logo">
      
  <img src="../../../../../assets/images/favicon.png" alt="logo">

    </a>
    The Software Mentor
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    About Me
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Articles
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Articles
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Archive
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Archive
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2025
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2024
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2023
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2020/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2020
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2018/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2018
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2015/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2015
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2014/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2014
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2013/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2013
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../net/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    .NET
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../c/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C#
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../career/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Career
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../coaching-corner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coaching Corner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../functional-programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Functional Programming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../interviewing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interviewing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../leadership/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Leadership
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../learning-through-example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning Through Example
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../solid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SOLID
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../today-i-learned/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Today I Learned
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../tooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tooling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="../../" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeScript
  

    
  </span>
  
  

      </a>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../courses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training Course
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../level-up/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level Up Resources
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../presentations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Presentations
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../speaking-schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Speaking Schedule
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Story
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../resume/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resume
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="typescript">TypeScript</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-07-24 00:00:00+00:00">Jul 24, 2023</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              7 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="having-coffee-with-deno-sharing-the-news"><a class="toclink" href="../../../../2023/07/24/having-coffee-with-deno---sharing-the-news/">Having Coffee with Deno - Sharing the News</a></h2>
<p>Welcome to the third installment of our Deno series, where we build a script that pairs up people for coffee.</p>
<p>In the <a href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/">last post</a>, we're dynamically pulling members of the Justice League from GitHub instead of a hardcoded list.</p>
<p>Like any good project, this approach works, but now the major problem is that we have to run the script, copy the output, and post it into our chat tool so everyone knows the schedule.</p>
<p>It'd be better if we could update our script to post this message instead. In this example, we're going to use <a href="https://api.slack.com/messaging/webhooks#getting_started">Slack and their incoming webhook</a>, but you could easily tweak this approach to work with other tools like <a href="https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=dotnet#create-incoming-webhooks-1">Microsoft Teams</a> or <a href="https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks">Discord</a>.</p>
<h3 id="the-approach"><a class="toclink" href="../../../../2023/07/24/having-coffee-with-deno---sharing-the-news/#the-approach">The Approach</a></h3>
<p>In order to for the script to post to Slack, we'll need to make the following changes:</p>
<ol>
<li>Follow <a href="https://api.slack.com/messaging/webhooks#getting_started">these docs from Slack</a> to create an application and enable the incoming webhooks.</li>
<li>Test that we can post a simple message to the channel</li>
<li>From here, we'll need to add code to make a POST call to the webhook with a message</li>
<li>Tweak the formatting so it looks nicer</li>
</ol>
<p><img alt="Justice League Planning" src="https://cdn.vox-cdn.com/uploads/chorus_asset/file/6221845/Screen_Shot_2016-03-21_at_12.08.04_PM.0.png" width="300%" /></p>
<h3 id="creating-the-slack-application-and-creating-the-webhook"><a class="toclink" href="../../../../2023/07/24/having-coffee-with-deno---sharing-the-news/#creating-the-slack-application-and-creating-the-webhook">Creating the Slack Application and creating the Webhook</a></h3>
<p>For this step, we'll follow the instructions <a href="https://api.slack.com/messaging/webhooks#getting_started">in the docs</a>, ensuring that we're hooking it up to the right channel.</p>
<p>After following the steps, you should see something like the following:</p>
<p><img alt="Image of Slack App with Incoming Webhook" src="https://softwarementorblog.blob.core.windows.net/images/deno-slack/slack.png" /></p>
<p>We can test that things are working correctly by running the <code>curl</code> command provided. If the message <code>Hello World</code> appears in the channel, congrats, you've got the incoming webhook created!</p>
<h3 id="modifying-the-script-to-post-to-webhook"><a class="toclink" href="../../../../2023/07/24/having-coffee-with-deno---sharing-the-news/#modifying-the-script-to-post-to-webhook">Modifying the Script to POST to Webhook</a></h3>
<p>We have the Slack app created and verified that the incoming webhook is working, so we'll need to add this integration to our script.</p>
<p>Since we have this incoming webhook URL and <strong>Slack recommends treating this as a secret</strong>, we'll need to add this to our <code>.env</code> file.</p>
<p><img alt="Keep your webhook ULR safe image" src="https://softwarementorblog.blob.core.windows.net/images/deno-slack/keep-url-safe.png" /></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">.env</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>GITHUB_API_TOKEN=&quot;&lt;yourTokenHere&gt;&quot;
<a id="__codelineno-12-2" name="__codelineno-12-2"></a>SLACK_WEBHOOK=&quot;&lt;yourWebHookHere&gt;&quot;
</code></pre></div></td></tr></table></div>
<p>With this secret added, we can write a new function, <code>sendMessage</code>, that'll make the POST call to Slack. Since this is a new integration, we'll add a new file, <code>slack.ts</code> to put it in.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">slack.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span>
<span class="normal"><a href="#__codelineno-13-20">20</a></span>
<span class="normal"><a href="#__codelineno-13-21">21</a></span>
<span class="normal"><a href="#__codelineno-13-22">22</a></span>
<span class="normal"><a href="#__codelineno-13-23">23</a></span>
<span class="normal"><a href="#__codelineno-13-24">24</a></span>
<span class="normal"><a href="#__codelineno-13-25">25</a></span>
<span class="normal"><a href="#__codelineno-13-26">26</a></span>
<span class="normal"><a href="#__codelineno-13-27">27</a></span>
<span class="normal"><a href="#__codelineno-13-28">28</a></span>
<span class="normal"><a href="#__codelineno-13-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="c1">// Using axiod for the web connection</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="k">import</span><span class="w"> </span><span class="nx">axiod</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;https://deno.land/x/axiod@0.26.2/mod.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="c1">// function to send a message to the webhook</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">sendMessage</span><span class="p">(</span><span class="nx">message</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="ow">void</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">  </span><span class="c1">// Get the webhookUrl from our environment</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">webhookUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Deno</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;SLACK_WEBHOOK&quot;</span><span class="p">)</span><span class="o">!</span><span class="p">;</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">    </span><span class="c1">// Send the POST request</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="nx">axiod</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">webhookUrl</span><span class="p">,</span><span class="w"> </span><span class="nx">message</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">      </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">        </span><span class="s2">&quot;Content-Type&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">      </span><span class="p">},</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="w">    </span><span class="c1">// Error handling</span>
<a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span>
<a id="__codelineno-13-20" name="__codelineno-13-20"></a><span class="w">        </span><span class="sb">`Failed to post message: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb">, </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="si">}</span><span class="sb">`</span>
<a id="__codelineno-13-21" name="__codelineno-13-21"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-13-22" name="__codelineno-13-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-13-23" name="__codelineno-13-23"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span>
<a id="__codelineno-13-24" name="__codelineno-13-24"></a><span class="w">      </span><span class="s2">&quot;Failed for non status reason &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<a id="__codelineno-13-25" name="__codelineno-13-25"></a><span class="w">    </span><span class="p">);</span>
<a id="__codelineno-13-26" name="__codelineno-13-26"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-13-27" name="__codelineno-13-27"></a><span class="p">}</span>
<a id="__codelineno-13-28" name="__codelineno-13-28"></a>
<a id="__codelineno-13-29" name="__codelineno-13-29"></a><span class="k">export</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sendMessage</span><span class="w"> </span><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>With <code>sendMessage</code> done, let's update <code>index.ts</code> to use this new functionality.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span>
<span class="normal"><a href="#__codelineno-14-12">12</a></span>
<span class="normal"><a href="#__codelineno-14-13">13</a></span>
<span class="normal"><a href="#__codelineno-14-14">14</a></span>
<span class="normal"><a href="#__codelineno-14-15">15</a></span>
<span class="normal"><a href="#__codelineno-14-16">16</a></span>
<span class="normal"><a href="#__codelineno-14-17">17</a></span>
<span class="normal"><a href="#__codelineno-14-18">18</a></span>
<span class="normal"><a href="#__codelineno-14-19">19</a></span>
<span class="normal"><a href="#__codelineno-14-20">20</a></span>
<span class="normal"><a href="#__codelineno-14-21">21</a></span>
<span class="normal"><a href="#__codelineno-14-22">22</a></span>
<span class="normal"><a href="#__codelineno-14-23">23</a></span>
<span class="normal"><a href="#__codelineno-14-24">24</a></span>
<span class="normal"><a href="#__codelineno-14-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">load</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;https://deno.land/std@0.195.0/dotenv/mod.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">  </span><span class="nx">GetOrganizationMemberResponse</span><span class="p">,</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">  </span><span class="nx">getMembersOfOrganization</span><span class="p">,</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./github.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">sendMessage</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./slack.ts&quot;</span><span class="p">;</span>
</span><a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Pair</span><span class="p">,</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">,</span><span class="w"> </span><span class="nx">shuffle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./utility.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="k">await</span><span class="w"> </span><span class="nx">load</span><span class="p">({</span><span class="w"> </span><span class="nx">export</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="c1">// Replace this with your actual organization name</span>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="kd">const</span><span class="w"> </span><span class="nx">organizationName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;JusticeLeague&quot;</span><span class="p">;</span>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="kd">const</span><span class="w"> </span><span class="nx">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">getMembersOfOrganization</span><span class="p">(</span><span class="nx">organizationName</span><span class="p">);</span>
<a id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="kd">const</span><span class="w"> </span><span class="nx">pairs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">(</span><span class="nx">shuffle</span><span class="p">(</span><span class="nx">names</span><span class="p">));</span>
<a id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="p">);</span>
<a id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="hll"><span class="c1">// Slack expects the payload to be an object of text, so we&#39;re doing that here for now</span>
</span><a id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="hll"><span class="k">await</span><span class="w"> </span><span class="nx">sendMessage</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">message</span><span class="w"> </span><span class="p">}));</span>
</span><a id="__codelineno-14-18" name="__codelineno-14-18"></a>
<a id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="nx">GetOrganizationMemberResponse</span><span class="o">&gt;</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-20" name="__codelineno-14-20"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="nx">GetOrganizationMemberResponse</span><span class="o">&gt;</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">=&gt;</span>
<a id="__codelineno-14-21" name="__codelineno-14-21"></a><span class="w">    </span><span class="sb">`</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">first</span><span class="p">.</span><span class="nx">login</span><span class="si">}</span><span class="sb"> meets with </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">second</span><span class="p">.</span><span class="nx">login</span><span class="si">}${</span>
<a id="__codelineno-14-22" name="__codelineno-14-22"></a><span class="w">      </span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">` and </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="p">.</span><span class="nx">login</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-14-23" name="__codelineno-14-23"></a><span class="w">    </span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<a id="__codelineno-14-24" name="__codelineno-14-24"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">pairs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">mapper</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
<a id="__codelineno-14-25" name="__codelineno-14-25"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>And if we were to run the above, we can see the following message get sent to Slack.</p>
<p><img alt="Message from Random Coffee" src="https://softwarementorblog.blob.core.windows.net/images/deno-slack/coffee-post.png" /></p>
<p>Nice! We could leave it here, but we could make the message prettier (having an unordered list and italicizing names), so let's work on that next.</p>
<h4 id="pretty-printing-the-message"><a class="toclink" href="../../../../2023/07/24/having-coffee-with-deno---sharing-the-news/#pretty-printing-the-message">Pretty Printing the Message</a></h4>
<p>So far, we could leave the messaging as is, however; it's a bit muddled. To help it pop, let's make the following changes.</p>
<ul>
<li><em>Italicize</em> the names</li>
<li>Start each pair with a bullet point</li>
</ul>
<p>Since <a href="https://api.slack.com/reference/surfaces/formatting#basics">Slack supports basic Markdown in the messages</a>, we can use the <code>_</code> for italicizing and <code>-</code> for the bullet points. So let's modify the <code>createMessage</code> function to add this formatting.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="nx">GetOrganizationMemberResponse</span><span class="o">&gt;</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">  </span><span class="c1">// Let&#39;s wrap each name with the &#39;_&#39; character</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">formatName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="sb">`_</span><span class="si">${</span><span class="nx">s</span><span class="si">}</span><span class="sb">_`</span><span class="p">;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="nx">GetOrganizationMemberResponse</span><span class="o">&gt;</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">=&gt;</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">    </span><span class="c1">// and start each pair with &#39;-&#39;</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">    </span><span class="sb">`- </span><span class="si">${</span><span class="nx">formatName</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">first</span><span class="p">.</span><span class="nx">login</span><span class="p">)</span><span class="si">}</span><span class="sb"> meets with </span><span class="si">${</span><span class="nx">formatName</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">second</span><span class="p">.</span><span class="nx">login</span><span class="p">)</span><span class="si">}${</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">      </span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">` and </span><span class="si">${</span><span class="nx">formatName</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="p">.</span><span class="nx">login</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">    </span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">pairs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">mapper</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>By making this small change, we now see the following message:</p>
<p><img alt="Formatted Slack Message with italics and bullets" src="https://softwarementorblog.blob.core.windows.net/images/deno-slack/formatted-slack-message.png" width:300px="width:300px" /></p>
<p>The messaging is better, but we're still missing some clarity. For example, what date is this for? Or what's the purpose of the message? Looking through <a href="https://app.slack.com/block-kit-builder/T0432GV8P">these docs</a>, it seems like we could add different text blocks (like titles). So let's see what this could look like.</p>
<p>One design approach is to encapsulate the complex logic for dealing with Slack and only expose a "common-sense" API for consumers. In this regard, I think using a <a href="https://refactoring.guru/design-patterns/facade">Facade pattern</a> would make sense.</p>
<p>We want to expose the ability to set a title and to set a message through one or more lines of text. Here's what that code would look like</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">slack.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span>
<span class="normal"><a href="#__codelineno-16-20">20</a></span>
<span class="normal"><a href="#__codelineno-16-21">21</a></span>
<span class="normal"><a href="#__codelineno-16-22">22</a></span>
<span class="normal"><a href="#__codelineno-16-23">23</a></span>
<span class="normal"><a href="#__codelineno-16-24">24</a></span>
<span class="normal"><a href="#__codelineno-16-25">25</a></span>
<span class="normal"><a href="#__codelineno-16-26">26</a></span>
<span class="normal"><a href="#__codelineno-16-27">27</a></span>
<span class="normal"><a href="#__codelineno-16-28">28</a></span>
<span class="normal"><a href="#__codelineno-16-29">29</a></span>
<span class="normal"><a href="#__codelineno-16-30">30</a></span>
<span class="normal"><a href="#__codelineno-16-31">31</a></span>
<span class="normal"><a href="#__codelineno-16-32">32</a></span>
<span class="normal"><a href="#__codelineno-16-33">33</a></span>
<span class="normal"><a href="#__codelineno-16-34">34</a></span>
<span class="normal"><a href="#__codelineno-16-35">35</a></span>
<span class="normal"><a href="#__codelineno-16-36">36</a></span>
<span class="normal"><a href="#__codelineno-16-37">37</a></span>
<span class="normal"><a href="#__codelineno-16-38">38</a></span>
<span class="normal"><a href="#__codelineno-16-39">39</a></span>
<span class="normal"><a href="#__codelineno-16-40">40</a></span>
<span class="normal"><a href="#__codelineno-16-41">41</a></span>
<span class="normal"><a href="#__codelineno-16-42">42</a></span>
<span class="normal"><a href="#__codelineno-16-43">43</a></span>
<span class="normal"><a href="#__codelineno-16-44">44</a></span>
<span class="normal"><a href="#__codelineno-16-45">45</a></span>
<span class="normal"><a href="#__codelineno-16-46">46</a></span>
<span class="normal"><a href="#__codelineno-16-47">47</a></span>
<span class="normal"><a href="#__codelineno-16-48">48</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="c1">// This class allows a user to set a title and lines and then use the</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="c1">// &#39;build&#39; method to create the payload to interact with Slack</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="kd">class</span><span class="w"> </span><span class="nx">MessageFacade</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">  </span><span class="c1">// setting some default values</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nx">header</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nx">lines</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[];</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">  </span><span class="kr">constructor</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">;</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">  </span><span class="c1">// I like making these types of classes fluent</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">  </span><span class="c1">// so that it returns itself.</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nx">setTitle</span><span class="p">(</span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">MessageFacade</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="nx">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">title</span><span class="p">;</span>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nx">addLineToMessage</span><span class="p">(</span><span class="nx">line</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="kt">string</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">MessageFacade</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">line</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">line</span><span class="p">);</span>
<a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="w">      </span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">line</span><span class="p">);</span>
<a id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<a id="__codelineno-16-26" name="__codelineno-16-26"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-27" name="__codelineno-16-27"></a>
<a id="__codelineno-16-28" name="__codelineno-16-28"></a><span class="w">  </span><span class="c1">// Here&#39;s where we take the content that the user provided</span>
<a id="__codelineno-16-29" name="__codelineno-16-29"></a><span class="w">  </span><span class="c1">// and convert it to the JSON shape that Slack expects</span>
<a id="__codelineno-16-30" name="__codelineno-16-30"></a><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nx">build</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-31" name="__codelineno-16-31"></a><span class="w">    </span><span class="c1">// create the header block if set, otherwise null</span>
<a id="__codelineno-16-32" name="__codelineno-16-32"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">headerBlock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">header</span>
<a id="__codelineno-16-33" name="__codelineno-16-33"></a><span class="w">      </span><span class="o">?</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-34" name="__codelineno-16-34"></a><span class="w">          </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;header&quot;</span><span class="p">,</span>
<a id="__codelineno-16-35" name="__codelineno-16-35"></a><span class="w">          </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;plain_text&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">this.header</span><span class="p">,</span><span class="w"> </span><span class="nx">emoji</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-16-36" name="__codelineno-16-36"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-37" name="__codelineno-16-37"></a><span class="w">      </span><span class="o">:</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-16-38" name="__codelineno-16-38"></a><span class="w">    </span><span class="c1">// convert each line to it&#39;s own section</span>
<a id="__codelineno-16-39" name="__codelineno-16-39"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">lineBlocks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">lines</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">line</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<a id="__codelineno-16-40" name="__codelineno-16-40"></a><span class="w">      </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;section&quot;</span><span class="p">,</span>
<a id="__codelineno-16-41" name="__codelineno-16-41"></a><span class="w">      </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kr">type</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;mrkdwn&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">text</span><span class="o">:</span><span class="w"> </span><span class="kt">line</span><span class="w"> </span><span class="p">},</span>
<a id="__codelineno-16-42" name="__codelineno-16-42"></a><span class="w">    </span><span class="p">}));</span>
<a id="__codelineno-16-43" name="__codelineno-16-43"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
<a id="__codelineno-16-44" name="__codelineno-16-44"></a><span class="w">      </span><span class="c1">// take all blocks that have a value and set it here</span>
<a id="__codelineno-16-45" name="__codelineno-16-45"></a><span class="w">      </span><span class="nx">blocks</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="nx">headerBlock</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">lineBlocks</span><span class="p">].</span><span class="nx">filter</span><span class="p">(</span><span class="nb">Boolean</span><span class="p">),</span>
<a id="__codelineno-16-46" name="__codelineno-16-46"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-16-47" name="__codelineno-16-47"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-48" name="__codelineno-16-48"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With the facade in place, let's look at implementing this in <code>index.ts</code></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span>
<span class="normal"><a href="#__codelineno-17-6">6</a></span>
<span class="normal"><a href="#__codelineno-17-7">7</a></span>
<span class="normal"><a href="#__codelineno-17-8">8</a></span>
<span class="normal"><a href="#__codelineno-17-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="c1">// ... code to get the pairs and formatted lines</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="c1">// using the facade with the fluent syntax</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">MessageFacade</span><span class="p">()</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">  </span><span class="p">.</span><span class="nx">setTitle</span><span class="p">(</span><span class="sb">` Random Coffee `</span><span class="p">)</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">  </span><span class="p">.</span><span class="nx">addLineToMessage</span><span class="p">(</span><span class="nx">formattedPairs</span><span class="p">)</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">  </span><span class="p">.</span><span class="nx">build</span><span class="p">();</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="k">await</span><span class="w"> </span><span class="nx">sendMessage</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>When we run the script now, we get the following message:</p>
<p><img alt="Random Coffee Message with Header and Icons" src="https://softwarementorblog.blob.core.windows.net/images/deno-slack/pretty-printed-message.png" /></p>
<h3 id="wrapping-up"><a class="toclink" href="../../../../2023/07/24/having-coffee-with-deno---sharing-the-news/#wrapping-up">Wrapping Up</a></h3>
<p>In this post, we changed our script from posting its Random Coffee message to the console window to instead posting it into a Slack channel using an Incoming Webhook. By making this change, we were able to remove a manual step (e.g., us copying the message into the channel), and we were able to use some cool emojis and better formatting.</p>
<p>In the final post, we'll take this one step further by automating the script using scheduled jobs via GitHub Actions.</p>
<p>As always, you can find a full working version of this bot <a href="https://github.com/cameronpresley/random-coffee">on my GitHub</a>.</p>
<h3 id="other-posts-in-the-series"><a class="toclink" href="../../../../2023/07/24/having-coffee-with-deno---sharing-the-news/#other-posts-in-the-series">Other Posts In The Series</a></h3>
<ul>
<li><a href="../../../../2023/06/26/having-coffee-with-deno---inspiration/">Having Coffee with Deno - Inspiration</a></li>
<li><a href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/">Having Coffee with Deno - Dynamic Names</a></li>
<li><a href="../../../../2023/07/28/having-coffee-with-deno---automating-all-the-things/">Having Coffee with Deno - Automating All the Things</a></li>
</ul>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-07-10 00:00:00+00:00">Jul 10, 2023</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              9 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="having-coffee-with-deno-dynamic-names"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/">Having Coffee with Deno - Dynamic Names</a></h2>
<p>Welcome to the second installment of our Deno series, where we build a script that pairs up people for coffee.</p>
<p>In the <a href="../../../../2023/06/26/having-coffee-with-deno---inspiration/">last post</a>, we built a script that helped the Justice League meet up for coffee.</p>
<p>As of right now, our script looks like the following.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span>
<span class="normal"><a href="#__codelineno-28-18">18</a></span>
<span class="normal"><a href="#__codelineno-28-19">19</a></span>
<span class="normal"><a href="#__codelineno-28-20">20</a></span>
<span class="normal"><a href="#__codelineno-28-21">21</a></span>
<span class="normal"><a href="#__codelineno-28-22">22</a></span>
<span class="normal"><a href="#__codelineno-28-23">23</a></span>
<span class="normal"><a href="#__codelineno-28-24">24</a></span>
<span class="normal"><a href="#__codelineno-28-25">25</a></span>
<span class="normal"><a href="#__codelineno-28-26">26</a></span>
<span class="normal"><a href="#__codelineno-28-27">27</a></span>
<span class="normal"><a href="#__codelineno-28-28">28</a></span>
<span class="normal"><a href="#__codelineno-28-29">29</a></span>
<span class="normal"><a href="#__codelineno-28-30">30</a></span>
<span class="normal"><a href="#__codelineno-28-31">31</a></span>
<span class="normal"><a href="#__codelineno-28-32">32</a></span>
<span class="normal"><a href="#__codelineno-28-33">33</a></span>
<span class="normal"><a href="#__codelineno-28-34">34</a></span>
<span class="normal"><a href="#__codelineno-28-35">35</a></span>
<span class="normal"><a href="#__codelineno-28-36">36</a></span>
<span class="normal"><a href="#__codelineno-28-37">37</a></span>
<span class="normal"><a href="#__codelineno-28-38">38</a></span>
<span class="normal"><a href="#__codelineno-28-39">39</a></span>
<span class="normal"><a href="#__codelineno-28-40">40</a></span>
<span class="normal"><a href="#__codelineno-28-41">41</a></span>
<span class="normal"><a href="#__codelineno-28-42">42</a></span>
<span class="normal"><a href="#__codelineno-28-43">43</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="w">  </span><span class="s2">&quot;Batman&quot;</span><span class="p">,</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">  </span><span class="s2">&quot;Superman&quot;</span><span class="p">,</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">  </span><span class="s2">&quot;Green Lantern&quot;</span><span class="p">,</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="w">  </span><span class="s2">&quot;Wonder Woman&quot;</span><span class="p">,</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="w">  </span><span class="s2">&quot;Static Shock&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// one of my favorite DC heroes!</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="w">  </span><span class="s2">&quot;The Flash&quot;</span><span class="p">,</span>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">  </span><span class="s2">&quot;Aquaman&quot;</span><span class="p">,</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">  </span><span class="s2">&quot;Martian Manhunter&quot;</span><span class="p">,</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="p">];</span>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="kd">const</span><span class="w"> </span><span class="nx">pairs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">(</span><span class="nx">shuffle</span><span class="p">(</span><span class="nx">names</span><span class="p">));</span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="p">);</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a>
<a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="kd">function</span><span class="w"> </span><span class="nx">shuffle</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...</span><span class="nx">items</span><span class="p">];</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-18" name="__codelineno-28-18"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">i</span><span class="p">);</span>
<a id="__codelineno-28-19" name="__codelineno-28-19"></a><span class="w">    </span><span class="p">[</span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="w"> </span><span class="nx">result</span><span class="p">[</span><span class="nx">j</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">result</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span><span class="w"> </span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
<a id="__codelineno-28-20" name="__codelineno-28-20"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-28-21" name="__codelineno-28-21"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="p">;</span>
<a id="__codelineno-28-22" name="__codelineno-28-22"></a><span class="p">}</span>
<a id="__codelineno-28-23" name="__codelineno-28-23"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Pair</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">;</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">;</span><span class="w"> </span><span class="nx">third?</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-28-24" name="__codelineno-28-24"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">Pair</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-25" name="__codelineno-28-25"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-26" name="__codelineno-28-26"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-28-27" name="__codelineno-28-27"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-28-28" name="__codelineno-28-28"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-28-29" name="__codelineno-28-29"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-30" name="__codelineno-28-30"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">pair</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="kt">items</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="kt">items</span><span class="p">[</span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-28-31" name="__codelineno-28-31"></a><span class="w">    </span><span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pair</span><span class="p">);</span>
<a id="__codelineno-28-32" name="__codelineno-28-32"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-28-33" name="__codelineno-28-33"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-34" name="__codelineno-28-34"></a><span class="w">    </span><span class="nx">results</span><span class="p">[</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">].</span><span class="nx">third</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">items</span><span class="p">[</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-28-35" name="__codelineno-28-35"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-28-36" name="__codelineno-28-36"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">results</span><span class="p">;</span>
<a id="__codelineno-28-37" name="__codelineno-28-37"></a><span class="p">}</span>
<a id="__codelineno-28-38" name="__codelineno-28-38"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-39" name="__codelineno-28-39"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
<a id="__codelineno-28-40" name="__codelineno-28-40"></a><span class="w">    </span><span class="sb">`</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">first</span><span class="si">}</span><span class="sb"> meets with </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">second</span><span class="si">}${</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">` and </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<a id="__codelineno-28-41" name="__codelineno-28-41"></a>
<a id="__codelineno-28-42" name="__codelineno-28-42"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">pairs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">mapper</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
<a id="__codelineno-28-43" name="__codelineno-28-43"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Even though this approach works, the major problem is that every time there's a member change in the Justice League (which seems to happen more often than not), we have to go back and update the list manually.</p>
<p>It'd be better if we could get this list dynamically instead. Given that the League are great developers, they have their own GitHub organization. Let's work on integrating with GitHub's API to get the list of names.</p>
<h3 id="the-approach"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#the-approach">The Approach</a></h3>
<p>To get the list of names from GitHub, we'll need to do the following.</p>
<ol>
<li>First, we need to figure out which GitHub endpoint will give us the members of the League. This, in turn, will also tell us what permissions we need for our API scope.</li>
<li>Now that we have a secret, we need to update our script to read from an <code>.env</code> file.</li>
<li>Once we have the secret being read, we can create a function to retrieve the members of the League.</li>
<li>Miscellaneous refactoring of the main script to handle a function returning complex types instead of strings.</li>
</ol>
<p><img alt="Justice League Planning" src="https://cdn.vox-cdn.com/uploads/chorus_asset/file/6221845/Screen_Shot_2016-03-21_at_12.08.04_PM.0.png" width="300%" /></p>
<h3 id="laying-the-foundation"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#laying-the-foundation">Laying the Foundation</a></h3>
<p>Before we start, we should reactor our current file. It works, but we have a mix of utility functions (<code>shuffle</code> and <code>createPairsFrom</code>) combined with presentation functions (<code>createMessage</code>). Let's go ahead and move <code>shuffle</code> and <code>createPairsFrom</code> to their own module.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">utility.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span>
<span class="normal"><a href="#__codelineno-29-13">13</a></span>
<span class="normal"><a href="#__codelineno-29-14">14</a></span>
<span class="normal"><a href="#__codelineno-29-15">15</a></span>
<span class="normal"><a href="#__codelineno-29-16">16</a></span>
<span class="normal"><a href="#__codelineno-29-17">17</a></span>
<span class="normal"><a href="#__codelineno-29-18">18</a></span>
<span class="normal"><a href="#__codelineno-29-19">19</a></span>
<span class="normal"><a href="#__codelineno-29-20">20</a></span>
<span class="normal"><a href="#__codelineno-29-21">21</a></span>
<span class="normal"><a href="#__codelineno-29-22">22</a></span>
<span class="normal"><a href="#__codelineno-29-23">23</a></span>
<span class="normal"><a href="#__codelineno-29-24">24</a></span>
<span class="normal"><a href="#__codelineno-29-25">25</a></span>
<span class="normal"><a href="#__codelineno-29-26">26</a></span>
<span class="normal"><a href="#__codelineno-29-27">27</a></span>
<span class="normal"><a href="#__codelineno-29-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Pair</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">;</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">;</span><span class="w"> </span><span class="nx">third?</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">shuffle</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...</span><span class="nx">items</span><span class="p">];</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">i</span><span class="p">);</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">    </span><span class="p">[</span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="w"> </span><span class="nx">result</span><span class="p">[</span><span class="nx">j</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">result</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span><span class="w"> </span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="p">;</span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="p">}</span>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">Pair</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-14" name="__codelineno-29-14"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-29-15" name="__codelineno-29-15"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-29-16" name="__codelineno-29-16"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-29-17" name="__codelineno-29-17"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-18" name="__codelineno-29-18"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">pair</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="kt">items</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="kt">items</span><span class="p">[</span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-29-19" name="__codelineno-29-19"></a><span class="w">    </span><span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pair</span><span class="p">);</span>
<a id="__codelineno-29-20" name="__codelineno-29-20"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-29-21" name="__codelineno-29-21"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-22" name="__codelineno-29-22"></a><span class="w">    </span><span class="nx">results</span><span class="p">[</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">].</span><span class="nx">third</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">items</span><span class="p">[</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-29-23" name="__codelineno-29-23"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-29-24" name="__codelineno-29-24"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">results</span><span class="p">;</span>
<a id="__codelineno-29-25" name="__codelineno-29-25"></a><span class="p">}</span>
<a id="__codelineno-29-26" name="__codelineno-29-26"></a>
<a id="__codelineno-29-27" name="__codelineno-29-27"></a><span class="k">export</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">,</span><span class="w"> </span><span class="nx">shuffle</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-29-28" name="__codelineno-29-28"></a><span class="k">export</span><span class="w"> </span><span class="kr">type</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Pair</span><span class="w"> </span><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>With these changes, we can update <code>index.ts</code> to be:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span>
<span class="normal"><a href="#__codelineno-30-14">14</a></span>
<span class="normal"><a href="#__codelineno-30-15">15</a></span>
<span class="normal"><a href="#__codelineno-30-16">16</a></span>
<span class="normal"><a href="#__codelineno-30-17">17</a></span>
<span class="normal"><a href="#__codelineno-30-18">18</a></span>
<span class="normal"><a href="#__codelineno-30-19">19</a></span>
<span class="normal"><a href="#__codelineno-30-20">20</a></span>
<span class="normal"><a href="#__codelineno-30-21">21</a></span>
<span class="normal"><a href="#__codelineno-30-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Pair</span><span class="p">,</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">,</span><span class="w"> </span><span class="nx">shuffle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./module.ts&quot;</span><span class="p">;</span>
</span><a id="__codelineno-30-2" name="__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">  </span><span class="s2">&quot;Batman&quot;</span><span class="p">,</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">  </span><span class="s2">&quot;Superman&quot;</span><span class="p">,</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="w">  </span><span class="s2">&quot;Green Lantern&quot;</span><span class="p">,</span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">  </span><span class="s2">&quot;Wonder Woman&quot;</span><span class="p">,</span>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">  </span><span class="s2">&quot;Static Shock&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// one of my favorite DC heroes!</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="w">  </span><span class="s2">&quot;The Flash&quot;</span><span class="p">,</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">  </span><span class="s2">&quot;Aquaman&quot;</span><span class="p">,</span>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="w">  </span><span class="s2">&quot;Martian Manhunter&quot;</span><span class="p">,</span>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="p">];</span>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="kd">const</span><span class="w"> </span><span class="nx">pairs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">(</span><span class="nx">shuffle</span><span class="p">(</span><span class="nx">names</span><span class="p">));</span>
<a id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="p">);</span>
<a id="__codelineno-30-15" name="__codelineno-30-15"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
<a id="__codelineno-30-16" name="__codelineno-30-16"></a>
<a id="__codelineno-30-17" name="__codelineno-30-17"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-18" name="__codelineno-30-18"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
<a id="__codelineno-30-19" name="__codelineno-30-19"></a><span class="w">    </span><span class="sb">`</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">first</span><span class="si">}</span><span class="sb"> meets with </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">second</span><span class="si">}${</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">` and </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<a id="__codelineno-30-20" name="__codelineno-30-20"></a>
<a id="__codelineno-30-21" name="__codelineno-30-21"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">pairs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">mapper</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
<a id="__codelineno-30-22" name="__codelineno-30-22"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="getting-github"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#getting-github">Getting GitHub</a></h3>
<p>Now that our code is more tidy, we can focus on figuring out which GitHub endpoint(s) to use to figure out the members of the Justice League.</p>
<p>Taking a look at the <a href="https://docs.github.com/en/rest?apiVersion=2022-11-28">docs</a>, we see that there are two different options.</p>
<ol>
<li><a href="https://docs.github.com/en/rest/orgs/members?apiVersion=2022-11-28#list-organization-members">Get members of an Organization</a></li>
<li><a href="https://docs.github.com/en/rest/teams/members?apiVersion=2022-11-28#list-team-members">Get members of a Team</a></li>
</ol>
<p>What's the difference between the two? In GitHub parlance, an <a href="https://docs.github.com/en/organizations/collaborating-with-groups-in-organizations/about-organizations#about-organizations"><em>Organization</em></a> is an overarching entity that consists of members which, in turn, can be part of multiple teams.</p>
<p>Using the Justice League as an example, it's an organization that contains Batman, and Batman can be part of the <em>Justice League Founding Team</em> and a member of the <em>Batfamily Team</em>.</p>
<p>Since we want to pair everyone up in the Justice League, we'll use the <em>Get members of an Organization</em> approach.</p>
<h3 id="working-with-secrets"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#working-with-secrets">Working with Secrets</a></h3>
<p>To interact with the endpoint, we'll need to create an API token for GitHub. Looking over the docs, our token needs to have the <code>read:org</code> scope. We can create this token by following the instructions <a href="https://docs.github.com/en/rest/overview/authenticating-to-the-rest-api?apiVersion=2022-11-28#authenticating-with-a-personal-access-token">here about creating a Personal Auth Token (PAT)</a>.</p>
<p>Once we have the token, we can invoke the endpoint with cURL or Postman to verify that we can communicate with the endpoint correctly.</p>
<p>After we've verified, we'll need a way to get this API token into our script. Given that this is sensitive information, we absolutely should <strong>NOT</strong> check this into the source code.</p>
<h4 id="creating-an-env-file"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#creating-an-env-file">Creating an ENV File</a></h4>
<p>A common way of dealing with that is to use an <em>.env</em> file which doesn't get checked in, but our application can use it during runtime to get secrets.</p>
<p>Let's go ahead and create the <code>.env</code> file and put our API token here.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">.env</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a>GITHUB_BEARER_TOKEN=&quot;INSERT_TOKEN_HERE&quot;
</code></pre></div></td></tr></table></div>
<p>Our problem now is that if we check <code>git status</code>, we'll see this file listed as a change. We don't want to check this in, so let's add a <code>.gitignore</code> file.</p>
<h4 id="adding-a-gitignore-file"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#adding-a-gitignore-file">Adding a .gitignore File</a></h4>
<p>With the <code>.env</code> file created, we need to create a <a href="https://git-scm.com/docs/gitignore#_description">.gitignore</a> file, which tells Git not to check in certain files.</p>
<p>Let's go ahead and add the file. You can enter the below, or you can use the Node gitignore file (found <a href="https://github.com/github/gitignore/blob/main/Node.gitignore">here</a>)</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">.gitignore</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a>.env # ignores all .env files in the root directory
</code></pre></div></td></tr></table></div>
<p>We can validate that we've done this correctly if we run <code>git status</code> and don't see <code>.env</code> showing up anymore as a changed file.</p>
<h4 id="loading-our-env-file"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#loading-our-env-file">Loading Our Env File</a></h4>
<p>Now that we have the file created, we need to make sure that this file loads at runtime.</p>
<p>In our <code>index.ts</code> file, let's make the following changes.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span>
<span class="normal"><a href="#__codelineno-33-4">4</a></span>
<span class="normal"><a href="#__codelineno-33-5">5</a></span>
<span class="normal"><a href="#__codelineno-33-6">6</a></span>
<span class="normal"><a href="#__codelineno-33-7">7</a></span>
<span class="normal"><a href="#__codelineno-33-8">8</a></span>
<span class="normal"><a href="#__codelineno-33-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">loadEnv</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;https://deno.land/x/dotenv@v3.2.2/mod.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="c1">// other imports</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="c1">// This loads the .env file and adds them to the environment variable list</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="k">await</span><span class="w"> </span><span class="nx">loadEnv</span><span class="p">({</span><span class="w"> </span><span class="nx">export</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="c1">// Deno.env.get(&quot;name&quot;) retrieves the value from an environment variable named &quot;name&quot;</span>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Deno</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;GITHUB_BEARER_TOKEN&quot;</span><span class="p">));</span>
<a id="__codelineno-33-8" name="__codelineno-33-8"></a>
<a id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="c1">// remaining code</span>
</code></pre></div></td></tr></table></div>
<p>When we run the script now with <code>deno run</code>, we get an interesting prompt:</p>
<blockquote>
Deno requests read access to ".env".
<br />
- Requested by `Deno.readFileSync()` API.
<br />
- <i>Run again with --allow-read to bypass this prompt</i>
<br />
- Allow?
<br />
</blockquote>

<p>This is one of the coolest parts about Deno; it has a security system that prevents scripts from doing something that you hadn't intended through its <a href="https://deno.land/manual@v1.33.4/basics/permissions">Permissions</a> framework.</p>
<p>For example, if you weren't expecting your script to read from the <code>env</code> file, it'll prompt you to accept. <a href="https://jfrog.com/blog/npm-package-hijacking-through-domain-takeover-how-bad-is-this-new-attack/">Since packages can be taken over and updated to do nefarious things, this is a terrific idea</a>.</p>
<p>The permissions can be tuned (e.g., you're only allowed to read from the .env file), or you can give blanket permissions. In our cases, two resources are being used (the ability to read the <code>.env</code> file and the ability to read the <code>GITHUB_BEARER_TOKEN</code> environment variable).</p>
<p>Let's run the command with the <code>allow-read</code> and <code>allow-env</code> flags.</p>
<p><code>deno run --allow-run --allow-env ./index.ts</code></p>
<p>If the bearer token gets printed, we've got the <code>.env</code> file created correctly and can proceed to the next step.</p>
<h3 id="lets-get-dynamic"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#lets-get-dynamic">Let's Get Dynamic</a></h3>
<p>Now that we have the bearer token, we can work on calling the GitHub Organization endpoint to retrieve the members.</p>
<p>Since this is GitHub related, we should create a new file, <code>github.ts</code>, to host our functions and types.</p>
<h4 id="adding-axiod"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#adding-axiod">Adding axiod</a></h4>
<p>In the <code>github.ts</code> file, we're going to be use <a href="https://deno.land/x/axiod@0.26.2">axiod</a> for communication. It's similar to axios in Node and is better than then the built-in fetch API.</p>
<p>Let's go ahead and bring in the import.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">github.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="k">import</span><span class="w"> </span><span class="nx">axiod</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;https://deno.land/x/axiod@0.26.2/mod.ts&quot;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<h4 id="calling-the-organization-endpoint"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#calling-the-organization-endpoint">Calling the Organization Endpoint</a></h4>
<p>With <code>axiod</code> pulled in, let's write the function to interact with the GitHub API.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">github.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span>
<span class="normal"><a href="#__codelineno-35-19">19</a></span>
<span class="normal"><a href="#__codelineno-35-20">20</a></span>
<span class="normal"><a href="#__codelineno-35-21">21</a></span>
<span class="normal"><a href="#__codelineno-35-22">22</a></span>
<span class="normal"><a href="#__codelineno-35-23">23</a></span>
<span class="normal"><a href="#__codelineno-35-24">24</a></span>
<span class="normal"><a href="#__codelineno-35-25">25</a></span>
<span class="normal"><a href="#__codelineno-35-26">26</a></span>
<span class="normal"><a href="#__codelineno-35-27">27</a></span>
<span class="normal"><a href="#__codelineno-35-28">28</a></span>
<span class="normal"><a href="#__codelineno-35-29">29</a></span>
<span class="normal"><a href="#__codelineno-35-30">30</a></span>
<span class="normal"><a href="#__codelineno-35-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="c1">// Brining in the axiod library</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="k">import</span><span class="w"> </span><span class="nx">axiod</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;https://deno.land/x/axiod@0.26.2/mod.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getMembersOfOrganization</span><span class="p">(</span><span class="nx">orgName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">any</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`https://api.github.com/orgs/</span><span class="si">${</span><span class="nx">orgName</span><span class="si">}</span><span class="sb">/members`</span><span class="p">;</span>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">  </span><span class="c1">// Necessary headers are found on the API docs</span>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="w">    </span><span class="nx">Accept</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;application/vnd.github+json&quot;</span><span class="p">,</span>
<a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="w">    </span><span class="nx">Authorization</span><span class="o">:</span><span class="w"> </span><span class="sb">`Bearer </span><span class="si">${</span><span class="nx">Deno</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;GITHUB_BEARER_TOKEN&quot;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
<a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="w">    </span><span class="s2">&quot;X-GitHub-Api-Version&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;2022-11-28&quot;</span><span class="p">,</span>
<a id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-35-12" name="__codelineno-35-12"></a>
<a id="__codelineno-35-13" name="__codelineno-35-13"></a><span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">resp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">axiod</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">any</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-15" name="__codelineno-35-15"></a><span class="w">      </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="kt">headers</span><span class="p">,</span>
<a id="__codelineno-35-16" name="__codelineno-35-16"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-35-17" name="__codelineno-35-17"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">resp</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
<a id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-19" name="__codelineno-35-19"></a><span class="w">    </span><span class="c1">// Response was received, but non-2xx status code</span>
<a id="__codelineno-35-20" name="__codelineno-35-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-21" name="__codelineno-35-21"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span>
<a id="__codelineno-35-22" name="__codelineno-35-22"></a><span class="w">        </span><span class="sb">`Failed to get members: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb">, </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusText</span><span class="si">}</span><span class="sb">`</span>
<a id="__codelineno-35-23" name="__codelineno-35-23"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-35-24" name="__codelineno-35-24"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-25" name="__codelineno-35-25"></a><span class="w">      </span><span class="c1">// Response wasn&#39;t received</span>
<a id="__codelineno-35-26" name="__codelineno-35-26"></a><span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span>
<a id="__codelineno-35-27" name="__codelineno-35-27"></a><span class="w">        </span><span class="s2">&quot;Failed for non status reason &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<a id="__codelineno-35-28" name="__codelineno-35-28"></a><span class="w">      </span><span class="p">);</span>
<a id="__codelineno-35-29" name="__codelineno-35-29"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-35-30" name="__codelineno-35-30"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-35-31" name="__codelineno-35-31"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>To prove this is working, we can call this function in the <code>index.ts</code> file and verify that we're getting a response.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span>
<span class="normal"><a href="#__codelineno-36-3">3</a></span>
<span class="normal"><a href="#__codelineno-36-4">4</a></span>
<span class="normal"><a href="#__codelineno-36-5">5</a></span>
<span class="normal"><a href="#__codelineno-36-6">6</a></span>
<span class="normal"><a href="#__codelineno-36-7">7</a></span>
<span class="normal"><a href="#__codelineno-36-8">8</a></span>
<span class="normal"><a href="#__codelineno-36-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">loadEnv</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;https://deno.land/x/dotenv@v3.2.2/mod.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="hll"><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getMembersOfOrganization</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./github.ts&quot;</span><span class="p">;</span>
</span><a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Pair</span><span class="p">,</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">,</span><span class="w"> </span><span class="nx">shuffle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./utility.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="k">await</span><span class="w"> </span><span class="nx">loadEnv</span><span class="p">({</span><span class="w"> </span><span class="nx">export</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">membersOfOrganization</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">getMembersOfOrganization</span><span class="p">(</span><span class="s2">&quot;JusticeLeague&quot;</span><span class="p">);</span>
</span><a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="hll"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">membersOfOrganization</span><span class="p">));</span>
</span><a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="c1">// rest of the file</span>
</code></pre></div></td></tr></table></div>
<p>Now let's rerun the script.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a>deno<span class="w"> </span>run<span class="w"> </span>--allow-read<span class="w"> </span>--allow-env<span class="w"> </span>./main.ts
</code></pre></div></td></tr></table></div>
<blockquote>
Deno requests net access to "api.github.com"
<br />
- Requested by `fetch` API.
<br />
- <i>Run again with --allow-net to bypass this prompt.</i>
</blockquote>

<p>Ah! Our script is now doing something new (making network calls), so we'll need to allow that permission by using the <code>--allow-net</code> flag.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a>deno<span class="w"> </span>run<span class="w"> </span>--allow-read<span class="w"> </span>--allow-env<span class="w"> </span>--allow-net<span class="w"> </span>./main.ts
</code></pre></div></td></tr></table></div>
<p>If everything has worked, you should see a bunch of JSON printed to the screen. Success!</p>
<h4 id="creating-the-response-type"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#creating-the-response-type">Creating the Response Type</a></h4>
<p>At this point, we're making the call, but we're using a pesky <code>any</code> for the response, which works, but it doesn't help us with what properties we have to work with.</p>
<p>Looking at the <a href="https://docs.github.com/en/rest/orgs/members?apiVersion=2022-11-28#list-organization-members">response schema</a>, it seems the main field we need is <code>login</code>. So let's go ahead and create a type that includes that field.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">github.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-39-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-39-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-39-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-39-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-39-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-39-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-39-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-39-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-39-10">10</a></span>
<span class="normal"><a href="#__codelineno-39-11">11</a></span>
<span class="normal"><a href="#__codelineno-39-12">12</a></span>
<span class="normal"><a href="#__codelineno-39-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">GetOrganizationMemberResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="w">  </span><span class="nx">login</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="p">};</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">getMembersOfOrganization</span><span class="p">(</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">  </span><span class="nx">orgName</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">GetOrganizationMemberResponse</span><span class="p">[]</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-8" name="__codelineno-39-8"></a><span class="w">  </span><span class="c1">//code</span>
<a id="__codelineno-39-9" name="__codelineno-39-9"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">resp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">axiod</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">GetOrganizationMemberResponse</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-10" name="__codelineno-39-10"></a><span class="w">    </span><span class="nx">headers</span><span class="o">:</span><span class="w"> </span><span class="kt">headers</span><span class="p">,</span>
<a id="__codelineno-39-11" name="__codelineno-39-11"></a><span class="w">  </span><span class="p">});</span>
<a id="__codelineno-39-12" name="__codelineno-39-12"></a><span class="w">  </span><span class="c1">// rest of the code</span>
<a id="__codelineno-39-13" name="__codelineno-39-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>We can rerun our code and verify that everything is still working, but now with better type safety.</p>
<h3 id="cleaning-up"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#cleaning-up">Cleaning Up</a></h3>
<p>Now that we have this function written, we can work to integrate it with our <code>index.ts</code> script.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">loadEnv</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;https://deno.land/x/dotenv@v3.2.2/mod.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">getMembersOfOrganization</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./github.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Pair</span><span class="p">,</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">,</span><span class="w"> </span><span class="nx">shuffle</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./utility.ts&quot;</span><span class="p">;</span>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="hll"><span class="k">await</span><span class="w"> </span><span class="nx">loadEnv</span><span class="p">({</span><span class="w"> </span><span class="nx">export</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="w"> </span><span class="p">});</span>
</span><a id="__codelineno-40-6" name="__codelineno-40-6"></a>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="kd">const</span><span class="w"> </span><span class="nx">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">getMembersOfOrganization</span><span class="p">(</span><span class="s2">&quot;JusticeLeague&quot;</span><span class="p">);</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="kd">const</span><span class="w"> </span><span class="nx">pairs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">(</span><span class="nx">shuffle</span><span class="p">(</span><span class="nx">names</span><span class="p">));</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="p">);</span>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>So far, so good. The only change we had to make was to replace the hardcoded array of names with the call to <code>getMembersOfOrganization</code>.</p>
<p>Not an issue, right?</p>
<p>Hmmm, what's up with this?
<img alt="createMessage has a type error" src="https://softwarementorblog.blob.core.windows.net/images/deno-dynamic-names/deno-part-two-createMessage.png" /></p>
<p>It looks like <code>createMessage</code> is expecting <code>Pair&lt;string&gt;[]</code>, but is receiving <code>Pair&lt;GetOrganizationMemberResponse&gt;[]</code>.</p>
<p>To solve this problem, we'll modify <code>createMessage</code> to work with <code>GetOrganizationMemberResponse</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">index.ts</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-41-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-41-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-41-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-41-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-41-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-41-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-41-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-41-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-41-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="c1">// Need to update the input to be Pair&lt;GetOrganizationMemberResponse&gt;</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="nx">GetOrganizationMemberResponse</span><span class="o">&gt;</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="w">  </span><span class="c1">// Need to update mapper function to get the login property</span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">=&gt;</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">    </span><span class="sb">`</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">first</span><span class="p">.</span><span class="nx">login</span><span class="si">}</span><span class="sb"> meets with </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">second</span><span class="p">.</span><span class="nx">login</span><span class="si">}${</span>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="w">      </span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">` and </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="p">.</span><span class="nx">login</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="w">    </span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<a id="__codelineno-41-8" name="__codelineno-41-8"></a>
<a id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">pairs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">mapper</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
<a id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this last change, we run the script and verify that we're getting the correct output, huzzah!</p>
<h3 id="current-status"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#current-status">Current Status</a></h3>
<p>Congratulations! We now have a script that is dynamically pulling in heroes from the Justice League organization instead of always needing to see if Green Lantern is somewhere else or if another member of Flash's SpeedForce is here for the moment.</p>
<p>A working version of the code can be found on <a href="https://github.com/cameronpresley/random-coffee">GitHub</a>.</p>
<h3 id="other-posts-in-the-series"><a class="toclink" href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/#other-posts-in-the-series">Other Posts In The Series</a></h3>
<ul>
<li><a href="../../../../2023/06/26/having-coffee-with-deno---inspiration/">Having Coffee with Deno - Inspiration</a></li>
<li><a href="../../../../2023/07/24/having-coffee-with-deno---sharing-the-news/">Having Coffee with Deno - Sharing the News</a></li>
<li><a href="../../../../2023/07/28/having-coffee-with-deno---automating-all-the-things/">Having Coffee with Deno - Automating All the Things</a></li>
</ul>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-06-26 00:00:00+00:00">Jun 26, 2023</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              7 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="having-coffee-with-deno-inspiration"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/">Having Coffee with Deno - Inspiration</a></h2>
<p>In a <a href="../../../../2023/05/07/building-relationships-with-intent/#one-cup-of-coffee">previous post</a>, I mention my strategy of building relationships through one-on-ones. One approach in the post was leveraging a Slack plugin, <a href="https://slack.com/apps/A5JR8MM6E-randomcoffees?tab=more_info">Random Coffee</a>, to automate scheduling these impromptu conversations.</p>
<div style="
max-width: 50%;
height: auto;
">
<img src="https://media.giphy.com/media/icVkqVBTfuBDczxyBH/giphy.gif" alt="Dinosaur sitting in a coffee cup">
</div>

<p>I wanted to leverage the same idea at my current company; however, we don't use Slack, so I can't just use that bot.</p>
<h3 id="high-level-breakdown"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#high-level-breakdown">High-Level Breakdown</a></h3>
<p>Thinking more about it, the system wouldn't be too complicated as it has three moving parts:</p>
<ul>
<li>Get list of people</li>
<li>Create random pairs</li>
<li>Post message</li>
</ul>
<p>To make it even easier, I could hardcode the list of people, and instead of posting the message to our message application, I could print it to the screen.</p>
<p>With these two choices made, I would need to build something that can shuffle a list and create pairs.</p>
<h3 id="technology-choices"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#technology-choices">Technology Choices</a></h3>
<p>Even though we're hardcoding the list of names and printing a message to the screen, I know that the future state is to get the list of names dynamically, most likely through an API call. In addition, most messaging systems support using <a href="https://en.wikipedia.org/wiki/Webhook#Function">webhooks</a> to create a message, so that would be the future state as well.</p>
<p>With these restrictions in mind, I know I need to use a language that is good at making HTTP calls. I also want this automation to be something that other people outside of me can maintain, so if I can use a language that we typically use, that makes this more approachable.</p>
<p>In my case, <a href="https://www.typescriptlang.org/">TypeScript</a> fit the bill as we heavily use it in my space, the docs are solid, and it's straightforward to make HTTP calls. I'm also a fan of functional programming, which TypeScript supports nicely.</p>
<p>My major hurdle at this point is that I'd like to execute this single file of TypeScript, and the only way I knew how to do that was by spinning up a Node application and using something like <a href="https://www.npmjs.com/package/ts-node">ts-node</a> to execute the file.</p>
<p>Talking to a <a href="https://www.linkedin.com/in/gpresland/">colleague</a>, they recommended I check out <a href="https://deno.com/runtime">Deno</a> as a possible solution. The more I learned about it, the more I thought this would fit perfectly. It supports TypeScript out of the box (no configuration needed), and a file can be ran with <code>deno run</code>, no other tools needed.</p>
<p>This project is simple enough that if Deno wasn't a good fit, I could always go back to Node.</p>
<p>With this figured out, we're going to create a Deno application using TypeScript as our language of choice.</p>
<h3 id="getting-started-with-deno"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#getting-started-with-deno">Getting Started With Deno</a></h3>
<ol>
<li><a href="https://deno.com/manual@v1.34.3/getting_started/installation">Install Deno via these instructions</a></li>
<li><a href="https://deno.com/manual@v1.34.3/getting_started/setup_your_environment">Setup your dev environment</a> - I use VS Code, so adding the recommended extension was all I needed.</li>
</ol>
<h4 id="trying-deno-out"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#trying-deno-out">Trying Deno Out</a></h4>
<p>Once Deno has been installed and configured, you can run the following script and verify everything is working correctly. It creates a new directory called <code>deno-coffee</code>, writes a new file and executes it via deno.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span>
<span class="normal"><a href="#__codelineno-28-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a>mkdir<span class="w"> </span>deno-coffee
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="nb">cd</span><span class="w"> </span>deno-coffee
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;console.log(&quot;Hello World&quot;);&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>coffee.ts
<a id="__codelineno-28-4" name="__codelineno-28-4"></a>deno<span class="w"> </span>run<span class="w"> </span>coffee.ts
</code></pre></div></td></tr></table></div>
<p>We've got something working, so let's start building out the random coffee script.</p>
<h3 id="lets-get-percolating"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#lets-get-percolating">Let's Get Percolating</a></h3>
<p>As mentioned before, we're going to hardcode a list of names and print to the screen, so let's build out the rough shape of the script:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-29-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-29-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-29-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-29-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-29-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-29-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-29-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-29-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-29-10">10</a></span>
<span class="normal"><a href="#__codelineno-29-11">11</a></span>
<span class="normal"><a href="#__codelineno-29-12">12</a></span>
<span class="normal"><a href="#__codelineno-29-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">  </span><span class="s2">&quot;Batman&quot;</span><span class="p">,</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">  </span><span class="s2">&quot;Superman&quot;</span><span class="p">,</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">  </span><span class="s2">&quot;Green Lantern&quot;</span><span class="p">,</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="w">  </span><span class="s2">&quot;Wonder Woman&quot;</span><span class="p">,</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="w">  </span><span class="s2">&quot;Static Shock&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1">// one of my favorite DC heroes!</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="w">  </span><span class="s2">&quot;The Flash&quot;</span><span class="p">,</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">  </span><span class="s2">&quot;Aquaman&quot;</span><span class="p">,</span>
<a id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">  </span><span class="s2">&quot;Martian Manhunter&quot;</span><span class="p">,</span>
<a id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="p">];</span>
<a id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="kd">const</span><span class="w"> </span><span class="nx">pairs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">(</span><span class="nx">shuffle</span><span class="p">(</span><span class="nx">names</span><span class="p">));</span>
<a id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="kd">const</span><span class="w"> </span><span class="nx">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="p">);</span>
<a id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>This code won't compile as we haven't defined what <code>shuffle</code>, <code>createPairsFrom</code>, or <code>createMessage</code> does, but we can tackle these one at a time.</p>
<h4 id="lets-get-random"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#lets-get-random">Let's Get Random</a></h4>
<p>Since we don't want the same people meeting up every time, we need a way to shuffle the list of names. We could import a library to do this, but what's the fun in that?</p>
<p>In this case, we're going to implement the <a href="https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle">Fisher-Yates Shuffle</a> (sounds like a dance move).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span>
<span class="normal"><a href="#__codelineno-30-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">shuffle</span><span class="p">(</span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="w">  </span><span class="c1">// create a copy so we don&#39;t mutate the original</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...</span><span class="nx">items</span><span class="p">];</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">    </span><span class="c1">// create an integer between 0 and i</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">i</span><span class="p">);</span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">    </span><span class="c1">// short-hand for swapping two elements around</span>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">    </span><span class="p">[</span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="w"> </span><span class="nx">result</span><span class="p">[</span><span class="nx">j</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">result</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span><span class="w"> </span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="p">;</span>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="p">}</span>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="kd">const</span><span class="w"> </span><span class="nx">words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;apples&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bananas&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;cantaloupes&quot;</span><span class="p">];</span>
<a id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">shuffle</span><span class="p">(</span><span class="nx">words</span><span class="p">));</span><span class="w"> </span><span class="c1">// [ &quot;bananas&quot;, &quot;cantaloupes&quot;, &quot;apples&quot; ]</span>
</code></pre></div></td></tr></table></div>
<p>Excellent, we have a way to shuffle. One refactor we can make is to have <code>shuffle</code> be generic as we don't care what array element types are, as long as we have an array.</p>
<p>Making this refactor gives us the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span>
<span class="normal"><a href="#__codelineno-31-3">3</a></span>
<span class="normal"><a href="#__codelineno-31-4">4</a></span>
<span class="normal"><a href="#__codelineno-31-5">5</a></span>
<span class="normal"><a href="#__codelineno-31-6">6</a></span>
<span class="normal"><a href="#__codelineno-31-7">7</a></span>
<span class="normal"><a href="#__codelineno-31-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">shuffle</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">T</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[...</span><span class="nx">items</span><span class="p">];</span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">i</span><span class="p">);</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">    </span><span class="p">[</span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="w"> </span><span class="nx">result</span><span class="p">[</span><span class="nx">j</span><span class="p">]]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">result</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span><span class="w"> </span><span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="p">;</span>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now, we can shuffle an array of anything. Nice!</p>
<h4 id="two-of-a-kind"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#two-of-a-kind">Two of a Kind</a></h4>
<p>Let's take a look at the next function, <code>createPairsFrom</code>. We know its type signature is going from<code>string[]</code> to <em>something</em>, but what?</p>
<p>In the ideal world, our total list of names is even, so we always have equal pairs.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span>
<span class="normal"><a href="#__codelineno-32-3">3</a></span>
<span class="normal"><a href="#__codelineno-32-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="p">{</span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Batman&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Superman&#39;</span><span class="p">},</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="p">{</span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Green Lantern&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Wonder Woman&#39;</span><span class="p">},</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="p">{</span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Static Shock&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;The Flash&#39;</span><span class="p">},</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="p">{</span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Aquaman&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Martian Manhunter&#39;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>But what happens if <code>Martian Manhunter</code> is called away and isn't available? That would leave <code>Aquaman</code> without a pair to have coffee with (sad trombone noise).</p>
<p>In the case that we have an odd number of heroes, the last pair should instead be a <em>triple</em> which would look like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="p">{</span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Batman&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Superman&#39;</span><span class="p">},</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="p">{</span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Green Lantern&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Wonder Woman&#39;</span><span class="p">},</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="p">{</span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Static Shock&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;The Flash&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">third</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;Martian Manhunter&#39;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Given that we've been using the word <code>Pair</code> to represent this grouping, we have a domain term we can use. This also means that <code>createPairsFrom</code> has the following type signature.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">(</span><span class="nx">names</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">Pair</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">  </span><span class="c1">// logic</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>But what does the <code>Pair</code> type look like? We can model either using an optional property or by using a discriminated union.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="c1">// Using an optional property</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Pair</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="w">  </span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="w">  </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">  </span><span class="nx">third?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="p">}</span>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a>
<a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="c1">// Using Discriminated Unions</span>
<a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Pair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nx">kind</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;double&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">first</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">}</span>
<a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="nx">kind</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;triple&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">first</span><span class="o">:</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span><span class="w"> </span><span class="nx">third</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>For now, I'm thinking of going with the optional property and if we need to tweak it later, we can.</p>
<p>Let's go ahead and implement <code>createPairsFrom</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-36-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-36-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-36-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-36-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-36-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-36-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-36-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-36-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-36-10">10</a></span>
<span class="normal"><a href="#__codelineno-36-11">11</a></span>
<span class="normal"><a href="#__codelineno-36-12">12</a></span>
<span class="normal"><a href="#__codelineno-36-13">13</a></span>
<span class="normal"><a href="#__codelineno-36-14">14</a></span>
<span class="normal"><a href="#__codelineno-36-15">15</a></span>
<span class="normal"><a href="#__codelineno-36-16">16</a></span>
<span class="normal"><a href="#__codelineno-36-17">17</a></span>
<span class="normal"><a href="#__codelineno-36-18">18</a></span>
<span class="normal"><a href="#__codelineno-36-19">19</a></span>
<span class="normal"><a href="#__codelineno-36-20">20</a></span>
<span class="normal"><a href="#__codelineno-36-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="p">(</span><span class="nx">names</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">Pair</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="w">  </span><span class="c1">// if we don&#39;t have at least two names, then there are no pairs</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">names</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">names</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">pair</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="kt">names</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="kt">names</span><span class="p">[</span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="w">    </span><span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pair</span><span class="p">);</span>
<a id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">names</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="w">    </span><span class="c1">// we have an odd length</span>
<a id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="w">    </span><span class="c1">// Assign the left-over name to the third of the triple</span>
<a id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="w">    </span><span class="nx">results</span><span class="p">[</span><span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">].</span><span class="nx">third</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">names</span><span class="p">[</span><span class="nx">names</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">];</span>
<a id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-36-16" name="__codelineno-36-16"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">results</span><span class="p">;</span>
<a id="__codelineno-36-17" name="__codelineno-36-17"></a><span class="p">}</span>
<a id="__codelineno-36-18" name="__codelineno-36-18"></a>
<a id="__codelineno-36-19" name="__codelineno-36-19"></a><span class="c1">// Example execution</span>
<a id="__codelineno-36-20" name="__codelineno-36-20"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">createPairsFrom</span><span class="p">([</span><span class="s2">&quot;apples&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bananas&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;cantaloupes&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;dates&quot;</span><span class="p">]));</span><span class="w"> </span><span class="c1">// [{first:&quot;apples&quot;, second:&quot;bananas&quot;}, {first:&quot;cantaloupes&quot;, second:&quot;dates&quot;}]</span>
<a id="__codelineno-36-21" name="__codelineno-36-21"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">createPairsFrom</span><span class="p">([</span><span class="s2">&quot;ants&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;birds&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;cats&quot;</span><span class="p">]));</span><span class="w"> </span><span class="c1">// [{first:&quot;ants&quot;, second:&quot;birds&quot;, third:&quot;cats&quot;}]</span>
</code></pre></div></td></tr></table></div>
<p>Similarly to <code>shuffle</code>, we can make this function generic as it doesn't matter what the array element types are, as long as we have an array to work with.</p>
<p>Refactoring to generics gives us the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span>
<span class="normal"><a href="#__codelineno-37-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Pair</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">first</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">;</span><span class="w"> </span><span class="nx">second</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">;</span><span class="w"> </span><span class="nx">third?</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createPairsFrom</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">items</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="nx">Pair</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">[]</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">  </span><span class="c1">// same function as before</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="to-the-presses"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#to-the-presses">To the Presses!</a></h4>
<p>For the last part, we need to implement <code>createMessage</code>. We know it has to have the following type signature:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{}</span>
</code></pre></div></td></tr></table></div>
<p>We know the following rules.</p>
<ul>
<li>When it's a double, we want the message to say, <code>X meets with Y</code></li>
<li>When it's a triple, we want the message to say, <code>X meets with Y and Z</code></li>
</ul>
<p>Based on this, we need a way to map from <code>Pair</code> to the above string. So let's write that logic.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span>
<span class="normal"><a href="#__codelineno-39-2">2</a></span>
<span class="normal"><a href="#__codelineno-39-3">3</a></span>
<span class="normal"><a href="#__codelineno-39-4">4</a></span>
<span class="normal"><a href="#__codelineno-39-5">5</a></span>
<span class="normal"><a href="#__codelineno-39-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="w">    </span><span class="sb">`</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">first</span><span class="si">}</span><span class="sb"> meets with </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">second</span><span class="si">}${</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">` and </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">  </span><span class="nx">pairs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">mapper</span><span class="p">);</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>From here, we can join the strings together using the <code>\n</code> (newline) character.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1">1</a></span>
<span class="normal"><a href="#__codelineno-40-2">2</a></span>
<span class="normal"><a href="#__codelineno-40-3">3</a></span>
<span class="normal"><a href="#__codelineno-40-4">4</a></span>
<span class="normal"><a href="#__codelineno-40-5">5</a></span>
<span class="normal"><a href="#__codelineno-40-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">createMessage</span><span class="p">(</span><span class="nx">pairs</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">[])</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">mapper</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="o">:</span><span class="w"> </span><span class="kt">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="w">    </span><span class="sb">`</span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">first</span><span class="si">}</span><span class="sb"> meets with </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">second</span><span class="si">}${</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sb">` and </span><span class="si">${</span><span class="nx">p</span><span class="p">.</span><span class="nx">third</span><span class="si">}</span><span class="sb">`</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">pairs</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">mapper</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="all-coming-together"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#all-coming-together">All Coming Together</a></h3>
<p>With the implementation of <code>createMessage</code>, we can execute our script by running <code>deno run coffee.ts</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span>
<span class="normal"><a href="#__codelineno-41-4">4</a></span>
<span class="normal"><a href="#__codelineno-41-5">5</a></span>
<span class="normal"><a href="#__codelineno-41-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a>deno<span class="w"> </span>run<span class="w"> </span>coffee.ts
<a id="__codelineno-41-2" name="__codelineno-41-2"></a>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="s2">&quot;Superman meets with Wonder Woman</span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="s2">Batman meets with The Flash</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="s2">Martian Manhunter meets with Aquaman</span>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="s2">Static Shock meets with Green Lantern&quot;</span>
</code></pre></div></td></tr></table></div>
<p>From here, we have a working proof of concept of our idea. We could run this manually on Mondays and then post this to our messaging channel (though you might want to switch the names out). If you wanted to be super fancy, you could have this scheduled as a cron job or through Windows Task Scheduler.</p>
<p>The main takeaway is that we've built something we didn't have before and can continue to refine and improve. If no one likes the idea, guess what? We only had a little time invested. If it takes off, then that's great; we can spend more time making it better.</p>
<h3 id="wrapping-up"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#wrapping-up">Wrapping Up</a></h3>
<p>In this post, we built the first version of our Random Coffee script using TypeScript and Deno. We focused on getting our tooling working and building out the business rules for shuffling and creating the pairs.</p>
<p>In the next post, we'll look at making this script smarter by having it retrieve a list of names dynamically from GitHub's API!</p>
<p>As always, you can find a full working version of this bot <a href="https://github.com/cameronpresley/random-coffee">on my GitHub</a>.</p>
<h3 id="other-posts-in-the-series"><a class="toclink" href="../../../../2023/06/26/having-coffee-with-deno---inspiration/#other-posts-in-the-series">Other Posts In The Series</a></h3>
<ul>
<li><a href="../../../../2023/07/10/having-coffee-with-deno---dynamic-names/">Having Coffee with Deno - Dynamic Names</a></li>
<li><a href="../../../../2023/07/24/having-coffee-with-deno---sharing-the-news/">Having Coffee with Deno - Sharing the News</a></li>
<li><a href="../../../../2023/07/28/having-coffee-with-deno---automating-all-the-things/">Having Coffee with Deno - Automating All the Things</a></li>
</ul>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2023-04-30 00:00:00+00:00">Apr 30, 2023</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../functional-programming/" class="md-meta__link">Functional Programming</a>, 
              <a href="../../" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="better-domain-modeling-with-discriminated-unions"><a class="toclink" href="../../../../2023/04/30/better-domain-modeling-with-discriminated-unions/">Better Domain Modeling with Discriminated Unions</a></h2>
<p>When I think about software, I like designing software so that doing the right things are easy and doing the wrong things are impossible (or at least very hard). This approach is typically called <a href="https://blog.codinghorror.com/falling-into-the-pit-of-success/">falling into the pit of success</a>.</p>
<p>Having a well-defined domain model can prevent many mistakes from happening just because the code <em>literally</em> won't let it happen (either through a compilation error or other mechanisms).</p>
<p>I'm a proponent of functional programming as it allows us to model software in a better way that can reduce the number of errors we make.</p>
<p>Let's at one of my favorite techniques <em>discriminated unions</em>.</p>
<h3 id="motivation"><a class="toclink" href="../../../../2023/04/30/better-domain-modeling-with-discriminated-unions/#motivation">Motivation</a></h3>
<p>In the GitHub API, there's an endpoint that allows you to get the <a href="https://docs.github.com/en/rest/issues/timeline?apiVersion=2022-11-28#list-timeline-events-for-an-issue">events that have occurred for a pull request</a>.</p>
<p>Let's take a look at the example response in the docs.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span>
<span class="normal"><a href="#__codelineno-21-13">13</a></span>
<span class="normal"><a href="#__codelineno-21-14">14</a></span>
<span class="normal"><a href="#__codelineno-21-15">15</a></span>
<span class="normal"><a href="#__codelineno-21-16">16</a></span>
<span class="normal"><a href="#__codelineno-21-17">17</a></span>
<span class="normal"><a href="#__codelineno-21-18">18</a></span>
<span class="normal"><a href="#__codelineno-21-19">19</a></span>
<span class="normal"><a href="#__codelineno-21-20">20</a></span>
<span class="normal"><a href="#__codelineno-21-21">21</a></span>
<span class="normal"><a href="#__codelineno-21-22">22</a></span>
<span class="normal"><a href="#__codelineno-21-23">23</a></span>
<span class="normal"><a href="#__codelineno-21-24">24</a></span>
<span class="normal"><a href="#__codelineno-21-25">25</a></span>
<span class="normal"><a href="#__codelineno-21-26">26</a></span>
<span class="normal"><a href="#__codelineno-21-27">27</a></span>
<span class="normal"><a href="#__codelineno-21-28">28</a></span>
<span class="normal"><a href="#__codelineno-21-29">29</a></span>
<span class="normal"><a href="#__codelineno-21-30">30</a></span>
<span class="normal"><a href="#__codelineno-21-31">31</a></span>
<span class="normal"><a href="#__codelineno-21-32">32</a></span>
<span class="normal"><a href="#__codelineno-21-33">33</a></span>
<span class="normal"><a href="#__codelineno-21-34">34</a></span>
<span class="normal"><a href="#__codelineno-21-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="p">[</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6430295168</span><span class="p">,</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://api.github.com/repos/github/roadmap/issues/events/6430295168&quot;</span><span class="p">,</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="w">    </span><span class="nt">&quot;event&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;locked&quot;</span><span class="p">,</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">    </span><span class="nt">&quot;commit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">    </span><span class="nt">&quot;commit_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">    </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-04-13T20:49:13Z&quot;</span><span class="p">,</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="w">    </span><span class="nt">&quot;lock_reason&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6430296748</span><span class="p">,</span>
<a id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://api.github.com/repos/github/roadmap/issues/events/6430296748&quot;</span><span class="p">,</span>
<a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="w">    </span><span class="nt">&quot;event&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;labeled&quot;</span><span class="p">,</span>
<a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="w">    </span><span class="nt">&quot;commit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<a id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="w">    </span><span class="nt">&quot;commit_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<a id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="w">    </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-04-13T20:49:34Z&quot;</span><span class="p">,</span>
<a id="__codelineno-21-18" name="__codelineno-21-18"></a><span class="w">    </span><span class="nt">&quot;label&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;beta&quot;</span><span class="p">,</span>
<a id="__codelineno-21-20" name="__codelineno-21-20"></a><span class="w">      </span><span class="nt">&quot;color&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;99dd88&quot;</span>
<a id="__codelineno-21-21" name="__codelineno-21-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-21-22" name="__codelineno-21-22"></a><span class="w">  </span><span class="p">},</span>
<a id="__codelineno-21-23" name="__codelineno-21-23"></a><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-21-24" name="__codelineno-21-24"></a><span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6635165802</span><span class="p">,</span>
<a id="__codelineno-21-25" name="__codelineno-21-25"></a><span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://api.github.com/repos/github/roadmap/issues/events/6635165802&quot;</span><span class="p">,</span>
<a id="__codelineno-21-26" name="__codelineno-21-26"></a><span class="w">    </span><span class="nt">&quot;event&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;renamed&quot;</span><span class="p">,</span>
<a id="__codelineno-21-27" name="__codelineno-21-27"></a><span class="w">    </span><span class="nt">&quot;commit_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<a id="__codelineno-21-28" name="__codelineno-21-28"></a><span class="w">    </span><span class="nt">&quot;commit_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<a id="__codelineno-21-29" name="__codelineno-21-29"></a><span class="w">    </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-05-18T19:29:01Z&quot;</span><span class="p">,</span>
<a id="__codelineno-21-30" name="__codelineno-21-30"></a><span class="w">    </span><span class="nt">&quot;rename&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-31" name="__codelineno-21-31"></a><span class="w">      </span><span class="nt">&quot;from&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Secret scanning: dry-runs for enterprise-level custom patterns (cloud)&quot;</span><span class="p">,</span>
<a id="__codelineno-21-32" name="__codelineno-21-32"></a><span class="w">      </span><span class="nt">&quot;to&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Secret scanning: dry-runs for enterprise-level custom patterns&quot;</span>
<a id="__codelineno-21-33" name="__codelineno-21-33"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-21-34" name="__codelineno-21-34"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-21-35" name="__codelineno-21-35"></a><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Based on the name of the docs, it seems like we'd expect to get back an array of events, let's call this <code>TimelineEvent[]</code>.</p>
<p>Let's go ahead and define the <code>TimelineEvent</code> type. One approach is to start copying the fields from the events in the array. By doing this, we would get the following.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span>
<span class="normal"><a href="#__codelineno-22-16">16</a></span>
<span class="normal"><a href="#__codelineno-22-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">TimelineEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">  </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">  </span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">  </span><span class="nx">commit_id?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">  </span><span class="nx">commit_url?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">  </span><span class="nx">created_at</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">  </span><span class="nx">lock_reason?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">  </span><span class="nx">label</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">    </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">  </span><span class="nx">rename</span><span class="o">?:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="w">    </span><span class="nx">from</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="w">    </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<h3 id="the-problem"><a class="toclink" href="../../../../2023/04/30/better-domain-modeling-with-discriminated-unions/#the-problem">The Problem</a></h3>
<p>This definition will work, as it will cover all the data. However, the problem with this approach is that <code>lock_reason</code>, <code>label</code>, and <code>rename</code> had to be defined as nullable as they can sometimes be specified, but not always (for example, the <code>lock_reason</code> isn't specified for a label event).</p>
<p>Let's say that we wanted to write a function that printed data about <code>TimelineEvent</code>, we would have to write something like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span>
<span class="normal"><a href="#__codelineno-23-5">5</a></span>
<span class="normal"><a href="#__codelineno-23-6">6</a></span>
<span class="normal"><a href="#__codelineno-23-7">7</a></span>
<span class="normal"><a href="#__codelineno-23-8">8</a></span>
<span class="normal"><a href="#__codelineno-23-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">printData</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="kt">TimelineEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">event</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s2">&quot;labeled&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">label</span><span class="o">!</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span><span class="w"> </span><span class="c1">// note the ! here, to tell TypeScript that I know it&#39;ll have a value</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">event</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;locked&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">lock_reason</span><span class="p">);</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">rename</span><span class="o">!</span><span class="p">.</span><span class="kr">from</span><span class="p">);</span><span class="w"> </span><span class="c1">// note the ! here, to tell Typescript that I know it&#39;ll have a value</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The main problem is that the we have to remember that the <code>labeled</code> event has a <code>label</code> property, but not the <code>locked</code> property. It might not be a big deal right now, but given that the GitHub API has over <a href="https://docs.github.com/en/webhooks-and-events/events/issue-event-types">40 event types</a>, the odds of forgetting which properties belong where can be challenging.</p>
<p>The pattern here is that we have a type <code>TimelineEvent</code> that can have different, separate shapes, and we need a type that can represent all the shapes.</p>
<h3 id="the-solution"><a class="toclink" href="../../../../2023/04/30/better-domain-modeling-with-discriminated-unions/#the-solution">The Solution</a></h3>
<p>One of the cool things about Typescript is that there is a <a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-func.html#unions">union operator (|)</a>, that allows you to define a type as one of the other types.</p>
<p>Let's refactor our <code>TimelineEvent</code> model to use the union operator.</p>
<p>First, we need to define the different events as their own types</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span>
<span class="normal"><a href="#__codelineno-24-14">14</a></span>
<span class="normal"><a href="#__codelineno-24-15">15</a></span>
<span class="normal"><a href="#__codelineno-24-16">16</a></span>
<span class="normal"><a href="#__codelineno-24-17">17</a></span>
<span class="normal"><a href="#__codelineno-24-18">18</a></span>
<span class="normal"><a href="#__codelineno-24-19">19</a></span>
<span class="normal"><a href="#__codelineno-24-20">20</a></span>
<span class="normal"><a href="#__codelineno-24-21">21</a></span>
<span class="normal"><a href="#__codelineno-24-22">22</a></span>
<span class="normal"><a href="#__codelineno-24-23">23</a></span>
<span class="normal"><a href="#__codelineno-24-24">24</a></span>
<span class="normal"><a href="#__codelineno-24-25">25</a></span>
<span class="normal"><a href="#__codelineno-24-26">26</a></span>
<span class="normal"><a href="#__codelineno-24-27">27</a></span>
<span class="normal"><a href="#__codelineno-24-28">28</a></span>
<span class="normal"><a href="#__codelineno-24-29">29</a></span>
<span class="normal"><a href="#__codelineno-24-30">30</a></span>
<span class="normal"><a href="#__codelineno-24-31">31</a></span>
<span class="normal"><a href="#__codelineno-24-32">32</a></span>
<span class="normal"><a href="#__codelineno-24-33">33</a></span>
<span class="normal"><a href="#__codelineno-24-34">34</a></span>
<span class="normal"><a href="#__codelineno-24-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">LockedEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">  </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">  </span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;locked&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// note the hardcoded value for event</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="w">  </span><span class="nx">commit_id?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="w">  </span><span class="nx">commit_url?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="w">  </span><span class="nx">created_at</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="w">  </span><span class="nx">lock_reason?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="p">};</span>
<a id="__codelineno-24-10" name="__codelineno-24-10"></a>
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="kr">type</span><span class="w"> </span><span class="nx">LabeledEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="w">  </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="w">  </span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;labeled&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// note the hardcoded value for event</span>
<a id="__codelineno-24-15" name="__codelineno-24-15"></a><span class="w">  </span><span class="nx">commit_id?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="w">  </span><span class="nx">commit_url</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-17" name="__codelineno-24-17"></a><span class="w">  </span><span class="nx">created_at</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-18" name="__codelineno-24-18"></a><span class="w">  </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-19" name="__codelineno-24-19"></a><span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-20" name="__codelineno-24-20"></a><span class="w">    </span><span class="nx">color</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-21" name="__codelineno-24-21"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-24-22" name="__codelineno-24-22"></a><span class="p">};</span>
<a id="__codelineno-24-23" name="__codelineno-24-23"></a>
<a id="__codelineno-24-24" name="__codelineno-24-24"></a><span class="kr">type</span><span class="w"> </span><span class="nx">RenamedEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-25" name="__codelineno-24-25"></a><span class="w">  </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="p">;</span>
<a id="__codelineno-24-26" name="__codelineno-24-26"></a><span class="w">  </span><span class="nx">url</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-27" name="__codelineno-24-27"></a><span class="w">  </span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;renamed&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// note the hardcoded value for event</span>
<a id="__codelineno-24-28" name="__codelineno-24-28"></a><span class="w">  </span><span class="nx">commit_id?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-29" name="__codelineno-24-29"></a><span class="w">  </span><span class="nx">commit_url?</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-30" name="__codelineno-24-30"></a><span class="w">  </span><span class="nx">created_at</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-31" name="__codelineno-24-31"></a><span class="w">  </span><span class="nx">rename</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-32" name="__codelineno-24-32"></a><span class="w">    </span><span class="nx">from</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-33" name="__codelineno-24-33"></a><span class="w">    </span><span class="nx">to</span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<a id="__codelineno-24-34" name="__codelineno-24-34"></a><span class="w">  </span><span class="p">};</span>
<a id="__codelineno-24-35" name="__codelineno-24-35"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>At this point, we have three types, one for each specific event. A <code>LockedEvent</code> has no knowledge of a <code>label</code> property and a <code>RenamedEvent</code> has no knowledge of a <code>lock_reason</code> property.</p>
<p>Next, we can update our definition of <code>TimelineEvent</code> to use the <em>union</em> operator as so.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">TimelineEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">LockedEvent</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">LabeledEvent</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">RenamedEvent</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>This would be read as <em>A <code>TimelineEvent</code> can either be a <code>LockedEvent</code> or a <code>LabeledEvent</code> or a <code>RenamedEvent</code></em>.</p>
<p>With this new definition, let's rewrite the <code>printData</code> function.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span>
<span class="normal"><a href="#__codelineno-26-4">4</a></span>
<span class="normal"><a href="#__codelineno-26-5">5</a></span>
<span class="normal"><a href="#__codelineno-26-6">6</a></span>
<span class="normal"><a href="#__codelineno-26-7">7</a></span>
<span class="normal"><a href="#__codelineno-26-8">8</a></span>
<span class="normal"><a href="#__codelineno-26-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">printData</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="w"> </span><span class="kt">TimelineEvent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">event</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;labeled&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">label</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span><span class="w"> </span><span class="c1">// note that we no longer need !</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">event</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;locked&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">lock_reason</span><span class="p">);</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">rename</span><span class="p">.</span><span class="nx">to</span><span class="p">);</span><span class="w"> </span><span class="c1">// note that we no longer need !</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Not only do we not have to use the <code>!</code> operator to ignore type safety, but we also have better autocomplete (note that <code>locked_reason</code> and <code>rename</code> don't appear when working with a labeled event).
<img alt="Better autocomplete" src="https://softwarementorblog.blob.core.windows.net/images/typescript-union-intellisense.png" /></p>
<h3 id="deeper-dive"><a class="toclink" href="../../../../2023/04/30/better-domain-modeling-with-discriminated-unions/#deeper-dive">Deeper Dive</a></h3>
<p>At a general level, what we've modeled is a <a href="https://en.wikipedia.org/wiki/Tagged_union">sum type</a> and it's great for when you have a type that can take on a finite number of differing shapes.</p>
<p>Sum types are implemented as either <em>tagged unions</em> or <em>untagged unions</em>. Typescript has untagged unions, however, other languages like Haskell and F#, use tagged unions. Let's see what the same implementation in F# would have looked like.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-27-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-27-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-27-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-27-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-27-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-27-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-27-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-27-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-27-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="c1">// specific type definitions omitted since they&#39;re</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="c1">// similar to typescript definition</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="c1">// ....</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="k">type</span><span class="w"> </span><span class="nc">TimelineEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Locked</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">LockedEvent</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Labeled</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">LabeledEvent</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Renamed</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">RenamedEvent</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="k">let</span><span class="w"> </span><span class="nv">printData</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">with</span>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Locked</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">printf</span><span class="w"> </span><span class="s">&quot;%s&quot;</span><span class="w"> </span><span class="n">l</span><span class="o">.</span><span class="n">lock_reason</span>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Labeled</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">printf</span><span class="w"> </span><span class="s">&quot;%s&quot;</span><span class="w"> </span><span class="n">l</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">Renamed</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">printf</span><span class="w"> </span><span class="s">&quot;%s&quot;</span><span class="w"> </span><span class="n">r</span><span class="o">.</span><span class="n">rename</span><span class="o">.</span><span class="n">``to``</span><span class="w"> </span><span class="c1">// the `` is needed here as to is a reserved word in F#</span>
</code></pre></div></td></tr></table></div>
<p>A <em>tagged union</em> is when each shape has a specific constructor. So in the F# version, the <code>Locked</code> is the tag for the <code>LockedEvent</code>, <code>Labeled</code> is the tag for the <code>LabeledEvent</code>, so on and so forth. In the Typescript example, we worked around it because the <code>event</code> property is on every <code>TimelineEvent</code> and is a different value.</p>
<p>If that wasn't true, then we would had to have added a field to <code>TimelineEvent</code> (typically called <code>kind</code> or <code>tag</code>) that would help us differentiate between the various shapes.</p>
<h3 id="wrapping-up"><a class="toclink" href="../../../../2023/04/30/better-domain-modeling-with-discriminated-unions/#wrapping-up">Wrapping Up</a></h3>
<p>When defining domain models where the model can have different shapes, you can use a <em>sum</em> type to define the model.</p>
    
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <a class="md-pagination__link" href="../2/">2</a> <span class="md-pagination__current">3</span>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../../tooling/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Tooling">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Tooling
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../../archive/2025/" class="md-footer__link md-footer__link--next" aria-label="Next: 2025">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                2025
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.footer", "content.code.copy"], "search": "../../../../../assets/javascripts/workers/search.ad38c271.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.b66b2b78.min.js"></script>
      
    
  </body>
</html>