
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Cameron Presley">
      
      
      
        <link rel="prev" href="../../..">
      
      
        <link rel="next" href="../../category/net/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16+insiders-4.53.16">
    
    
      
        <title>Index - The Software Mentor</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.1caf78d2.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/page.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-ZE0MGVG7RJ"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-ZE0MGVG7RJ",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-ZE0MGVG7RJ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#index" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="The Software Mentor" class="md-header__button md-logo" aria-label="The Software Mentor" data-md-component="logo">
      
  <img src="../../../assets/images/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Software Mentor
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  About Me

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  Articles

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../courses/" class="md-tabs__link">
        
  
  
    
  
  Training Course

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../level-up/" class="md-tabs__link">
        
  
  
    
  
  Level Up Resources

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../presentations/" class="md-tabs__link">
        
  
  
    
  
  Presentations

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../speaking-schedule/" class="md-tabs__link">
        
  
  
    
  
  Speaking Schedule

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../story/" class="md-tabs__link">
        
  
  
    
  
  Story

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../resume/" class="md-tabs__link">
        
  
  
    
  
  Resume

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The Software Mentor" class="md-nav__button md-logo" aria-label="The Software Mentor" data-md-component="logo">
      
  <img src="../../../assets/images/favicon.png" alt="logo">

    </a>
    The Software Mentor
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    About Me
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Articles
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Articles
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="../../" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Archive
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Archive
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2025
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2024
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2023/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2023
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2020
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2018/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2018
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2015/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2015
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2014/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2014
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2013/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2013
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Categories
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Categories
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/net/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    .NET
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/c/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    C#
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/career/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Career
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/coaching-corner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Coaching Corner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/functional-programming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Functional Programming
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/interviewing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interviewing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/leadership/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Leadership
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/learning-through-example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Learning Through Example
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/process/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Process
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/solid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SOLID
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/today-i-learned/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Today I Learned
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/tooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tooling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/typescript/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TypeScript
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../courses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training Course
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../level-up/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Level Up Resources
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../presentations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Presentations
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../speaking-schedule/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Speaking Schedule
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../story/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Story
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../resume/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resume
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="index">Index</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-03-27 00:00:00+00:00">Mar 27, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/today-i-learned/" class="md-meta__link">Today I Learned</a>, 
              <a href="../../category/typescript/" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="tips-and-tricks-with-typescript"><a class="toclink" href="../../2025/03/27/tips-and-tricks-with-typescript/">Tips and Tricks with TypeScript</a></h2>
<p>One of my most recent projects has been tackling how to model the card game, <a href="https://boardgamegeek.com/boardgame/129622/love-letter">Love Letter</a>. For those who've seen me present my <a href="../../../presentations/#how-functional-programming-made-me-a-better-developer">How Functional Programming Made Me a Better Developer</a> talk, you might recall that this was my second project to tackle in F# and that even though I was able to get some of it to work, there were some inconsistency in the rules that I wasn't able to reason about.</p>
<p>While implementing in TypeScript, I came across some cool tricks and thought I'd share some of them here, enjoy!</p>
<h3 id="swapping-two-variables"><a class="toclink" href="../../2025/03/27/tips-and-tricks-with-typescript/#swapping-two-variables">Swapping two variables</a></h3>
<p>A common enough task in programming, we need to swap two values around. When I was learning C++, I had a memory trick to remember the ordering (think like a zigzag pattern)</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span>
<span class="normal"><a href="#__codelineno-12-5">5</a></span>
<span class="normal"><a href="#__codelineno-12-6">6</a></span>
<span class="normal"><a href="#__codelineno-12-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="c1">// Note how a starts on the right, then goes left</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="kt">int</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>You can do the same thing in TypeScript, however, you can remove the need for the <code>temp</code> variable by using array destructuring. The idea is that we create an array which contains the two variables to swap. We then assign this array to destructured variables (see below)</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span>
<span class="normal"><a href="#__codelineno-13-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kd">let</span><span class="w"> </span><span class="nx">a</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">200</span><span class="p">;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="c1">// using array destructuring</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<h3 id="drawing-a-card"><a class="toclink" href="../../2025/03/27/tips-and-tricks-with-typescript/#drawing-a-card">Drawing a Card</a></h3>
<p>One of the common interactions that happens in the game is that we need to model drawing a card from a deck. As such, we will have a function that looks like the following</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span>
<span class="normal"><a href="#__codelineno-14-6">6</a></span>
<span class="normal"><a href="#__codelineno-14-7">7</a></span>
<span class="normal"><a href="#__codelineno-14-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Card</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Guard&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Priest&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Baron&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">....</span><span class="w"> </span><span class="c1">// other options omitted for brevity</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Deck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Card</span><span class="p">[]</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="kd">function</span><span class="w"> </span><span class="nx">draw</span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="kt">Deck</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="o">:</span><span class="kt">Card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">Deck</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">card</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="p">};</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This absolutely works, however, we can use the rest operator (...) with array destructuring to simplify this code. </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span>
<span class="normal"><a href="#__codelineno-15-4">4</a></span>
<span class="normal"><a href="#__codelineno-15-5">5</a></span>
<span class="normal"><a href="#__codelineno-15-6">6</a></span>
<span class="normal"><a href="#__codelineno-15-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Card</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Guard&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Priest&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s2">&quot;Baron&quot;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">....</span><span class="w"> </span><span class="c1">// other options omitted for brevity</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Deck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">Card</span><span class="p">[]</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="kd">function</span><span class="w"> </span><span class="nx">draw</span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="kt">Deck</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="o">:</span><span class="kt">Card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">Deck</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">restOfDeck</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">;</span><span class="w"> </span><span class="c1">// note the rest operator before restOfDeck</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="p">};</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This code should be read as <em>assign the first element of the array to a const called <code>card</code> and the rest of the array to a const called <code>restOfDeck</code></em>.</p>
<h3 id="drawing-multiple-cards-with-object-destructuring"><a class="toclink" href="../../2025/03/27/tips-and-tricks-with-typescript/#drawing-multiple-cards-with-object-destructuring">Drawing Multiple Cards with Object Destructuring</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">draw</span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="kt">Deck</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="o">:</span><span class="kt">Card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">Deck</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="p">[</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">restOfDeck</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">;</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="p">};</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="p">}</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="kd">function</span><span class="w"> </span><span class="nx">drawMultipleCads</span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="kt">Deck</span><span class="p">,</span><span class="w"> </span><span class="nx">count</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[],</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">Deck</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">currentDeck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">;</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">count</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">draw</span><span class="p">(</span><span class="nx">currentDeck</span><span class="p">)</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">    </span><span class="nx">cards</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">card</span><span class="p">)</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">    </span><span class="nx">currentDeck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">result</span><span class="p">.</span><span class="nx">restOfDeck</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">cards</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">currentDeck</span><span class="p">};</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This works, however, we don't actually care about <code>result</code>, but the specific values <code>card</code> and <code>restOfDeck</code>. Instead of referencing them via property drilling, we can use object destructuring to get their values.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">drawMultipleCads</span><span class="p">(</span><span class="nx">d</span><span class="o">:</span><span class="kt">Deck</span><span class="p">,</span><span class="w"> </span><span class="nx">count</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[],</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">Deck</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">currentDeck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">d</span><span class="p">;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">cards</span><span class="o">:</span><span class="kt">Card</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">count</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="nx">card</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">draw</span><span class="p">(</span><span class="nx">currentDeck</span><span class="p">)</span><span class="w"> </span><span class="c1">// note using curly braces</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">    </span><span class="nx">cards</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">card</span><span class="p">)</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">    </span><span class="nx">currentDeck</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">restOfDeck</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">cards</span><span class="p">,</span><span class="w"> </span><span class="nx">restOfDeck</span><span class="o">:</span><span class="kt">currentDeck</span><span class="p">};</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-03-19 00:00:00+00:00">Mar 19, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/today-i-learned/" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-triggering-powerautomate-through-http-request"><a class="toclink" href="../../2025/03/19/today-i-learned-triggering-powerautomate-through-http-request/">Today I Learned: Triggering PowerAutomate Through Http Request</a></h2>
<p>If you're working within the Microsoft ecosystem, you might have ran across a tool called <a href="https://www.microsoft.com/en-us/power-platform/products/power-automate">PowerAutomate</a>, this is Microsoft's low-code solution for building out simple automation (similar to tools like If This Then Than (<a href="https://ifttt.com/">IFTTT</a>)).</p>
<p>A common use I've used with PowerAutomate is integrating with Teams to kick off a workflow when someone posts a message. For example, you could have a trigger listening for when someone posts in your support channel to auto-respond back with a canned message and tagging whoever your support person or support team is.</p>
<p>The problem I've ran into with PowerAutomate is that it has a steep learning curve and isn't very intuitive for engineers to pick up. As such, we typically use PowerAutomate for simpler flows (or if we need to integrate with another Microsoft product like Teams or Planner).</p>
<p>Recently, I was tackling a problem where we had an application that needed to post a message into a Teams channel. Back in the day, I would have use a <a href="https://learn.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/add-incoming-webhook?tabs=newteams%2Cdotnet">webhook</a> and published the message that way, however, Microsoft removed the ability to use Webhooks into Teams in late 2024. The main solution going forward is that you would have had to build a Teams application and install it for your tenant/channel. This can be a bit annoying if all you have is a simple workflow that you need to stand-up.</p>
<p>This got me thinking, I know I can use PowerAutomate to send a message to Teams, but can I trigger the flow programmatically (at this point, I was familiar with timers and when something happened).</p>
<p>Doing some digging, I found that PowerAutomate can trigger a workflow off of a <em>HTTP Request</em>. </p>
<p>Jackpot! </p>
<p>Even better, we can give the PowerAutomate flow a specific payload to expect as part of the request body, even better!</p>
<p>Combining these concepts, I can create a flow like the following:</p>
<p>First, let's set up a trigger that takes in a payload. In this case, the caller will give us the message content and a bit more info on which team and channel to post this message into.</p>
<p><img alt="Setting up the trigger" src="https://softwarementorblog.blob.core.windows.net/images/powerautomate-requrest-trigger/image-1.png" /></p>
<p>After setting up the trigger, we can then add a step for posting a message in Teams. Instead of using the pre-populated options that we get from our connection, we can use the values from the trigger instead.</p>
<p><img alt="Setting up the message step" src="https://softwarementorblog.blob.core.windows.net/images/powerautomate-requrest-trigger/image-2.png" /></p>
<p>After saving, our entire flow looks like the following</p>
<p><img alt="Full flow" src="https://softwarementorblog.blob.core.windows.net/images/powerautomate-requrest-trigger/image-3.png" /></p>
<p>From here, we can then use the URL that was created as part of the trigger and have our application invoke the flow.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-03-12 00:00:00+00:00">Mar 12, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/today-i-learned/" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-configuring-git-to-use-a-specific-key-for-a-specific-repo"><a class="toclink" href="../../2025/03/12/today-i-learned-configuring-git-to-use-a-specific-key-for-a-specific-repo/">Today I Learned: Configuring Git to Use A Specific Key for a Specific Repo</a></h2>
<p>When working with a Git repository, there are two ways to authenticate yourself, either by using your name/password or by leveraging an SSH key, proving who you are. I like the SSH key the best since I can create the key for my machine, associate it to my profile, and then I'm good to go.</p>
<p>However, the problem becomes when I have to juggle different SSH keys. For example, I may have two different accounts (personal and a work one) and these accounts can't use the same SSH key (in fact, if you try to add the same SSH key to two different accounts, you'll get an error message).</p>
<p>In these cases, I'd like to be able to specify which SSH key to use for a given repository.</p>
<p>Doing some digging, I found the following configures the sshCommand that git uses</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>git<span class="w"> </span>config<span class="w"> </span>core.sshCommand<span class="w"> </span><span class="s1">&#39;ssh -i C:\\users\\&lt;name&gt;\\.ssh\\&lt;name_of_private_key&gt;&#39;</span>
</code></pre></div></td></tr></table></div>
<p>Because we're not specifying a scope (like <code>--global</code>), this will only apply to the single repository.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-03-05 00:00:00+00:00">Mar 5, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/net/" class="md-meta__link">.NET</a>, 
              <a href="../../category/today-i-learned/" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-configuring-httpclient-via-service-registration"><a class="toclink" href="../../2025/03/05/today-i-learned-configuring-httpclient-via-service-registration/">Today I Learned: Configuring HttpClient via Service Registration</a></h2>
<p>When integrating with an external service via an API call, it's common to create a class the encapsulates dealing with the API. For example, if I was interacting with the GitHub API, I might create a C# class that wraps the <code>HttpClient</code>, like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="k">public</span><span class="w"> </span><span class="k">interface</span><span class="w"> </span><span class="n">IGitHubService</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">    </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">();</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="p">}</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IGitHubService</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="p">{</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">        </span><span class="c1">// code implementation</span>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="repetition-of-values"><a class="toclink" href="../../2025/03/05/today-i-learned-configuring-httpclient-via-service-registration/#repetition-of-values">Repetition of Values</a></h3>
<p>This is a great start, but over time, your class might end up like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span>
<span class="normal"><a href="#__codelineno-17-21">21</a></span>
<span class="normal"><a href="#__codelineno-17-22">22</a></span>
<span class="normal"><a href="#__codelineno-17-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;https://api.github.com/user&quot;</span><span class="p">)</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Login</span><span class="p">;</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetAllUsers</span><span class="p">()</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;https://api.github.com/users&quot;</span><span class="p">);</span>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Login</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetTeamNamesForOrg</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">org</span><span class="p">)</span>
<a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;https://api.github.com/orgs/{org}/teams&quot;</span><span class="p">);</span>
<a id="__codelineno-17-21" name="__codelineno-17-21"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-17-22" name="__codelineno-17-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-23" name="__codelineno-17-23"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Right off the bat, it seems like we're repeating the URL for each method call. To remove the repetition, we could extract to a constant.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span>
<span class="normal"><a href="#__codelineno-18-16">16</a></span>
<span class="normal"><a href="#__codelineno-18-17">17</a></span>
<span class="normal"><a href="#__codelineno-18-18">18</a></span>
<span class="normal"><a href="#__codelineno-18-19">19</a></span>
<span class="normal"><a href="#__codelineno-18-20">20</a></span>
<span class="normal"><a href="#__codelineno-18-21">21</a></span>
<span class="normal"><a href="#__codelineno-18-22">22</a></span>
<span class="normal"><a href="#__codelineno-18-23">23</a></span>
<span class="normal"><a href="#__codelineno-18-24">24</a></span>
<span class="normal"><a href="#__codelineno-18-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="p">{</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">    </span><span class="c1">// Setting the base URL for later usage</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">_baseUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.github.com&quot;</span><span class="p">;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;{_baseUrl}/user&quot;</span><span class="p">)</span>
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Login</span><span class="p">;</span>
<a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetAllUsers</span><span class="p">()</span>
<a id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-18-17" name="__codelineno-18-17"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;{_baseUrl}/users&quot;</span><span class="p">);</span>
<a id="__codelineno-18-18" name="__codelineno-18-18"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Login</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-18-19" name="__codelineno-18-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-20" name="__codelineno-18-20"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetTeamNamesForOrg</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">org</span><span class="p">)</span>
<a id="__codelineno-18-21" name="__codelineno-18-21"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-18-22" name="__codelineno-18-22"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;{_baseUrl}/orgs/{org}/teams&quot;</span><span class="p">);</span>
<a id="__codelineno-18-23" name="__codelineno-18-23"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-18-24" name="__codelineno-18-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-25" name="__codelineno-18-25"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This helps remove the repetition, however, we're now keeping track of a new field, <code>_baseUrl</code>. Instead of using this, we could leverage the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.baseaddress?view=net-9.0"><code>BaseAddress</code></a> property and set that in the service's constructor.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span>
<span class="normal"><a href="#__codelineno-19-22">22</a></span>
<span class="normal"><a href="#__codelineno-19-23">23</a></span>
<span class="normal"><a href="#__codelineno-19-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="p">{</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">        </span><span class="n">_client</span><span class="p">.</span><span class="n">BaseAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.github.com&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Setting the base address for the other requests.</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/user&quot;</span><span class="p">)</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Login</span><span class="p">;</span>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetAllUsers</span><span class="p">()</span>
<a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">);</span>
<a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Login</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-19-18" name="__codelineno-19-18"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetTeamNamesForOrg</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">org</span><span class="p">)</span>
<a id="__codelineno-19-20" name="__codelineno-19-20"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-19-21" name="__codelineno-19-21"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;/orgs/{org}/teams&quot;</span><span class="p">);</span>
<a id="__codelineno-19-22" name="__codelineno-19-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-19-23" name="__codelineno-19-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-19-24" name="__codelineno-19-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>I like this refactor because we remove the field and we have our configuration in one spot. That being said, interacting with an API typically requires more information than just the URL. For example, setting up the API token or that we're always expecting JSON for the response. We could add the header setup in each method, but that seems quite duplicative.</p>
<h3 id="leveraging-default-request-headers"><a class="toclink" href="../../2025/03/05/today-i-learned-configuring-httpclient-via-service-registration/#leveraging-default-request-headers">Leveraging Default Request Headers</a></h3>
<p>We can centralize our request headers by leveraging the <a href="https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.defaultrequestheaders?view=net-9.0"><code>DefaultRequestHeaders</code> property</a> and updating our constructor.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span>
<span class="normal"><a href="#__codelineno-20-17">17</a></span>
<span class="normal"><a href="#__codelineno-20-18">18</a></span>
<span class="normal"><a href="#__codelineno-20-19">19</a></span>
<span class="normal"><a href="#__codelineno-20-20">20</a></span>
<span class="normal"><a href="#__codelineno-20-21">21</a></span>
<span class="normal"><a href="#__codelineno-20-22">22</a></span>
<span class="normal"><a href="#__codelineno-20-23">23</a></span>
<span class="normal"><a href="#__codelineno-20-24">24</a></span>
<span class="normal"><a href="#__codelineno-20-25">25</a></span>
<span class="normal"><a href="#__codelineno-20-26">26</a></span>
<span class="normal"><a href="#__codelineno-20-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="p">{</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">        </span><span class="n">_client</span><span class="p">.</span><span class="n">BaseAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.github.com&quot;</span><span class="p">;</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">        </span><span class="n">_client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Accept&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/vnd.github+json&quot;</span><span class="p">);</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">        </span><span class="n">_client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Authentication&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">$&quot;Bearer {yourTokenGoesHere}&quot;</span><span class="p">);</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">        </span><span class="n">_client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;X-GitHub-Api-Version&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2022-11-28&quot;</span><span class="p">);</span>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/user&quot;</span><span class="p">)</span>
<a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Login</span><span class="p">;</span>
<a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-17" name="__codelineno-20-17"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetAllUsers</span><span class="p">()</span>
<a id="__codelineno-20-18" name="__codelineno-20-18"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-20-19" name="__codelineno-20-19"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">);</span>
<a id="__codelineno-20-20" name="__codelineno-20-20"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Login</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-20-21" name="__codelineno-20-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-22" name="__codelineno-20-22"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetTeamNamesForOrg</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">org</span><span class="p">)</span>
<a id="__codelineno-20-23" name="__codelineno-20-23"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-20-24" name="__codelineno-20-24"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;/orgs/{org}/teams&quot;</span><span class="p">);</span>
<a id="__codelineno-20-25" name="__codelineno-20-25"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-20-26" name="__codelineno-20-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-27" name="__codelineno-20-27"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>I like this refactor because all of our configuration of the service is right next to how we're using it, so easy to troubleshoot. At this point, we would need to register our service in the Inversion of Control (IoC) container and then everything would work.</p>
<p>Generally, you'll find this in <code>Startup.cs</code> and would look like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="n">services</span><span class="p">.</span><span class="n">AddTransient</span><span class="o">&lt;</span><span class="n">IGitHubService</span><span class="p">,</span><span class="w"> </span><span class="n">GitHubService</span><span class="o">&gt;</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<h3 id="an-alternative-approach-for-service-registration"><a class="toclink" href="../../2025/03/05/today-i-learned-configuring-httpclient-via-service-registration/#an-alternative-approach-for-service-registration">An Alternative Approach for Service Registration</a></h3>
<p>However, I learned that when you're building a service that's wrapping an <code>HttpClient</code>, there's another service registration method you could use, <code>AddHttpClient</code> with the <a href="https://learn.microsoft.com/en-us/aspnet/core/fundamentals/http-requests?view=aspnetcore-9.0#typed-clients"><em>Typed Client</em> approach</a>.</p>
<p>Let's take a look at what this would look like.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span>
<span class="normal"><a href="#__codelineno-22-3">3</a></span>
<span class="normal"><a href="#__codelineno-22-4">4</a></span>
<span class="normal"><a href="#__codelineno-22-5">5</a></span>
<span class="normal"><a href="#__codelineno-22-6">6</a></span>
<span class="normal"><a href="#__codelineno-22-7">7</a></span>
<span class="normal"><a href="#__codelineno-22-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="c1">// In Startup.cs</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="n">services</span><span class="p">.</span><span class="n">AddHttpClient</span><span class="o">&lt;</span><span class="n">IGitHubService</span><span class="p">,</span><span class="w"> </span><span class="n">GitHubService</span><span class="o">&gt;</span><span class="p">(</span><span class="n">client</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">BaseAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Uri</span><span class="p">(</span><span class="s">&quot;https://api.github.com&quot;</span><span class="p">);</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Accept&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/vnd.github+json&quot;</span><span class="p">);</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Authorization&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">$&quot;Bearer {apiTokenGoesHere}&quot;</span><span class="p">);</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">DefaultRequestHeaders</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;X-GitHub-Api-Version&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;2022-11-28&quot;</span><span class="p">);</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="p">});</span>
</code></pre></div></td></tr></table></div>
<p>We've essentially moved our configuration logic from the <code>GitHubService</code> to the IoC container, simplifying the service.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span>
<span class="normal"><a href="#__codelineno-23-13">13</a></span>
<span class="normal"><a href="#__codelineno-23-14">14</a></span>
<span class="normal"><a href="#__codelineno-23-15">15</a></span>
<span class="normal"><a href="#__codelineno-23-16">16</a></span>
<span class="normal"><a href="#__codelineno-23-17">17</a></span>
<span class="normal"><a href="#__codelineno-23-18">18</a></span>
<span class="normal"><a href="#__codelineno-23-19">19</a></span>
<span class="normal"><a href="#__codelineno-23-20">20</a></span>
<span class="normal"><a href="#__codelineno-23-21">21</a></span>
<span class="normal"><a href="#__codelineno-23-22">22</a></span>
<span class="normal"><a href="#__codelineno-23-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">GitHubService</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IGitHubService</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="p">{</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="n">HttpClient</span><span class="w"> </span><span class="n">_client</span><span class="p">;</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">GitHubService</span><span class="p">(</span><span class="n">HttpClient</span><span class="w"> </span><span class="n">client</span><span class="p">)</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">        </span><span class="n">_client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">;</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetCurrentUsername</span><span class="p">()</span>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/user&quot;</span><span class="p">)</span>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Login</span><span class="p">;</span>
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetAllUsers</span><span class="p">()</span>
<a id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">);</span>
<a id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Login</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">GetTeamNamesForOrg</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">org</span><span class="p">)</span>
<a id="__codelineno-23-19" name="__codelineno-23-19"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-23-20" name="__codelineno-23-20"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_client</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">(</span><span class="s">$&quot;/orgs/{org}/teams&quot;</span><span class="p">);</span>
<a id="__codelineno-23-21" name="__codelineno-23-21"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Select</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">).</span><span class="n">ToList</span><span class="p">();</span>
<a id="__codelineno-23-22" name="__codelineno-23-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-23" name="__codelineno-23-23"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="my-thoughts"><a class="toclink" href="../../2025/03/05/today-i-learned-configuring-httpclient-via-service-registration/#my-thoughts">My Thoughts</a></h3>
<p>Even though this is a new approach, I'm kind of torn if I like it or not. On one hand, I appreciate that we can centralize the logic in one spot so that everything for the <code>GitHubService</code> is one spot. However, if we needed other dependencies to configure the service (for example, we needed to get the bearer token from <code>AppSettings</code>), I could see this getting a bit more complicated, though contained.</p>
<p>On the other hand, we could shift all that config to the IoC and let it deal with that. It definitely streamlines the <code>GitHubService</code> so we can focus on the endpoints and their logic, however, now I've got to look for two spots to see where the client is being configured.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-12-27 00:00:00+00:00">Dec 27, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/today-i-learned/" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="year-in-review-2024"><a class="toclink" href="../../2024/12/27/year-in-review-2024/">Year in Review: 2024</a></h2>
<p>As the year comes to a close, I like to take this time to reflect on the past year: what got done, how do I feel like things are progressing, and are there any changes that I should be working on for the next year.</p>
<p>With that in mind, I generally break my goals into three sections: what progress did I make for my career? what progress did I make for the community, and finally, what progress did I make for myself?</p>
<h3 id="professional"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#professional">Professional</a></h3>
<p>This year, I focused more on learning about consulting and what a successful engagement looks like. As such, this year was a good year as I've had experience working with both larger companies (Fortune 500) and smaller companies. All in all, I find consulting to be a good application of my skills and is a natural inclination for my process improvement skills.</p>
<ul>
<li>Completed engagement with a Fortune 500 client to teach TypeScript and AWS (members were coming from COBOL)</li>
<li>Mentored two interns and helped get them hired full-time</li>
<li>Designed a system for custom form creation for an education company (which led to follow-up development work)</li>
<li>Started coaching engagement for an AgTech company focusing on delivery and process improvements</li>
<li>Designed a system for database health checks for a Database Administrator as a Service company</li>
</ul>
<p>To help Lean TECHniques with their Microsoft partnership, I spent time over the summer working on obtaining various Microsoft certifications (I ran out of time before getting the <em>Microsoft Certified: Azure Solutions Architect Expert</em> certificate, but that's on my docket for 2025)</p>
<ul>
<li>Earned the <a href="https://learn.microsoft.com/en-us/users/cameronpresley-4042/credentials/2cb0f6ef15460e5c">Microsoft Certified: Azure Administrator Associate</a> certification</li>
<li>Earned the <a href="https://learn.microsoft.com/en-us/users/cameronpresley-4042/credentials/ec65dd88cb49f4a2">Microsoft Certified: Azure Developer Associate</a> certification</li>
<li>Earned the <a href="https://learn.microsoft.com/en-us/users/
cameronpresley-4042/credentials/aabf4a1a96bb75e6">Microsoft Certified: DevOps Engineer Expert</a> certification</li>
</ul>
<p>Last, but not least, I spent some time learning some (new to me tech) like GraphQL and basic Java.</p>
<ul>
<li>Earned the <a href="https://www.apollographql.com/tutorials/certifications/a77be40c-1085-45c8-895f-464d2dcf4cd6">Graph Developer - Associate certification</a> from Apollo GraphQL</li>
<li>Was included as an acknowledgement in <em><a href="https://pragprog.com/titles/utj3/pragmatic-unit-testing-in-java-with-junit-third-edition/">Pragmatic Unit Testing in Java with JUnit: 3rd Edition by Jeff Langr</a></em> for my feedback and review before publishing.</li>
</ul>
<h3 id="community"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#community">Community</a></h3>
<p>On the community side, 2024 was a year of firsts. For example, I hosted and organized <a href="https://www.eventbookings.com/b/event/queen-city-code-retreat">Queen City Code Camp</a>, a conference where attendees learned the fundamentals of Test Driven Development (TDD) by solving the Mars Rover kata. This was the first time since 2019 that I organized a conference (and absolutely the first time since I moved to North Carolina), so lots of good lessons learned here.</p>
<p>In another first, I created my first training video, <a href="https://www.udemy.com/course/navigating-mars-using-ts-and-fp/?referralCode=134CA0E5EF78A43698B3">Navigating Mars Using Functional Programming in TypeScript</a>, a Udemy course where I walk you through how to solve the Mars Rover kata using functional programming concepts.</p>
<p>Lastly, I created two new talks this year: How to Make Your Own Automation Framework where I show you how to build your own framework using Deno, TypeScript, and GitHub Action; and How to Build More Resilient Teams where I show you how to use post-mortem and experiments to build high performing teams. In general, I shoot to create one new talk a year and I over-delivered on that goal this year (with 2025 already looking to be in good shape).</p>
<p>Outside of new talks, I authored 23 different blogs posts with my most common topics being Leadership and Functional Programming and presented at 11 different events.</p>
<h3 id="personal"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#personal">Personal</a></h3>
<ul>
<li>Read 32 books in various genres (biographical, investing, leadership, history, consulting, process, science fiction, and general fiction)</li>
<li>Learned the basics of knitting, made scarves and baby blankets using both seed and garter stitches</li>
<li>Learned the basics of working with chisels and planes (including sharpening) for woodworking</li>
<li>
<p>Built a catio for our new cat, Trix.
<img alt="Catio for Tix" src="https://softwarementorblog.blob.core.windows.net/images/trix-catio.jpg" /></p>
</li>
<li>
<p>Learned how to make two different kinds of coffee drinks (Americano and Latte)</p>
</li>
<li>Built my first computer from components (major shout-out to <a href="https://bsky.app/profile/azwyrd.bsky.social">Isaac</a> for helping me figure out the components)</li>
<li>Picked up over 30 bags of trash around the neighborhood</li>
<li>Volunteered with <a href="https://www.cubpack58.org/">Cub Scout Pack 58</a></li>
</ul>
<h3 id="what-does-2025-have-in-store"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#what-does-2025-have-in-store">What Does 2025 Have in Store?</a></h3>
<h4 id="obtain-three-client-engagements"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#obtain-three-client-engagements">Obtain Three Client Engagements</a></h4>
<p>I've spent plenty of time at step 1 (collect information), but it's now time to start putting that information into use (for better or for worse) and get my own clients. If I'm going to be successful, then I need to apply what I learn, make mistakes, mess up, learn, and iterate. As such, I'm going to expand my connections here in Charlotte, honing in on my ideal client. From there, I can expand and see what makes sense.</p>
<h4 id="author-two-training-courses"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#author-two-training-courses">Author Two Training Courses</a></h4>
<p>I learned a lot about authoring a training course by going through the Udemy process. Though it has a lower barrier to entry to get started (and they handle a good amount of the marketing), the fact that the pricing can fluctuate so much is a bit bonkers. For example, I have the course listed at $99.99, with a coupon that can bring the price down to $49.99. However, Udemy can then cut the price down to $9.99. On one hand, it increases sales, however, the amount of money made (both for Udemy and myself) is not enough to to cover the cost.</p>
<p>As such, I'll be spending time finding a new platform for 2025 where I can host my training such that the pricing is a bit more in my control. (Udemy, if you could allow course authors to set a floor on their pricing, I'd be so much happier with the service!)</p>
<h4 id="build-a-hope-chest"><a class="toclink" href="../../2024/12/27/year-in-review-2024/#build-a-hope-chest">Build a Hope Chest</a></h4>
<p>I come from a long line of makers. My dad worked in construction and manufacturing, various uncles worked as welders, fabricators, and construction, and my grandfather was a carpenter (and moonshiner, but that's a tale for a different day). I've always been fascinated about how things work and how to make them better, hence why I started my journey into woodworking during the pandemic (idle time and I had the space for it).</p>
<p>I spend my work hours building things that either won't be seen by the general public or I can't talk about the project at all, so it can be difficult to explain what I do. Plus, you can't really touch software or applications, you can use them.</p>
<p>Enter woodworking. I can build something with my own two hands and give it to a friend, keep it for myself, or as a lesson for me going forward. I've gotten some experience building small boxes using power tools last year, but I haven't built anything of a certain size and definitely not with hand tools.</p>
<p>My last major goal for 2025 is to build a <a href="https://en.wikipedia.org/wiki/Hope_chest">hope chest</a> as this is a solid piece of fine furniture and it can be something I can pass down to my children when it comes time.</p>
<p>Building this is would be tougher than anything I've built up to this point, however, it should be in the realm of my knowledge. The challenge with this build will be using strictly hand tools to build it out. It'll take me longer and it probably won't be as nice as if I had used machines, but at the end of the day, I can say that I made it.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-09-04 00:00:00+00:00">Sep 4, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/typescript/" class="md-meta__link">TypeScript</a>, 
              <a href="../../category/functional-programming/" class="md-meta__link">Functional Programming</a></li>
        
        
          
          <li class="md-meta__item">
            
              8 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="functional-design-patterns-missing-values"><a class="toclink" href="../../2024/09/04/functional-design-patterns---missing-values/">Functional Design Patterns - Missing Values</a></h2>
<p>When working in software, a common problem that we run into is what should we do if we can't get a value or compute an answer.</p>
<p>For example, let's say that you go to the library to checkout the latest book from <a href="https://www.nathaliaholt.com/">Nathalia Holt</a>, but when you search for it, you realize that they don't have any copies in stock.</p>
<p>How do you handle the absence of value? From an Object Oriented Programming (OOP), you might be able to leverage a reasonable default or the <a href="https://refactoring.guru/introduce-null-object">Null Object Pattern</a>. Another approach would be to return to always return a list and if there are no values, then the list would be empty.</p>
<p>No matter the choice you make, we need some way to model the lack of a value. <a href="https://en.wikipedia.org/wiki/Tony_Hoare">Tony Hoare referred to null as his billion dollar mistake</a> as its inclusion in languages have created countless bugs and errors.</p>
<p>In most functional languages, the idea of <code>null</code> doesn't exist, so how do they handle missing values?</p>
<h3 id="revisiting-functions"><a class="toclink" href="../../2024/09/04/functional-design-patterns---missing-values/#revisiting-functions">Revisiting Functions</a></h3>
<p>In <a href="../../2024/05/30/functional-foundations---functions/#what-is-a-function">a previous post</a>, we mention that a function is a mapping between two sets such that every element on the left (first set) is mapped to a single element on the right (the second set). So what happens when we have a mapping that's not a function?</p>
<p>In these cases, we have two solutions to choose from:</p>
<ol>
<li>Restrict the function input to only be values that can be mapped (e.g., restrict the domain)</li>
<li>Expand the possible values that the function can map to (e.g., expand the range)</li>
</ol>
<p>When refactoring a mapping, I tend to stick with option 1 because if we can prevent bad data from being created or passed in, that's less error handling that needs to be written and it becomes simpler to reason about. However, there are plenty of times where our type system (or business rules) can't enforce the valid inputs.</p>
<h3 id="number-math"><a class="toclink" href="../../2024/09/04/functional-design-patterns---missing-values/#number-math">Number Math</a></h3>
<p>Let's say that we're working on a "word calculator" where the user can enter a phrase like "one thousand twelve" and it returns "1012" as output. If we think about our input set (domain) and outputs, we would have the following (mapping from string to number).</p>
<p><img alt="Mapping from string to number" src="https://softwarementorblog.blob.core.windows.net/images/functional-missing-values/initial-mapping.png" width="750px" /></p>
<p>The issue is that we can't guarantee that the strings the user gives us would represent a number (for example, how would you convert "platypus" to a number?)</p>
<p>Since we can't restrict the input, we have to expand the output. So let's update our output to be <code>number | 'invalid'</code> </p>
<p><img alt="Mapping from string to number or 'invalid'" src="https://softwarementorblog.blob.core.windows.net/images/functional-missing-values/updated-mapping.png" width="750px" /></p>
<p>With this change, anytime we call <code>convertToNumber</code>, we'll need to add some handling on what to do if the output is <code>invalid</code>. </p>
<p>Here's some pseudocode of what this mapping could look like</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-39-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-39-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-39-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-39-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-39-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-39-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-39-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-39-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-39-10">10</a></span>
<span class="normal"><a href="#__codelineno-39-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">WordCalculatorResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;invalid&#39;</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="kd">function</span><span class="w"> </span><span class="nx">convertToNumber</span><span class="p">(</span><span class="nx">phrase</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">WorldCalculatorResult</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">phrase</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">phrase</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">    </span><span class="c1">// ... other logic</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s1">&#39;invalid&#39;</span><span class="p">;</span>
<a id="__codelineno-39-8" name="__codelineno-39-8"></a><span class="p">}</span>
<a id="__codelineno-39-9" name="__codelineno-39-9"></a>
<a id="__codelineno-39-10" name="__codelineno-39-10"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">convertToNumber</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">));</span><span class="w"> </span><span class="c1">// prints &quot;1&quot;;</span>
<a id="__codelineno-39-11" name="__codelineno-39-11"></a><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">convertToNumber</span><span class="p">(</span><span class="s1">&#39;kumquats&#39;</span><span class="p">))</span><span class="w"> </span><span class="c1">// prints invalid</span>
</code></pre></div></td></tr></table></div>
<h3 id="leaky-context"><a class="toclink" href="../../2024/09/04/functional-design-patterns---missing-values/#leaky-context">Leaky Context</a></h3>
<p>So far, so good as we have a <em>function</em> that converts words to numbers. Let's now say that we want to square a number. Writing such a function is straightforward.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1">1</a></span>
<span class="normal"><a href="#__codelineno-40-2">2</a></span>
<span class="normal"><a href="#__codelineno-40-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">square</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span><span class="p">;</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With both <code>convertToNumber</code> and <code>square</code> defined, let's try to combine these together: </p>
<p><img alt="Compilation error when combining convertToNumber and Square" src="https://softwarementorblog.blob.core.windows.net/images/functional-missing-values/compilation-error.png" /></p>
<p>This doesn't work because <code>convertToNumber</code> can return <code>invalid</code> which there's no way for the <code>square</code> function to work with that. Due to this limitation, we could rewrite the code to check for <code>invalid</code> before calling <code>square</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span>
<span class="normal"><a href="#__codelineno-41-3">3</a></span>
<span class="normal"><a href="#__codelineno-41-4">4</a></span>
<span class="normal"><a href="#__codelineno-41-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">convertToNumber</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">);</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">result</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="s1">&#39;invalid&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">square</span><span class="p">(</span><span class="nx">result</span><span class="p">));</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This approach will work, but the downside is that we need to add error handling logic in our pipeline now. If this was the only place where it's being used, then it's not too bad. However, if we were using <code>convertToNumber</code> in multiple places, then we have to remember to add this error handling logic. In fact, we would have almost the same <code>if</code> check everywhere.</p>
<p>Let's take a look at a different way of solving this problem by using the Maybe type.</p>
<h3 id="introducing-the-maybe-type"><a class="toclink" href="../../2024/09/04/functional-design-patterns---missing-values/#introducing-the-maybe-type">Introducing the Maybe Type</a></h3>
<p>In our original approach, we already had a type called <code>WordCalculatorResult</code> for the computation. Instead of it being a number or <code>invalid</code>, we could instead create a new type, called <code>Maybe</code> that looks like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;some&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="w"> </span><span class="kt">T</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">label</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;none&#39;</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>By leveraging generics and tagged unions, we have a way to represent a missing value for any type. With this new definition, we can rewrite the <code>convertToNumber</code> function to use the Maybe type.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">1</a></span>
<span class="normal"><a href="#__codelineno-43-2">2</a></span>
<span class="normal"><a href="#__codelineno-43-3">3</a></span>
<span class="normal"><a href="#__codelineno-43-4">4</a></span>
<span class="normal"><a href="#__codelineno-43-5">5</a></span>
<span class="normal"><a href="#__codelineno-43-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">convertToNumber</span><span class="p">(</span><span class="nx">phrase</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">phrase</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">label</span><span class="o">:</span><span class="s1">&#39;some&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="kt">1</span><span class="p">};</span>
<a id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">phrase</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">label</span><span class="o">:</span><span class="s1">&#39;some&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="kt">2</span><span class="p">};</span>
<a id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="w">    </span><span class="c1">// other logic</span>
<a id="__codelineno-43-5" name="__codelineno-43-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">label</span><span class="o">:</span><span class="s1">&#39;none&#39;</span><span class="p">};</span>
<a id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>I don't know about you, but typing out <code>{label:'some'}</code> is going to get tiring, so let's create two helper functions, <code>some</code> and <code>none</code> that handle putting the right label if we have a value or not.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1">1</a></span>
<span class="normal"><a href="#__codelineno-44-2">2</a></span>
<span class="normal"><a href="#__codelineno-44-3">3</a></span>
<span class="normal"><a href="#__codelineno-44-4">4</a></span>
<span class="normal"><a href="#__codelineno-44-5">5</a></span>
<span class="normal"><a href="#__codelineno-44-6">6</a></span>
<span class="normal"><a href="#__codelineno-44-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">some</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">label</span><span class="o">:</span><span class="s1">&#39;some&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">};</span>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="p">}</span>
<a id="__codelineno-44-4" name="__codelineno-44-4"></a>
<a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="kd">function</span><span class="w"> </span><span class="nx">none</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="nx">label</span><span class="o">:</span><span class="s1">&#39;none&#39;</span><span class="p">};</span>
<a id="__codelineno-44-7" name="__codelineno-44-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Which allows us to replace all of the <code>{label:'some', value:x}</code> with <code>some(x)</code> and <code>{label:'none'}</code> with <code>none()</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1">1</a></span>
<span class="normal"><a href="#__codelineno-45-2">2</a></span>
<span class="normal"><a href="#__codelineno-45-3">3</a></span>
<span class="normal"><a href="#__codelineno-45-4">4</a></span>
<span class="normal"><a href="#__codelineno-45-5">5</a></span>
<span class="normal"><a href="#__codelineno-45-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">convertToNumber</span><span class="p">(</span><span class="nx">phrase</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">phrase</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">some</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">phrase</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">some</span><span class="p">(</span><span class="mf">2</span><span class="p">);</span>
<a id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="w">    </span><span class="c1">// other logic</span>
<a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">none</span><span class="p">();</span>
<a id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Now that <code>convertToNumber</code> returns a Maybe, our pipeline would look like the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1">1</a></span>
<span class="normal"><a href="#__codelineno-46-2">2</a></span>
<span class="normal"><a href="#__codelineno-46-3">3</a></span>
<span class="normal"><a href="#__codelineno-46-4">4</a></span>
<span class="normal"><a href="#__codelineno-46-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">convertToNumber</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">);</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">label</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;some&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// checking if we&#39;re a Some type</span>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">square</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">value</span><span class="p">));</span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="introducing-transformations-with-map"><a class="toclink" href="../../2024/09/04/functional-design-patterns---missing-values/#introducing-transformations-with-map">Introducing Transformations With Map</a></h3>
<p>Now the problem we're wanting to solve is to get rid of having to do an if check on <code>some</code> in order to call the <code>square</code> function. Given that we're wanting to transform our number into a different number, we can write another function, called <code>map</code> that takes two parameters: the <code>Maybe</code> we want transformed and the function that knows how to transform it. Let's take a look at how to write such a function.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1">1</a></span>
<span class="normal"><a href="#__codelineno-47-2">2</a></span>
<span class="normal"><a href="#__codelineno-47-3">3</a></span>
<span class="normal"><a href="#__codelineno-47-4">4</a></span>
<span class="normal"><a href="#__codelineno-47-5">5</a></span>
<span class="normal"><a href="#__codelineno-47-6">6</a></span>
<span class="normal"><a href="#__codelineno-47-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">map</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span><span class="nx">U</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">m</span><span class="o">:</span><span class="kt">Maybe</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="nx">f</span><span class="o">:</span><span class="p">(</span><span class="nx">t</span><span class="o">:</span><span class="kt">T</span><span class="p">)=&gt;</span><span class="nx">U</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="nx">U</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">label</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;some&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Is Maybe a Some?</span>
<a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">transformedValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">f</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span><span class="w"> </span><span class="c1">// Grab the value and transform it by calling function f</span>
<a id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">some</span><span class="p">(</span><span class="nx">transformedValue</span><span class="p">)</span><span class="w"> </span><span class="c1">// return a new Maybe with the transformed value</span>
<a id="__codelineno-47-5" name="__codelineno-47-5"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">none</span><span class="p">();</span><span class="w"> </span><span class="c1">// Return none since there&#39;s no value to transform</span>
<a id="__codelineno-47-7" name="__codelineno-47-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With <code>map</code> implemented, let's update our code to use it!</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-48-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-48-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-48-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-48-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-48-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-48-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-48-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-48-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-48-10">10</a></span>
<span class="normal"><a href="#__codelineno-48-11">11</a></span>
<span class="normal"><a href="#__codelineno-48-12">12</a></span>
<span class="normal"><a href="#__codelineno-48-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">convertResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">convertToNumber</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// </span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">transformedResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">map</span><span class="p">(</span><span class="nx">convertResult</span><span class="p">,</span><span class="w"> </span><span class="nx">square</span><span class="p">);</span>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">transformedResult</span><span class="p">.</span><span class="nx">label</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;some&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// checking if we&#39;re a Some type</span>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">transformedResult</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="p">}</span>
<a id="__codelineno-48-7" name="__codelineno-48-7"></a>
<a id="__codelineno-48-8" name="__codelineno-48-8"></a><span class="cm">/* The above could be simplified as the following</span>
<a id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="cm">const result = map(convertToNumber(&#39;one&#39;), square);</span>
<a id="__codelineno-48-10" name="__codelineno-48-10"></a><span class="cm">if (result.label === &#39;some&#39;) {</span>
<a id="__codelineno-48-11" name="__codelineno-48-11"></a><span class="cm">  console.log(result.value)</span>
<a id="__codelineno-48-12" name="__codelineno-48-12"></a><span class="cm">}</span>
<a id="__codelineno-48-13" name="__codelineno-48-13"></a><span class="cm">*/</span>
</code></pre></div></td></tr></table></div>
<p>Thanks to <code>map</code> and <code>Maybe</code>, we're able to write two pure functions (<code>convertToNumber</code> and <code>square</code>), glue them together, and delegate our error handling to one spot (instead of having to sprinkle this throughout the codebase). </p>
<h3 id="calling-side-affects-using-tee"><a class="toclink" href="../../2024/09/04/functional-design-patterns---missing-values/#calling-side-affects-using-tee">Calling Side Affects Using Tee</a></h3>
<p>With the addition of <code>map</code>, we've now simplified our <code>if</code> check to only call <code>console.log</code> now (instead of calling the square function then console.log). If we wanted to truly get rid of this if statement, then we need a way to invoke the <code>console.log</code> as a side effect. We don't want to combine <code>console.log</code> into <code>square</code> because <code>square</code> is business rules and we don't want to add side effect logic to our business rules.</p>
<p>Similar to what we did for <code>map</code>, let's add a new function, called <code>tee</code>, that takes in three arguments: a <code>Maybe</code>, a function to call if the <code>Maybe</code> has a value, and then a function to call if <code>Maybe</code> doesn't have a value.</p>
<p>Let's take a look at what an implementation would look like:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-49-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-49-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-49-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-49-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-49-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-49-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-49-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-49-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-49-10">10</a></span>
<span class="normal"><a href="#__codelineno-49-11">11</a></span>
<span class="normal"><a href="#__codelineno-49-12">12</a></span>
<span class="normal"><a href="#__codelineno-49-13">13</a></span>
<span class="normal"><a href="#__codelineno-49-14">14</a></span>
<span class="normal"><a href="#__codelineno-49-15">15</a></span>
<span class="normal"><a href="#__codelineno-49-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="cm">/*</span>
<a id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="cm"> Inputs:</span>
<a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="cm">    m: A Maybe to work with</span>
<a id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="cm">    ifSome: A function that takes in a T (which comes from the Maybe) and returns void</span>
<a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="cm">    ifNone: A function that takes no inputs and returns void</span>
<a id="__codelineno-49-6" name="__codelineno-49-6"></a><span class="cm"> Outputs:</span>
<a id="__codelineno-49-7" name="__codelineno-49-7"></a><span class="cm">    Returns m so that we can continue chaining calls</span>
<a id="__codelineno-49-8" name="__codelineno-49-8"></a><span class="cm">*/</span>
<a id="__codelineno-49-9" name="__codelineno-49-9"></a><span class="kd">function</span><span class="w"> </span><span class="nx">tee</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">m</span><span class="o">:</span><span class="kt">Maybe</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="nx">ifSome</span><span class="o">:</span><span class="p">(</span><span class="nx">t</span><span class="o">:</span><span class="kt">T</span><span class="p">)=&gt;</span><span class="ow">void</span><span class="p">,</span><span class="w"> </span><span class="nx">ifNone</span><span class="o">:</span><span class="p">()=&gt;</span><span class="ow">void</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-10" name="__codelineno-49-10"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">label</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;some&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-11" name="__codelineno-49-11"></a><span class="w">        </span><span class="nx">ifSome</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<a id="__codelineno-49-12" name="__codelineno-49-12"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-49-13" name="__codelineno-49-13"></a><span class="w">        </span><span class="nx">ifNone</span><span class="p">();</span>
<a id="__codelineno-49-14" name="__codelineno-49-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-49-15" name="__codelineno-49-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">m</span><span class="p">;</span>
<a id="__codelineno-49-16" name="__codelineno-49-16"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With <code>tee</code> implemented, we can update our pipeline to take advantage of it:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-50-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-50-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-50-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-50-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-50-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-50-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-50-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-50-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-50-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">convertResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">convertToNumber</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// </span>
<a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">transformedResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">map</span><span class="p">(</span><span class="nx">convertResult</span><span class="p">,</span><span class="w"> </span><span class="nx">square</span><span class="p">);</span>
<a id="__codelineno-50-3" name="__codelineno-50-3"></a>
<a id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">ifSome</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">t</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Result is </span><span class="si">${</span><span class="nx">t</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<a id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="kd">const</span><span class="w"> </span><span class="nx">ifNone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Failed to calculate result.&#39;</span><span class="p">);</span>
<a id="__codelineno-50-6" name="__codelineno-50-6"></a>
<a id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="nx">tee</span><span class="p">(</span><span class="nx">transformedResult</span><span class="p">,</span><span class="w"> </span><span class="nx">ifSome</span><span class="p">,</span><span class="w"> </span><span class="nx">ifNone</span><span class="p">);</span>
<a id="__codelineno-50-8" name="__codelineno-50-8"></a>
<a id="__codelineno-50-9" name="__codelineno-50-9"></a><span class="c1">// if we wanted to get rid of the temp values, we could do the following</span>
<a id="__codelineno-50-10" name="__codelineno-50-10"></a><span class="c1">// const result = tee(map(convertToNumber(&#39;one&#39;), square)), ifSome, ifNone);</span>
</code></pre></div></td></tr></table></div>
<h3 id="cleaning-up-by-using-an-object"><a class="toclink" href="../../2024/09/04/functional-design-patterns---missing-values/#cleaning-up-by-using-an-object">Cleaning Up by using an Object</a></h3>
<p>We've now centralized the <code>if</code> logic to the functions that work on <code>Maybe</code>s which is helpful, but as we're already seeing, the code can be hard to parse as you need to read from the outside in (which is very Clojure or Scheme in nature).</p>
<p>Instead of building up functions this way, we can instead create a TypeScript class and use a <a href="https://en.wikipedia.org/wiki/Fluent_interface#Examples"><code>fluent interface</code> pattern</a> by doing the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-51-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-51-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-51-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-51-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-51-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-51-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-51-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-51-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-51-10">10</a></span>
<span class="normal"><a href="#__codelineno-51-11">11</a></span>
<span class="normal"><a href="#__codelineno-51-12">12</a></span>
<span class="normal"><a href="#__codelineno-51-13">13</a></span>
<span class="normal"><a href="#__codelineno-51-14">14</a></span>
<span class="normal"><a href="#__codelineno-51-15">15</a></span>
<span class="normal"><a href="#__codelineno-51-16">16</a></span>
<span class="normal"><a href="#__codelineno-51-17">17</a></span>
<span class="normal"><a href="#__codelineno-51-18">18</a></span>
<span class="normal"><a href="#__codelineno-51-19">19</a></span>
<span class="normal"><a href="#__codelineno-51-20">20</a></span>
<span class="normal"><a href="#__codelineno-51-21">21</a></span>
<span class="normal"><a href="#__codelineno-51-22">22</a></span>
<span class="normal"><a href="#__codelineno-51-23">23</a></span>
<span class="normal"><a href="#__codelineno-51-24">24</a></span>
<span class="normal"><a href="#__codelineno-51-25">25</a></span>
<span class="normal"><a href="#__codelineno-51-26">26</a></span>
<span class="normal"><a href="#__codelineno-51-27">27</a></span>
<span class="normal"><a href="#__codelineno-51-28">28</a></span>
<span class="normal"><a href="#__codelineno-51-29">29</a></span>
<span class="normal"><a href="#__codelineno-51-30">30</a></span>
<span class="normal"><a href="#__codelineno-51-31">31</a></span>
<span class="normal"><a href="#__codelineno-51-32">32</a></span>
<span class="normal"><a href="#__codelineno-51-33">33</a></span>
<span class="normal"><a href="#__codelineno-51-34">34</a></span>
<span class="normal"><a href="#__codelineno-51-35">35</a></span>
<span class="normal"><a href="#__codelineno-51-36">36</a></span>
<span class="normal"><a href="#__codelineno-51-37">37</a></span>
<span class="normal"><a href="#__codelineno-51-38">38</a></span>
<span class="normal"><a href="#__codelineno-51-39">39</a></span>
<span class="normal"><a href="#__codelineno-51-40">40</a></span>
<span class="normal"><a href="#__codelineno-51-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span>
<a id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="p">{</span>
<a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="kr">constructor</span><span class="p">(</span><span class="k">private</span><span class="w"> </span><span class="k">readonly</span><span class="w"> </span><span class="nx">value</span><span class="o">:</span><span class="kt">T</span><span class="o">|</span><span class="kc">undefined</span><span class="o">=</span><span class="kc">undefined</span><span class="p">){}</span>
<a id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="w">  </span><span class="nx">map</span><span class="o">&lt;</span><span class="nx">U</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">f</span><span class="o">:</span><span class="p">(</span><span class="nx">t</span><span class="o">:</span><span class="kt">T</span><span class="p">)=&gt;</span><span class="nx">U</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="nx">U</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">Maybe</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="p">.</span><span class="nx">none</span><span class="p">();</span>
<a id="__codelineno-51-6" name="__codelineno-51-6"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-51-7" name="__codelineno-51-7"></a><span class="w">  </span><span class="nx">tee</span><span class="p">(</span><span class="nx">ifSome</span><span class="o">:</span><span class="p">(</span><span class="nx">t</span><span class="o">:</span><span class="kt">T</span><span class="p">)=&gt;</span><span class="ow">void</span><span class="p">,</span><span class="w"> </span><span class="nx">ifNone</span><span class="o">:</span><span class="p">()=&gt;</span><span class="ow">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-8" name="__codelineno-51-8"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="kc">undefined</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-9" name="__codelineno-51-9"></a><span class="w">      </span><span class="nx">ifSome</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<a id="__codelineno-51-10" name="__codelineno-51-10"></a><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-11" name="__codelineno-51-11"></a><span class="w">      </span><span class="nx">ifNone</span><span class="p">();</span>
<a id="__codelineno-51-12" name="__codelineno-51-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-51-13" name="__codelineno-51-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">;</span>
<a id="__codelineno-51-14" name="__codelineno-51-14"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-51-15" name="__codelineno-51-15"></a><span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="nx">some</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">value</span><span class="o">:</span><span class="kt">T</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-16" name="__codelineno-51-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Maybe</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
<a id="__codelineno-51-17" name="__codelineno-51-17"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-51-18" name="__codelineno-51-18"></a><span class="w">  </span><span class="k">static</span><span class="w"> </span><span class="nx">none</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">()</span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-19" name="__codelineno-51-19"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Maybe</span><span class="p">();</span>
<a id="__codelineno-51-20" name="__codelineno-51-20"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-51-21" name="__codelineno-51-21"></a><span class="p">}</span>
<a id="__codelineno-51-22" name="__codelineno-51-22"></a><span class="c1">// Defined in index.ts</span>
<a id="__codelineno-51-23" name="__codelineno-51-23"></a><span class="kd">function</span><span class="w"> </span><span class="nx">convertToNumber</span><span class="p">(</span><span class="nx">phrase</span><span class="o">:</span><span class="kt">string</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Maybe</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-24" name="__codelineno-51-24"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">phrase</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;one&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">Maybe</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="mf">1</span><span class="p">);</span>
<a id="__codelineno-51-25" name="__codelineno-51-25"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">phrase</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;two&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">Maybe</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="mf">2</span><span class="p">);</span>
<a id="__codelineno-51-26" name="__codelineno-51-26"></a><span class="w">    </span><span class="c1">// other logic</span>
<a id="__codelineno-51-27" name="__codelineno-51-27"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">Maybe</span><span class="p">.</span><span class="nx">none</span><span class="p">();</span>
<a id="__codelineno-51-28" name="__codelineno-51-28"></a><span class="p">}</span>
<a id="__codelineno-51-29" name="__codelineno-51-29"></a>
<a id="__codelineno-51-30" name="__codelineno-51-30"></a><span class="kd">function</span><span class="w"> </span><span class="nx">square</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="kt">number</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-51-31" name="__codelineno-51-31"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">x</span><span class="o">*</span><span class="nx">x</span><span class="p">;</span>
<a id="__codelineno-51-32" name="__codelineno-51-32"></a><span class="p">}</span>
<a id="__codelineno-51-33" name="__codelineno-51-33"></a>
<a id="__codelineno-51-34" name="__codelineno-51-34"></a><span class="c1">// By using the fluent interface pattern, we can chain methods together and have this code read</span>
<a id="__codelineno-51-35" name="__codelineno-51-35"></a><span class="c1">// more naturally</span>
<a id="__codelineno-51-36" name="__codelineno-51-36"></a><span class="nx">convertToNumber</span><span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">)</span>
<a id="__codelineno-51-37" name="__codelineno-51-37"></a><span class="w">  </span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">square</span><span class="p">)</span>
<a id="__codelineno-51-38" name="__codelineno-51-38"></a><span class="w">  </span><span class="p">.</span><span class="nx">tee</span><span class="p">(</span>
<a id="__codelineno-51-39" name="__codelineno-51-39"></a><span class="w">    </span><span class="p">(</span><span class="nx">v</span><span class="p">)=&gt;</span><span class="w"> </span><span class="sb">`Answer is </span><span class="si">${</span><span class="nx">v</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-51-40" name="__codelineno-51-40"></a><span class="w">    </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s2">&quot;Unable to calculate result&quot;</span>
<a id="__codelineno-51-41" name="__codelineno-51-41"></a><span class="w">  </span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<h3 id="wrapping-up"><a class="toclink" href="../../2024/09/04/functional-design-patterns---missing-values/#wrapping-up">Wrapping Up</a></h3>
<p>When writing software, a common problem we run into is what to do when we can't calculate a value or a result. In this post, we looked at techniques to restrict the function's input or expand their output to handle scenarios. From there, we looked into a type called Maybe and how it can represent the absence of value, but still provide a way to remove having to explicitly write error handling code by consolidating the checks into a <code>map</code> call. Lastly, we look into taking the various functions that we wrote and combine them into a formal <code>Maybe</code> class that allows us to leverage a fluent interface and chain our interactions together.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-08-27 00:00:00+00:00">Aug 27, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/typescript/" class="md-meta__link">TypeScript</a>, 
              <a href="../../category/functional-programming/" class="md-meta__link">Functional Programming</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="functional-design-patterns-reduce-and-monoids"><a class="toclink" href="../../2024/08/27/functional-design-patterns---reduce-and-monoids/">Functional Design Patterns - Reduce and Monoids</a></h2>
<p>When learning about a loops, a common exercise is to take an array of elements and calculate some value based on them.  For example, let's say that we have an array of numbers and we want to find their sum. One approach would be the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span>
<span class="normal"><a href="#__codelineno-26-4">4</a></span>
<span class="normal"><a href="#__codelineno-26-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">];</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="kd">let</span><span class="w"> </span><span class="nx">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">const</span><span class="w"> </span><span class="nx">val</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">values</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">    </span><span class="nx">total</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">val</span><span class="p">;</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This code works and we'll get the right answer, however, there's a pattern sitting here. If you find yourself writing code that has this shape (some initial value and some logic in the loop), then you have a <em>reducer</em> in disguise.</p>
<p>Let's convert this code to use the <em><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce">reduce</a></em> function instead.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">];</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">acc</span><span class="p">,</span><span class="w"> </span><span class="nx">curr</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">acc</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">curr</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>The <code>reduce</code> function takes two parameters, the <em>reducer</em> and the <em>initial value</em>. For the <em>initial value</em>, this is the value that the result should be if the array is empty. Since we're adding numbers together, zero makes the most sense.</p>
<p>The <em>reducer</em>, on the other hand, says that if you give me the accumulated result so far (called <em>acc</em> in the example) and an element from the array (called <em>curr</em> in the above example), what's the new accumulation?</p>
<p>Reduce is an extremely powerful tool (in fact, <a href="../../../presentations/#level-up-on-functional-programming-by-rebuilding-linq">I give a presentation where we rewrite some of C#'s LINQ operators as reduce</a>).</p>
<p>But there's another pattern sitting here. If you find that the initial value and elements of the array have the same type, you most likely have a <a href="https://en.wikipedia.org/wiki/Monoid">monoid</a>.</p>
<h3 id="intro-to-monoids"><a class="toclink" href="../../2024/08/27/functional-design-patterns---reduce-and-monoids/#intro-to-monoids">Intro to Monoids</a></h3>
<p>The concept of Monoid comes from the field of <a href="https://en.wikipedia.org/wiki/Category_theory">category theory</a> where a Monoid contains three things</p>
<ol>
<li>A set of values (you can think about this as a type)</li>
<li>Some binary operation (e.g., a function that takes two inputs and returns a single output of said type)</li>
<li>Some identity element such that if you pass the id to the binary operation, you get the other element back.</li>
</ol>
<p>There's a lot of theory sitting here, so let's put it in more concrete terms.</p>
<p>If we have a Monoid over the a type A, then the following must be true:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span>
<span class="normal"><a href="#__codelineno-28-4">4</a></span>
<span class="normal"><a href="#__codelineno-28-5">5</a></span>
<span class="normal"><a href="#__codelineno-28-6">6</a></span>
<span class="normal"><a href="#__codelineno-28-7">7</a></span>
<span class="normal"><a href="#__codelineno-28-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kd">function</span><span class="w"> </span><span class="nx">operation</span><span class="o">&lt;</span><span class="nx">A</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="kt">A</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">A</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="p">{</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">    </span><span class="c1">// logic for operation</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="p">}</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="kd">const</span><span class="w"> </span><span class="nx">identity</span><span class="o">:</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="c1">// some value of type A</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="nx">operation</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">identity</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">operation</span><span class="p">(</span><span class="nx">identity</span><span class="p">,</span><span class="w"> </span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">x</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="nx">operation</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">operation</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span><span class="w"> </span><span class="nx">z</span><span class="p">))</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">operation</span><span class="p">(</span><span class="nx">operation</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="p">),</span><span class="w"> </span><span class="nx">z</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Here's how we would define such a thing in TypeScript.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span>
<span class="normal"><a href="#__codelineno-29-3">3</a></span>
<span class="normal"><a href="#__codelineno-29-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="nx">Monoid</span><span class="o">&lt;</span><span class="nx">A</span><span class="o">&gt;</span><span class="p">{</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">    </span><span class="nx">operation</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="kt">A</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">A</span><span class="p">)=&gt;</span><span class="w"> </span><span class="nx">A</span><span class="p">;</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">    </span><span class="nx">identity</span><span class="o">:</span><span class="kt">A</span><span class="p">;</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="exploring-total"><a class="toclink" href="../../2024/08/27/functional-design-patterns---reduce-and-monoids/#exploring-total">Exploring Total</a></h4>
<p>With more theory in place, let's apply it to our running total from before. It turns out that addition forms a Monoid over positive numbers with the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span>
<span class="normal"><a href="#__codelineno-30-2">2</a></span>
<span class="normal"><a href="#__codelineno-30-3">3</a></span>
<span class="normal"><a href="#__codelineno-30-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">additionOverNumber</span><span class="o">:</span><span class="w"> </span><span class="kt">Monoid</span><span class="o">&lt;</span><span class="kt">number</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="w">    </span><span class="nx">identity</span><span class="o">:</span><span class="w"> </span><span class="kt">0</span><span class="p">,</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="w">    </span><span class="nx">operation</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">number</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">number</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">a</span><span class="o">+</span><span class="nx">b</span><span class="p">;</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Wait a minute... This looks like what the <code>reduce</code> function needed from before! </p>
<p>In the case where we have a Monoid, we have a way of reducing an array to a single value <em>for free</em> because of the properties that Monoid gives us.</p>
<h4 id="exploring-booleans"><a class="toclink" href="../../2024/08/27/functional-design-patterns---reduce-and-monoids/#exploring-booleans">Exploring Booleans</a></h4>
<p>Thankfully, we're not limited to just numbers. For example, let's take a look at booleans with the <code>&amp;&amp;</code> and <code>||</code> operators.</p>
<p>In the case of <code>&amp;&amp;</code>, that's our operation, so now we need to find the identity element. In other words, what value must <code>id</code> be if the following statements are true?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span>
<span class="normal"><a href="#__codelineno-31-2">2</a></span>
<span class="normal"><a href="#__codelineno-31-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="nx">id</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="nx">id</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="kc">false</span>
</code></pre></div></td></tr></table></div>
<p>Since <code>id</code> has to be a boolean, the answer is <code>true</code>. Therefore, we can define our Monoid like so</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span>
<span class="normal"><a href="#__codelineno-32-3">3</a></span>
<span class="normal"><a href="#__codelineno-32-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">AndOverBoolean</span><span class="o">:</span><span class="w"> </span><span class="kt">Monoid</span><span class="o">&lt;</span><span class="kt">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">    </span><span class="nx">identity</span><span class="o">:</span><span class="w"> </span><span class="kt">true</span><span class="p">,</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">    </span><span class="nx">operation</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="o">:</span><span class="kt">boolean</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">b</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>With this monoid defined, let's put it to use. Let's say that we wanted to check if every number in a list is even. We could write the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">];</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">areAllEven</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span><span class="p">=&gt;</span><span class="nx">x</span><span class="o">%</span><span class="mf">2</span><span class="o">===</span><span class="mf">0</span><span class="p">).</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">AndOverBoolean</span><span class="p">.</span><span class="nx">operation</span><span class="p">,</span><span class="w"> </span><span class="nx">AndOverBoolean</span><span class="p">.</span><span class="nx">identity</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Huh, that looks an awful lot like how we could have used <em><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every">every</a></em>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">];</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">areAllEven</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">every</span><span class="p">(</span><span class="nx">x</span><span class="p">=&gt;</span><span class="nx">x</span><span class="o">%</span><span class="mf">2</span><span class="o">===</span><span class="mf">0</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Let's take a look at the <code>||</code> monoid now. We have the operation, but we now we need to find the identity. In other words, what value must <code>id</code> be if the following statements are true?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1">1</a></span>
<span class="normal"><a href="#__codelineno-35-2">2</a></span>
<span class="normal"><a href="#__codelineno-35-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">id</span><span class="o">:</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="nx">id</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="nx">id</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="kc">false</span>
</code></pre></div></td></tr></table></div>
<p>Since <code>id</code> has to be a boolean, the answer is <code>false</code>. Therefore, we can define our monoid as such.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span>
<span class="normal"><a href="#__codelineno-36-3">3</a></span>
<span class="normal"><a href="#__codelineno-36-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">OrOverBoolean</span><span class="o">:</span><span class="w"> </span><span class="kt">Monoid</span><span class="o">&lt;</span><span class="kt">boolean</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="w">    </span><span class="nx">identity</span><span class="o">:</span><span class="w"> </span><span class="kt">false</span><span class="p">,</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="w">    </span><span class="nx">operation</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">x</span><span class="o">:</span><span class="kt">boolean</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="o">:</span><span class="kt">boolean</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">y</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="p">}</span><span class="w"> </span>
</code></pre></div></td></tr></table></div>
<p>With this monoid defined, let's put it to use. Let's say that we wanted to check if some number in a list is even. We could write the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">];</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">areAllEven</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span><span class="p">=&gt;</span><span class="nx">x</span><span class="o">%</span><span class="mf">2</span><span class="o">===</span><span class="mf">0</span><span class="p">).</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">OrOverBoolean</span><span class="p">.</span><span class="nx">operation</span><span class="p">,</span><span class="w"> </span><span class="nx">OrOverBoolean</span><span class="p">.</span><span class="nx">identity</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Similar to the <code>AndOverBoolean</code>, this looks very similar to the code we would have written if we had leveraged <em><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some">some</a></em>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">,</span><span class="w"> </span><span class="mf">5</span><span class="p">];</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="kd">const</span><span class="w"> </span><span class="nx">isAnyEven</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">values</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="nx">x</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">x</span><span class="o">%</span><span class="mf">2</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<h3 id="wrapping-up"><a class="toclink" href="../../2024/08/27/functional-design-patterns---reduce-and-monoids/#wrapping-up">Wrapping Up</a></h3>
<p>When working with arrays of items, it's common to need to reduce the list down to a single element. You can start with a for loop and then refactor to using the reduce function. If the types are all the same, then it's likely that you also have a monoid, which can give you stronger guarantees about your code.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-08-19 00:00:00+00:00">Aug 19, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/today-i-learned/" class="md-meta__link">Today I Learned</a>, 
              <a href="../../category/typescript/" class="md-meta__link">TypeScript</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-leveraging-mock-names-with-jest"><a class="toclink" href="../../2024/08/19/today-i-learned---leveraging-mock-names-with-jest/">Today I Learned - Leveraging Mock Names with Jest</a></h2>
<p>I was working through the <a href="https://blog.thesoftwarementor.com/articles/2020/05/20/learning-through-example--mars-rover-kata/">Mars Rover kata</a> the other day and found myself in a predicament when trying to test one of the functions, the <code>convertCommandToAction</code> function.</p>
<p>The idea behind the function is that based on the Command you pass in, it'll return the right function to call. The code looks something like this.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span>
<span class="normal"><a href="#__codelineno-8-19">19</a></span>
<span class="normal"><a href="#__codelineno-8-20">20</a></span>
<span class="normal"><a href="#__codelineno-8-21">21</a></span>
<span class="normal"><a href="#__codelineno-8-22">22</a></span>
<span class="normal"><a href="#__codelineno-8-23">23</a></span>
<span class="normal"><a href="#__codelineno-8-24">24</a></span>
<span class="normal"><a href="#__codelineno-8-25">25</a></span>
<span class="normal"><a href="#__codelineno-8-26">26</a></span>
<span class="normal"><a href="#__codelineno-8-27">27</a></span>
<span class="normal"><a href="#__codelineno-8-28">28</a></span>
<span class="normal"><a href="#__codelineno-8-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;MoveForward&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;MoveBackward&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;TurnLeft&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;TurnRight&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;Quit&#39;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="kr">type</span><span class="w"> </span><span class="nx">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="nx">Rover</span><span class="p">;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="kd">const</span><span class="w"> </span><span class="nx">moveForward</span><span class="o">:</span><span class="kt">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="nx">Rover</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">  </span><span class="c1">// business rules</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="p">}</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="kd">const</span><span class="w"> </span><span class="nx">moveBackward</span><span class="o">:</span><span class="kt">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Rover</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">  </span><span class="c1">// business rules</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="p">}</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="kd">const</span><span class="w"> </span><span class="nx">turnLeft</span><span class="o">:</span><span class="kt">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="nx">Rover</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="w">  </span><span class="c1">// business rules</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="p">}</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="kd">const</span><span class="w"> </span><span class="nx">turnRight</span><span class="o">:</span><span class="kt">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Rover</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">  </span><span class="c1">// business rules</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="p">}</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="kd">const</span><span class="w"> </span><span class="nx">quit</span><span class="o">:</span><span class="kt">Action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">r</span><span class="o">:</span><span class="kt">Rover</span><span class="p">)</span><span class="o">:</span><span class="nx">Rover</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="w">  </span><span class="c1">// business rules</span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="p">}</span>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a>
<a id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="c1">// Function that I&#39;m wanting to write tests against.</span>
<a id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="kd">function</span><span class="w"> </span><span class="nx">convertCommandToAction</span><span class="p">(</span><span class="nx">c</span><span class="o">:</span><span class="kt">Command</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="nx">Action</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-23" name="__codelineno-8-23"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;MoveForward&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">moveForward</span><span class="p">;</span>
<a id="__codelineno-8-24" name="__codelineno-8-24"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;MoveBackward&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">moveBackward</span><span class="p">;</span>
<a id="__codelineno-8-25" name="__codelineno-8-25"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;TurnLeft&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">turnLeft</span><span class="p">;</span>
<a id="__codelineno-8-26" name="__codelineno-8-26"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;TurnRight&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">turnRight</span><span class="p">;</span>
<a id="__codelineno-8-27" name="__codelineno-8-27"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s1">&#39;Quit&#39;</span><span class="o">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">quit</span><span class="p">;</span>
<a id="__codelineno-8-28" name="__codelineno-8-28"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-8-29" name="__codelineno-8-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>I'm able to write tests across all the other functions easily enough, but for the <code>convertCommandToAction</code>, I needed some way to know which function is being returned.</p>
<p>Since I don't want the real functions to be used, my mind went to leveraging <code>Jest</code> and mocking out the module that the actions were defined in, yielding the following test setup.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Command</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./models&quot;</span><span class="p">;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">convertCommandToAction</span><span class="p">,</span><span class="w"> </span><span class="nx">convertStringToCommand</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">&quot;./parsers&quot;</span><span class="p">;</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="nx">jest</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="s2">&quot;./actions&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">  </span><span class="nx">moveForward</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">(),</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">  </span><span class="nx">moveBackward</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">(),</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">  </span><span class="nx">turnLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">(),</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">  </span><span class="nx">turnRight</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">(),</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">  </span><span class="nx">quit</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">(),</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="p">}));</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;When converting a Command to an Action&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">  </span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;and the command is MoveForward, then the right action is returned&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">convertCommandToAction</span><span class="p">(</span><span class="s2">&quot;MoveForward&quot;</span><span class="p">);</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="w">    </span><span class="c1">// What should my expect be?</span>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">  </span><span class="p">});</span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="p">});</span>
</code></pre></div></td></tr></table></div>
<p>One approach that I have used in the past is jest's ability <a href="https://jestjs.io/docs/jest-object#jestismockfunctionfn">to test if a function is a mocked function</a>, however, that approach doesn't work here because all of the functions are being mocked out. Meaning, that my test would pass, but if I returned <code>moveBackward</code> instead of <code>moveForward</code>, my test would still pass (but now for the wrong reason). I need a way to know <em>which</em> function was being returned.</p>
<p>Doing some digging, I found that the <code>jest.fn()</code> has a way of setting a name for a mock by leveraging the <a href="https://jestjs.io/docs/mock-function-api#mockfnmocknamename"><code>mockName</code></a> function. This in turn allowed me to change my setup to look like this.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span>
<span class="normal"><a href="#__codelineno-10-5">5</a></span>
<span class="normal"><a href="#__codelineno-10-6">6</a></span>
<span class="normal"><a href="#__codelineno-10-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="nx">jest</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="s2">&quot;./actions&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">({</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="w">  </span><span class="nx">moveForward</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">().</span><span class="nx">mockName</span><span class="p">(</span><span class="s1">&#39;moveForward&#39;</span><span class="p">),</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span><span class="nx">moveBackward</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">().</span><span class="nx">mockName</span><span class="p">(</span><span class="s1">&#39;moveBackward&#39;</span><span class="p">),</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="w">  </span><span class="nx">turnLeft</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">().</span><span class="nx">mockName</span><span class="p">(</span><span class="s1">&#39;turnLeft&#39;</span><span class="p">),</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">  </span><span class="nx">turnRight</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">().</span><span class="nx">mockName</span><span class="p">(</span><span class="s1">&#39;turnRight&#39;</span><span class="p">),</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">  </span><span class="nx">quit</span><span class="o">:</span><span class="w"> </span><span class="kt">jest.fn</span><span class="p">().</span><span class="nx">mockName</span><span class="p">(</span><span class="s1">&#39;quit&#39;</span><span class="p">),</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="p">}));</span>
</code></pre></div></td></tr></table></div>
<em>Note: It turns out that the <code>mockName</code> function is part of a <a href="https://martinfowler.com/bliki/FluentInterface.html">fluent interface</a>, which allows it to return a jest.Mock as the result of the mockName call</em></p>
<p>With my setup updated, my tests can now check that the result has the right mockName.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span>
<span class="normal"><a href="#__codelineno-11-6">6</a></span>
<span class="normal"><a href="#__codelineno-11-7">7</a></span>
<span class="normal"><a href="#__codelineno-11-8">8</a></span>
<span class="normal"><a href="#__codelineno-11-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;When converting a Command to an Action&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">  </span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;and the command is MoveForward, then the right action is returned&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">    </span><span class="c1">// have to convert result as a jest.Mock to make TypeScript happy</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">convertCommandToAction</span><span class="p">(</span><span class="s2">&quot;MoveForward&quot;</span><span class="p">)</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">unknown</span><span class="w"> </span><span class="kr">as</span><span class="w"> </span><span class="nx">Jest</span><span class="p">.</span><span class="nx">Mock</span><span class="p">;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">    </span><span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">getMockName</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="s2">&quot;moveForward&quot;</span><span class="p">);</span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">  </span><span class="p">});</span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="p">});</span>
</code></pre></div></td></tr></table></div>
<h3 id="wrapping-up"><a class="toclink" href="../../2024/08/19/today-i-learned---leveraging-mock-names-with-jest/#wrapping-up">Wrapping Up</a></h3>
<p>If you find yourself writing functions that return other function (i.e., leveraging functional programming concepts), then you check out using <code>mockName</code> for keeping track of which functions are being returned.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-08-15 00:00:00+00:00">Aug 15, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/process/" class="md-meta__link">Process</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="an-alternative-approach-to-sprint-planning-introducing-hippogriff"><a class="toclink" href="../../2024/08/15/an-alternative-approach-to-sprint-planning---introducing-hippogriff/">An Alternative Approach to Sprint Planning - Introducing Hippogriff</a></h2>
<h3 id="background"><a class="toclink" href="../../2024/08/15/an-alternative-approach-to-sprint-planning---introducing-hippogriff/#background">Background</a></h3>
<p>One of my first jobs in engineering was working for a medical device company. This is was pretty cool as I wrote software that interacted with the device to show measurements and give recommendations to the physicians about those measurements.</p>
<p>To ensure that things were working correctly, we had a department called V&amp;V (Validation and Verification). I had never heard of this term before in my career, so my boss told me that it was responsible for ensuring that we built the right thing because it's engineering's job to build it right.</p>
<p>These two principles (build the right thing and build it right) have stuck with me during my career. So much so, I believe this may have been the start of my interest in product engineering and wanting to understand the "why" behind the stuff that I build.</p>
<p>It was the same job that I was introduced to the concept of Kanban, and the idea of eliminating waste from our process as it inherently slows us down by focusing on the wrong things. I'm known to be a process improver at heart and the idea of Kaizen (continuous improvement) resonates with me.</p>
<p>So when I think about how many teams are tackling work breakdown and estimating, I can't help but think that we're spending our time on the wrong things and not enough on the right things.</p>
<h3 id="my-experiences-with-engineering-teams-today"><a class="toclink" href="../../2024/08/15/an-alternative-approach-to-sprint-planning---introducing-hippogriff/#my-experiences-with-engineering-teams-today">My Experiences with Engineering Teams Today</a></h3>
<p>A common piece of feedback with teams that are following Scrum principles is that they feel like they are in meetings all the time and there's no time to do the actual work. As someone who has a love/hate relationship with meetings, this is totally understandable.</p>
<p>There are a set number of meetings ("activities" in Scrum parlance) that teams follow, one of which is sprint planning, a time to make sure that what the team is working on is aligned with priorities from product.</p>
<p>While I find value in the synchronization with product, I don't find very much value in the estimation portion of the meeting as it gets the focus on the wrong things.</p>
<p>If we look at the value that estimates provide, the goal is to ensure that the team is taking on a reasonable load for the sprint (e.g., what are our commitments) and not over-extending as that can cause burn-out.</p>
<p>I have two problems with estimations. First, they're way too easy to be taken as a deadline (so much so, that you've probably <a href="https://softwarementorblog.blob.core.windows.net/images/hippogriff/agile-estimates.jpg">seen this meme spread around</a>). Which in turn, causes the team to go deeper into estimating stories (breaking them down to single tasks), which causes a feedback loop. </p>
<p>If this keeps up, you'll eventually find yourself going into Waterfall mode where the team needs every single requirement up front before they can do any development, the opposite of what we're trying to do.</p>
<p>Instead of the team focusing on estimations, I'd much rather see them strategize on an approach to the problem and let that be the driver to the work.</p>
<p>One approach that I've seen teams take is to use "relative sizing", so instead of saying that work will take four hours, they might say that it's a "2" (if using the <a href="https://www.mountaingoatsoftware.com/blog/why-the-fibonacci-sequence-works-well-for-estimating">Fibonacci approach</a>) or it's a "Small" (if using <a href="https://asana.com/resources/t-shirt-sizing">T-Shirt sizing</a>).</p>
<p><em>Side Note: I've also seen <a href="https://agileinspirations.com/estimation-exercises/">fruit and animals</a> as relative sizing options.</em></p>
<p>The problem I have with relative sizing is that it can be helpful for the team, it's total nonsense for business stakeholders. For example, let's say that we're working on the new <em>Shiny Widget 9000</em> and Marketing wants to know when it's gong to be ready so that they can start getting the marketing materials ready and start promotion. You can't tell them that it's going to take 108 story points or 16 Mediums as that is meaningless. </p>
<p>They need a timeline, so what does engineering do? They look up historic trends for the team and say something like "We typically get 4 Mediums done in 2 weeks, so we're looking at 2 months, give or take". Which means that we're correlating a relative size to a unit of time. So what value did we gain?</p>
<p>When I think about planning, I'm focusing on stories that are independent, deliver value, and can be accomplished within a sprint. I don't necessarily care if the story is a 2, 3, or 5 as long as the team has a rough approach to the work and understands why we need the functionality.</p>
<h3 id="a-different-approach"><a class="toclink" href="../../2024/08/15/an-alternative-approach-to-sprint-planning---introducing-hippogriff/#a-different-approach">A Different Approach</a></h3>
<p>Instead of spending time on estimates, what if we approached planning this way?</p>
<ol>
<li>Product and Engineering work together to break priorities down to smaller items that can be accomplished in a sprint (remembering to keep them independent).</li>
<li>Team works together to move the stories in priority order (taking into account dependencies).</li>
<li>Team takes on the first item.</li>
<li>Product and Engineering can move/re-prioritize items as needed, but can't modify work in flight.</li>
<li>As an item is completed, the team takes on the next important item.</li>
</ol>
<p>This focuses the meeting on the important things (what's important for us to work on, how would we approach it) and less on the things that don't matter (fine-tuned estimations).</p>
<p>For those keeping track, this sounds pretty similar to Kanban (which it absolutely is ), but if you're looking for a catchy name, you can call this the <em>Highest Priority Goes First</em> ( or Hippogriff) framework.</p>
<p>Long story short, I'd like to see teams spending less time on estimations and more time on figuring out what the problem is, solutioning, getting feedback, and iterating.</p>
<p>Isn't that what the <a href="https://agilemanifesto.org/">Agile Manifesto</a> is all about?</p>
<h3 id="recommended-reading"><a class="toclink" href="../../2024/08/15/an-alternative-approach-to-sprint-planning---introducing-hippogriff/#recommended-reading">Recommended Reading</a></h3>
<p>While working on this post, I found <a href="https://www.mountaingoatsoftware.com/agile/scrum/meetings/sprint-planning-meeting">this article by Mountain Goat Software</a> to be immensely helpful in capturing the goals of sprint planning and some external validation that I'm not the only one who's experienced this problem as well.</p>
    
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://github.com/cameronpresley.png" alt="Cameron Presley">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-08-06 00:00:00+00:00">Aug 6, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/today-i-learned/" class="md-meta__link">Today I Learned</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="today-i-learned-changing-the-entrypoint-for-a-docker-container"><a class="toclink" href="../../2024/08/06/today-i-learned-changing-the-entrypoint-for-a-docker-container/">Today I Learned: Changing the Entrypoint for a Docker Container</a></h2>
<p>A common pattern for building software today is to develop using containers. This is a great strategy because it can ensure that everyone is building/deploying the same environment every time. However, like any other tooling, it can take a bit to create the file and make sure that you're setting it up correctly.</p>
<p>When I'm building a container, I typically will run <code>bash</code> in the container so I can inspect files, paths, permissions and more.</p>
<p>For example, let's say that I wanted to see what all is in the <code>node</code> image, I could run the following</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>node:22<span class="w"> </span>bash
</code></pre></div></td></tr></table></div>
<p>And as long as the <code>node</code> image has bash installed, I can take a look.</p>
<p>This trick works just fine when I have access to the Dockerfile and can change it. But what if you didn't have access to the Dockerfile? How would you troubleshoot?</p>
<h3 id="the-scenario"><a class="toclink" href="../../2024/08/06/today-i-learned-changing-the-entrypoint-for-a-docker-container/#the-scenario">The Scenario</a></h3>
<p>Let's say that I'm using a container that was created from another team, called <code>deps</code>. When I try to run it though, I get the following error:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>deps:latest
</code></pre></div></td></tr></table></div>
<p><img alt="Node error stating that it could not find module '/app/hello.js'" src="https://softwarementorblog.blob.core.windows.net/images/til-docker-entrypoint/image-1.png" /></p>
<p>Looking at the error message, it says that it couldn't find <code>/app/hello.js</code>. I could let the other team know and let them figure it out. However, I'd like to give them a bit more info and possible advice, so I could use the <code>bash</code> trick from before and see if I can spot the problem.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>deps:latest<span class="w"> </span>bash
</code></pre></div></td></tr></table></div>
<p><img alt="Node error stating that it could not find module '/app/hello.js" src="https://softwarementorblog.blob.core.windows.net/images/til-docker-entrypoint/image-1.png" /></p>
<p>Wait a minute! Why did I get the same error?</p>
<p>The reason is because the image has an <code>ENTRYPOINT</code> defined, which means that whenever the container starts, it's going to run that command. Since that command is the one that's failing, the container crashes before it executes bash or any other command.</p>
<h3 id="the-solution"><a class="toclink" href="../../2024/08/06/today-i-learned-changing-the-entrypoint-for-a-docker-container/#the-solution">The Solution</a></h3>
<p>Since I don't have access to the Dockerfile, I need a way to change the entrypoint to allow it to run bash. Luckily, it turns out that the <code>docker run</code> command has a <code>--entrypoint</code> param that you can set to be whatever the command should be.</p>
<p>So let's run the container, except this time, specifying bash as the entrypoint.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--entrypoint<span class="w"> </span><span class="s2">&quot;bash&quot;</span><span class="w"> </span>deps:latest
</code></pre></div></td></tr></table></div>
<p>And if I run the <code>ls</code> command, I can see that the issue is that the file is called index.js, not hello.js. </p>
<p><img alt="There's not a file called hello.js, but it's called index.js" src="https://softwarementorblog.blob.core.windows.net/images/til-docker-entrypoint/image-3.png" /></p>
<p>From here, I can give this information to the other team and they can make the necessary changes to their Dockerfile.</p>
    
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <span class="md-pagination__current">2</span> <a class="md-pagination__link" href="../3/">3</a> <a class="md-pagination__link" href="../4/">4</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../9/">9</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../.." class="md-footer__link md-footer__link--prev" aria-label="Previous: About Me">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                About Me
              </div>
            </div>
          </a>
        
        
          
          <a href="../../category/net/" class="md-footer__link md-footer__link--next" aria-label="Next: .NET">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                .NET
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.footer", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.ad38c271.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b66b2b78.min.js"></script>
      
    
  </body>
</html>